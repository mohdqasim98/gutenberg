"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[1750],{"./packages/block-editor/src/components/block-draggable/draggable-chip.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return BlockDraggableChip}});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/icons/build-module/library/drag-handle.js"),_block_icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function BlockDraggableChip(_ref){let{count:count,icon:icon,isPattern:isPattern}=_ref;const patternLabel=isPattern&&(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Pattern");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-draggable-chip-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-draggable-chip","data-testid":"block-draggable-chip",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Z,{justify:"center",className:"block-editor-block-draggable-chip__content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{children:icon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_block_icon__WEBPACK_IMPORTED_MODULE_4__.Z,{icon:icon}):patternLabel||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__._n)("%d block","%d blocks",count),count)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_block_icon__WEBPACK_IMPORTED_MODULE_4__.Z,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_5__.Z})})]})})})}BlockDraggableChip.displayName="BlockDraggableChip",BlockDraggableChip.__docgenInfo={description:"",methods:[],displayName:"BlockDraggableChip"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-draggable/draggable-chip.js"]={name:"BlockDraggableChip",docgenInfo:BlockDraggableChip.__docgenInfo,path:"packages/block-editor/src/components/block-draggable/draggable-chip.js"})},"./packages/block-editor/src/components/block-draggable/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return block_draggable}});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),draggable=__webpack_require__("./packages/components/build-module/draggable/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),draggable_chip=__webpack_require__("./packages/block-editor/src/components/block-draggable/draggable-chip.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const BlockDraggable=_ref=>{let{children:children,clientIds:clientIds,cloneClassname:cloneClassname,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref;const{srcRootClientId:srcRootClientId,isDraggable:isDraggable,icon:icon}=(0,use_select.Z)((select=>{var _getBlockType;const{canMoveBlocks:canMoveBlocks,getBlockRootClientId:getBlockRootClientId,getBlockName:getBlockName}=select(store.h),rootClientId=getBlockRootClientId(clientIds[0]),blockName=getBlockName(clientIds[0]);return{srcRootClientId:rootClientId,isDraggable:canMoveBlocks(clientIds,rootClientId),icon:null===(_getBlockType=(0,build_module.ck)(blockName))||void 0===_getBlockType?void 0:_getBlockType.icon}}),[clientIds]),isDragging=(0,react.useRef)(!1),[startScrolling,scrollOnDragOver,stopScrolling]=function useScrollWhenDragging(){const dragStartY=(0,react.useRef)(null),velocityY=(0,react.useRef)(null),scrollParentY=(0,react.useRef)(null),scrollEditorInterval=(0,react.useRef)(null);return(0,react.useEffect)((()=>()=>{scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}),[]),[(0,react.useCallback)((event=>{dragStartY.current=event.clientY,scrollParentY.current=(0,get_scroll_container.Z)(event.target),scrollEditorInterval.current=setInterval((()=>{if(scrollParentY.current&&velocityY.current){const newTop=scrollParentY.current.scrollTop+velocityY.current;scrollParentY.current.scroll({top:newTop})}}),25)}),[]),(0,react.useCallback)((event=>{if(!scrollParentY.current)return;const scrollParentHeight=scrollParentY.current.offsetHeight,offsetDragStartPosition=dragStartY.current-scrollParentY.current.offsetTop,offsetDragPosition=event.clientY-scrollParentY.current.offsetTop;if(event.clientY>offsetDragStartPosition){const moveableDistance=Math.max(scrollParentHeight-offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragPosition-offsetDragStartPosition-50,0)/moveableDistance;velocityY.current=25*distancePercentage}else if(event.clientY<offsetDragStartPosition){const moveableDistance=Math.max(offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragStartPosition-offsetDragPosition-50,0)/moveableDistance;velocityY.current=-25*distancePercentage}else velocityY.current=0}),[]),()=>{dragStartY.current=null,scrollParentY.current=null,scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}]}(),{startDraggingBlocks:startDraggingBlocks,stopDraggingBlocks:stopDraggingBlocks}=(0,use_dispatch.Z)(store.h);if((0,react.useEffect)((()=>()=>{isDragging.current&&stopDraggingBlocks()}),[]),!isDraggable)return children({draggable:!1});const transferData={type:"block",srcClientIds:clientIds,srcRootClientId:srcRootClientId};return(0,jsx_runtime.jsx)(draggable.Z,{cloneClassname:cloneClassname,__experimentalTransferDataType:"wp-blocks",transferData:transferData,onDragStart:event=>{startDraggingBlocks(clientIds),isDragging.current=!0,startScrolling(event),onDragStart&&onDragStart()},onDragOver:scrollOnDragOver,onDragEnd:()=>{stopDraggingBlocks(),isDragging.current=!1,stopScrolling(),onDragEnd&&onDragEnd()},__experimentalDragComponent:(0,jsx_runtime.jsx)(draggable_chip.Z,{count:clientIds.length,icon:icon}),children:_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})}})};BlockDraggable.displayName="BlockDraggable",BlockDraggable.__docgenInfo={description:"",methods:[],displayName:"BlockDraggable"};var block_draggable=BlockDraggable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-draggable/index.js"]={name:"BlockDraggable",docgenInfo:BlockDraggable.__docgenInfo,path:"packages/block-editor/src/components/block-draggable/index.js"})},"./packages/block-editor/src/components/block-edit/context.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{FF:function(){return DEFAULT_BLOCK_EDIT_CONTEXT},Q2:function(){return Provider},Z8:function(){return useBlockEditContext}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const DEFAULT_BLOCK_EDIT_CONTEXT={name:"",isSelected:!1},Context=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_BLOCK_EDIT_CONTEXT),{Provider:Provider}=Context;function useBlockEditContext(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context)}},"./packages/block-editor/src/components/block-icon/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/library/block-default.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function BlockIcon(_ref){var _icon;let{icon:icon,showColors:showColors=!1,className:className,context:context}=_ref;"block-default"===(null===(_icon=icon)||void 0===_icon?void 0:_icon.src)&&(icon={src:_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z});const renderedIcon=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{icon:icon&&icon.src?icon.src:icon,context:context}),style=showColors?{backgroundColor:icon&&icon.background,color:icon&&icon.foreground}:{};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{style:style,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-block-icon",className,{"has-colors":showColors}),children:renderedIcon})}BlockIcon.displayName="BlockIcon",BlockIcon.__docgenInfo={description:"",methods:[],displayName:"BlockIcon",props:{showColors:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.Z=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.memo)(BlockIcon),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-icon/index.js"]={name:"BlockIcon",docgenInfo:BlockIcon.__docgenInfo,path:"packages/block-editor/src/components/block-icon/index.js"})},"./packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{LT:function(){return useBlockRefProvider},tI:function(){return useBlockRef},qT:function(){return useBlockElement}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),_provider_block_refs_provider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/components/provider/block-refs-provider.js");function useBlockRefProvider(clientId){const{refs:refs,callbacks:callbacks}=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_provider_block_refs_provider__WEBPACK_IMPORTED_MODULE_1__.N),ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>(refs.set(ref,clientId),()=>{refs.delete(ref)})),[clientId]),(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.Z)((element=>{ref.current=element,callbacks.forEach(((id,setElement)=>{clientId===id&&setElement(element)}))}),[clientId])}function useBlockRef(clientId){const{refs:refs}=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_provider_block_refs_provider__WEBPACK_IMPORTED_MODULE_1__.N),freshClientId=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return freshClientId.current=clientId,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({get current(){let element=null;for(const[ref,id]of refs.entries())id===freshClientId.current&&ref.current&&(element=ref.current);return element}})),[])}function useBlockElement(clientId){const{callbacks:callbacks}=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_provider_block_refs_provider__WEBPACK_IMPORTED_MODULE_1__.N),ref=useBlockRef(clientId),[element,setElement]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(null);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{if(clientId)return callbacks.set(setElement,clientId),()=>{callbacks.delete(setElement)}}),[clientId]),ref.current||element}},"./packages/block-editor/src/components/block-lock/modal.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return BlockLockModal}});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/components/build-module/modal/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/components/build-module/checkbox-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/components/build-module/icon/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/components/build-module/toggle-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./packages/components/build-module/button/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/icons/build-module/library/lock.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/icons/build-module/library/unlock.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/blocks/build-module/index.js"),_use_block_lock__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/components/block-lock/use-block-lock.js"),_use_block_display_information__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/block-editor/src/components/use-block-display-information/index.js"),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/store/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ALLOWS_EDIT_LOCKING=["core/block","core/navigation"];function getTemplateLockValue(lock){return lock.remove&&lock.move?"all":!(!lock.remove||lock.move)&&"insert"}function BlockLockModal(_ref){let{clientId:clientId,onClose:onClose}=_ref;const[lock,setLock]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useState)({move:!1,remove:!1}),{canEdit:canEdit,canMove:canMove,canRemove:canRemove}=(0,_use_block_lock__WEBPACK_IMPORTED_MODULE_5__.Z)(clientId),{allowsEditLocking:allowsEditLocking,templateLock:templateLock,hasTemplateLock:hasTemplateLock}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.Z)((select=>{var _getBlockAttributes,_blockType$attributes;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(_store__WEBPACK_IMPORTED_MODULE_2__.h),blockName=getBlockName(clientId),blockType=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.ck)(blockName);return{allowsEditLocking:ALLOWS_EDIT_LOCKING.includes(blockName),templateLock:null===(_getBlockAttributes=getBlockAttributes(clientId))||void 0===_getBlockAttributes?void 0:_getBlockAttributes.templateLock,hasTemplateLock:!(null==blockType||null===(_blockType$attributes=blockType.attributes)||void 0===_blockType$attributes||!_blockType$attributes.templateLock)}}),[clientId]),[applyTemplateLock,setApplyTemplateLock]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useState)(!!templateLock),{updateBlockAttributes:updateBlockAttributes}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_7__.Z)(_store__WEBPACK_IMPORTED_MODULE_2__.h),blockInformation=(0,_use_block_display_information__WEBPACK_IMPORTED_MODULE_8__.Z)(clientId),instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_9__.Z)(BlockLockModal,"block-editor-block-lock-modal__options-title");(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{setLock({move:!canMove,remove:!canRemove,...allowsEditLocking?{edit:!canEdit}:{}})}),[canEdit,canMove,canRemove,allowsEditLocking]);const isAllChecked=Object.values(lock).every(Boolean),isMixed=Object.values(lock).some(Boolean)&&!isAllChecked;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_10__.Z,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Lock %s"),blockInformation.title),overlayClassName:"block-editor-block-lock-modal",closeLabel:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Close"),onRequestClose:onClose,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("p",{children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Choose specific attributes to restrict or lock all available options.")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("form",{onSubmit:event=>{event.preventDefault(),updateBlockAttributes([clientId],{lock:lock,templateLock:applyTemplateLock?getTemplateLockValue(lock):void 0}),onClose()},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{role:"group","aria-labelledby":instanceId,className:"block-editor-block-lock-modal__options",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.C,{__nextHasNoMarginBottom:!0,className:"block-editor-block-lock-modal__options-title",label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{id:instanceId,children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Lock all")}),checked:isAllChecked,indeterminate:isMixed,onChange:newValue=>setLock({move:newValue,remove:newValue,...allowsEditLocking?{edit:newValue}:{}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("ul",{className:"block-editor-block-lock-modal__checklist",children:[allowsEditLocking&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.C,{__nextHasNoMarginBottom:!0,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Restrict editing"),checked:!!lock.edit,onChange:edit=>setLock((prevLock=>({...prevLock,edit:edit})))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_12__.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.edit?_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__.Z:_wordpress_icons__WEBPACK_IMPORTED_MODULE_14__.Z})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.C,{__nextHasNoMarginBottom:!0,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Disable movement"),checked:lock.move,onChange:move=>setLock((prevLock=>({...prevLock,move:move})))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_12__.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.move?_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__.Z:_wordpress_icons__WEBPACK_IMPORTED_MODULE_14__.Z})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.C,{__nextHasNoMarginBottom:!0,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Prevent removal"),checked:lock.remove,onChange:remove=>setLock((prevLock=>({...prevLock,remove:remove})))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_12__.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.remove?_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__.Z:_wordpress_icons__WEBPACK_IMPORTED_MODULE_14__.Z})]})]}),hasTemplateLock&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_15__.Z,{className:"block-editor-block-lock-modal__template-lock",label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Apply to all blocks inside"),checked:applyTemplateLock,disabled:lock.move&&!lock.remove,onChange:()=>setApplyTemplateLock(!applyTemplateLock)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_16__.Z,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_17__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_18__.ZP,{variant:"tertiary",onClick:onClose,children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Cancel")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_17__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_18__.ZP,{variant:"primary",type:"submit",children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Apply")})})]})]})]})}BlockLockModal.displayName="BlockLockModal",BlockLockModal.__docgenInfo={description:"",methods:[],displayName:"BlockLockModal"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/modal.js"]={name:"BlockLockModal",docgenInfo:BlockLockModal.__docgenInfo,path:"packages/block-editor/src/components/block-lock/modal.js"})},"./packages/block-editor/src/components/block-lock/use-block-lock.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useBlockLock}});var _wordpress_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/block-editor/src/store/index.js");function useBlockLock(clientId){return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_1__.Z)((select=>{const{canEditBlock:canEditBlock,canMoveBlock:canMoveBlock,canRemoveBlock:canRemoveBlock,canLockBlockType:canLockBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getTemplateLock:getTemplateLock}=select(_store__WEBPACK_IMPORTED_MODULE_0__.h),rootClientId=getBlockRootClientId(clientId),canEdit=canEditBlock(clientId),canMove=canMoveBlock(clientId,rootClientId),canRemove=canRemoveBlock(clientId,rootClientId);return{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLockBlockType(getBlockName(clientId)),isContentLocked:"contentOnly"===getTemplateLock(clientId),isLocked:!canEdit||!canMove||!canRemove}}),[clientId])}},"./packages/block-editor/src/components/block-mover/button.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{t:function(){return BlockMoverDownButton},g:function(){return BlockMoverUpButton}});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),build_module=__webpack_require__("./packages/blocks/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),chevron_up=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),chevron_down=__webpack_require__("./packages/icons/build-module/library/chevron-down.js");const getMovementDirection=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?"right":"left":"up":"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?"left":"right":"down":null;function getBlockMoverDescription(selectedCount,type,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(selectedCount>1)return function getMultiBlockMoverDescription(selectedCount,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(isFirst&&isLast)return(0,i18n_build_module.__)("All blocks are selected, and cannot be moved");if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d down by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved down as they are already at the bottom");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d up by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved up as they are already at the top");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}}(selectedCount,firstIndex,isFirst,isLast,dir,orientation);if(isFirst&&isLast)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %s is the only block, and cannot be moved"),type);if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d down to position %3$d"),type,position,position+1);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position+1);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position+1)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved down"),type);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved right"),type)}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d up to position %3$d"),type,position,position-1);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position-1);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position-1)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved up"),type);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved right"),type)}}var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getArrowIcon=(direction,orientation)=>"up"===direction?"horizontal"===orientation?(0,i18n_build_module.dZ)()?chevron_right.Z:chevron_left.Z:chevron_up.Z:"down"===direction?"horizontal"===orientation?(0,i18n_build_module.dZ)()?chevron_left.Z:chevron_right.Z:chevron_down.Z:null,getMovementDirectionLabel=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move up"):"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move down"):null,BlockMoverButton=(0,react.forwardRef)(((_ref,ref)=>{let{clientIds:clientIds,direction:direction,orientation:moverOrientation,...props}=_ref;const instanceId=(0,use_instance_id.Z)(BlockMoverButton),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],blocksCount=normalizedClientIds.length,{blockType:blockType,isDisabled:isDisabled,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,firstIndex:firstIndex,orientation:orientation="vertical"}=(0,use_select.Z)((select=>{const{getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getBlockOrder:getBlockOrder,getBlock:getBlock,getBlockListSettings:getBlockListSettings}=select(store.h),firstClientId=normalizedClientIds[0],blockRootClientId=getBlockRootClientId(firstClientId),firstBlockIndex=getBlockIndex(firstClientId),lastBlockIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(blockRootClientId),block=getBlock(firstClientId),isFirstBlock=0===firstBlockIndex,isLastBlock=lastBlockIndex===blockOrder.length-1,{orientation:blockListOrientation}=getBlockListSettings(blockRootClientId)||{};return{blockType:block?(0,build_module.ck)(block.name):null,isDisabled:"up"===direction?isFirstBlock:isLastBlock,rootClientId:blockRootClientId,firstIndex:firstBlockIndex,isFirst:isFirstBlock,isLast:isLastBlock,orientation:moverOrientation||blockListOrientation}}),[clientIds,direction]),{moveBlocksDown:moveBlocksDown,moveBlocksUp:moveBlocksUp}=(0,use_dispatch.Z)(store.h),moverFunction="up"===direction?moveBlocksUp:moveBlocksDown,descriptionId=`block-editor-block-mover-button__description-${instanceId}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.ZP,{ref:ref,className:classnames_default()("block-editor-block-mover-button",`is-${direction}-button`),icon:getArrowIcon(direction,orientation),label:getMovementDirectionLabel(direction,orientation),"aria-describedby":descriptionId,...props,onClick:isDisabled?null:event=>{moverFunction(clientIds,rootClientId),props.onClick&&props.onClick(event)},disabled:isDisabled,__experimentalIsFocusable:!0}),(0,jsx_runtime.jsx)(component.Z,{id:descriptionId,children:getBlockMoverDescription(blocksCount,blockType&&blockType.title,firstIndex,isFirst,isLast,"up"===direction?-1:1,orientation)})]})})),BlockMoverUpButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"up",ref:ref,...props}))),BlockMoverDownButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"down",ref:ref,...props})))},"./packages/block-editor/src/components/block-mover/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/icons/build-module/library/drag-handle.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/button/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/components/build-module/toolbar/toolbar-item/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_block_draggable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/block-editor/src/components/block-draggable/index.js"),_button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/block-editor/src/components/block-mover/button.js"),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/store/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function BlockMover(_ref){let{clientIds:clientIds,hideDragHandle:hideDragHandle}=_ref;const{canMove:canMove,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,orientation:orientation}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.Z)((select=>{var _getBlockListSettings;const{getBlockIndex:getBlockIndex,getBlockListSettings:getBlockListSettings,canMoveBlocks:canMoveBlocks,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(_store__WEBPACK_IMPORTED_MODULE_2__.h),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],firstClientId=normalizedClientIds[0],_rootClientId=getBlockRootClientId(firstClientId),firstIndex=getBlockIndex(firstClientId),lastIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(_rootClientId);return{canMove:canMoveBlocks(clientIds,_rootClientId),rootClientId:_rootClientId,isFirst:0===firstIndex,isLast:lastIndex===blockOrder.length-1,orientation:null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation}}),[clientIds]);if(!canMove||isFirst&&isLast&&!rootClientId)return null;const dragHandleLabel=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Drag");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.Z,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-block-mover",{"is-horizontal":"horizontal"===orientation}),children:[!hideDragHandle&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_block_draggable__WEBPACK_IMPORTED_MODULE_6__.Z,{clientIds:clientIds,children:draggableProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_7__.ZP,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_8__.Z,className:"block-editor-block-mover__drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1",...draggableProps})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"block-editor-block-mover__move-button-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_9__.Z,{children:itemProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_button__WEBPACK_IMPORTED_MODULE_10__.g,{clientIds:clientIds,...itemProps})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_9__.Z,{children:itemProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_button__WEBPACK_IMPORTED_MODULE_10__.t,{clientIds:clientIds,...itemProps})})]})]})}BlockMover.displayName="BlockMover",BlockMover.__docgenInfo={description:"",methods:[],displayName:"BlockMover"},__webpack_exports__.Z=BlockMover,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-mover/index.js"]={name:"BlockMover",docgenInfo:BlockMover.__docgenInfo,path:"packages/block-editor/src/components/block-mover/index.js"})},"./packages/block-editor/src/components/block-patterns-list/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/tooltip/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/reakit/es/Composite/Composite.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_block_preview__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/components/block-preview/index.js"),_inserter_draggable_blocks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WithToolTip=_ref=>{let{showTooltip:showTooltip,title:title,children:children}=_ref;return showTooltip?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Z,{text:title,children:children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:children})};function BlockPattern(_ref2){let{isDraggable:isDraggable,pattern:pattern,onClick:onClick,onHover:onHover,composite:composite,showTooltip:showTooltip}=_ref2;const[isDragging,setIsDragging]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),{blocks:blocks,viewportWidth:viewportWidth}=pattern,descriptionId=`block-editor-block-patterns-list__item-description-${(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__.Z)(BlockPattern)}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_inserter_draggable_blocks__WEBPACK_IMPORTED_MODULE_5__.Z,{isEnabled:isDraggable,blocks:blocks,isPattern:!!pattern,children:_ref3=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-patterns-list__list-item",draggable:draggable,onDragStart:event=>{setIsDragging(!0),onDragStart&&(null==onHover||onHover(null),onDragStart(event))},onDragEnd:event=>{setIsDragging(!1),onDragEnd&&onDragEnd(event)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(WithToolTip,{showTooltip:showTooltip,title:pattern.title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_6__.A,{role:"option",as:"div",...composite,className:"block-editor-block-patterns-list__item",onClick:()=>{onClick(pattern,blocks),null==onHover||onHover(null)},onMouseEnter:()=>{isDragging||null==onHover||onHover(pattern)},onMouseLeave:()=>null==onHover?void 0:onHover(null),"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_block_preview__WEBPACK_IMPORTED_MODULE_7__.ZP,{blocks:blocks,viewportWidth:viewportWidth}),!showTooltip&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-patterns-list__item-title",children:pattern.title}),!!pattern.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_8__.Z,{id:descriptionId,children:pattern.description})]})})})}})}function BlockPatternPlaceholder(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-patterns-list__item is-placeholder"})}function BlockPatternList(_ref4){let{isDraggable:isDraggable,blockPatterns:blockPatterns,shownPatterns:shownPatterns,onHover:onHover,onClickPattern:onClickPattern,orientation:orientation,label:label=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Block Patterns"),showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const composite=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_9__.u)({orientation:orientation});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_10__.b,{...composite,role:"listbox",className:"block-editor-block-patterns-list","aria-label":label,children:blockPatterns.map((pattern=>shownPatterns.includes(pattern)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BlockPattern,{pattern:pattern,onClick:onClickPattern,onHover:onHover,isDraggable:isDraggable,composite:composite,showTooltip:showTitlesAsTooltip},pattern.name):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BlockPatternPlaceholder,{},pattern.name)))})}BlockPattern.displayName="BlockPattern",BlockPatternPlaceholder.displayName="BlockPatternPlaceholder",BlockPatternList.displayName="BlockPatternList",BlockPatternList.__docgenInfo={description:"",methods:[],displayName:"BlockPatternList",props:{label:{defaultValue:{value:"__( 'Block Patterns' )",computed:!0},required:!1}}},__webpack_exports__.Z=BlockPatternList,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-patterns-list/index.js"]={name:"BlockPatternList",docgenInfo:BlockPatternList.__docgenInfo,path:"packages/block-editor/src/components/block-patterns-list/index.js"})},"./packages/block-editor/src/components/block-popover/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/popover/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_block_list_use_block_props_use_block_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js"),_use_popover_scroll__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/components/block-popover/use-popover-scroll.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;function BlockPopover(_ref,ref){let{clientId:clientId,bottomClientId:bottomClientId,children:children,__unstableRefreshSize:__unstableRefreshSize,__unstableCoverTarget:__unstableCoverTarget=!1,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,shift:shift=!0,...props}=_ref;const selectedElement=(0,_block_list_use_block_props_use_block_refs__WEBPACK_IMPORTED_MODULE_2__.qT)(clientId),lastSelectedElement=(0,_block_list_use_block_props_use_block_refs__WEBPACK_IMPORTED_MODULE_2__.qT)(null!=bottomClientId?bottomClientId:clientId),mergedRefs=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.Z)([ref,(0,_use_popover_scroll__WEBPACK_IMPORTED_MODULE_4__.Z)(__unstableContentRef)]),[popoverDimensionsRecomputeCounter,forceRecomputePopoverDimensions]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)((()=>{if(!selectedElement)return;const observer=new window.MutationObserver(forceRecomputePopoverDimensions);return observer.observe(selectedElement,{attributes:!0}),()=>{observer.disconnect()}}),[selectedElement]);const style=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useMemo)((()=>popoverDimensionsRecomputeCounter<0||!selectedElement||lastSelectedElement!==selectedElement?{}:{position:"absolute",width:selectedElement.offsetWidth,height:selectedElement.offsetHeight}),[selectedElement,lastSelectedElement,__unstableRefreshSize,popoverDimensionsRecomputeCounter]),popoverAnchor=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useMemo)((()=>{if(!(popoverDimensionsRecomputeCounter<0||!selectedElement||bottomClientId&&!lastSelectedElement))return{getBoundingClientRect(){var _lastSelectedBCR$left,_lastSelectedBCR$top,_lastSelectedBCR$righ,_lastSelectedBCR$bott;const selectedBCR=selectedElement.getBoundingClientRect(),lastSelectedBCR=null==lastSelectedElement?void 0:lastSelectedElement.getBoundingClientRect(),left=Math.min(selectedBCR.left,null!==(_lastSelectedBCR$left=null==lastSelectedBCR?void 0:lastSelectedBCR.left)&&void 0!==_lastSelectedBCR$left?_lastSelectedBCR$left:1/0),top=Math.min(selectedBCR.top,null!==(_lastSelectedBCR$top=null==lastSelectedBCR?void 0:lastSelectedBCR.top)&&void 0!==_lastSelectedBCR$top?_lastSelectedBCR$top:1/0),width=Math.max(selectedBCR.right,null!==(_lastSelectedBCR$righ=lastSelectedBCR.right)&&void 0!==_lastSelectedBCR$righ?_lastSelectedBCR$righ:-1/0)-left,height=Math.max(selectedBCR.bottom,null!==(_lastSelectedBCR$bott=lastSelectedBCR.bottom)&&void 0!==_lastSelectedBCR$bott?_lastSelectedBCR$bott:-1/0)-top;return new window.DOMRect(left,top,width,height)},ownerDocument:selectedElement.ownerDocument}}),[bottomClientId,lastSelectedElement,selectedElement,popoverDimensionsRecomputeCounter]);return!selectedElement||bottomClientId&&!lastSelectedElement?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_6__.Z,{ref:mergedRefs,animate:!1,focusOnMount:!1,anchor:popoverAnchor,__unstableSlotName:__unstablePopoverSlot||null,placement:"top-start",resize:!1,flip:!1,shift:shift,...props,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-block-popover",props.className),variant:"unstyled",children:[__unstableCoverTarget&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:style,children:children}),!__unstableCoverTarget&&children]})}BlockPopover.displayName="BlockPopover",BlockPopover.__docgenInfo={description:"",methods:[],displayName:"BlockPopover",props:{__unstableCoverTarget:{defaultValue:{value:"false",computed:!1},required:!1},shift:{defaultValue:{value:"true",computed:!1},required:!1}}},__webpack_exports__.Z=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.forwardRef)(BlockPopover),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/index.js"]={name:"BlockPopover",docgenInfo:BlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-popover/index.js"})},"./packages/block-editor/src/components/block-popover/use-popover-scroll.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_compose__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js");__webpack_exports__.Z=function usePopoverScroll(scrollableRef){return(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_0__.Z)((node=>{if(!scrollableRef)return;function onWheel(event){const{deltaX:deltaX,deltaY:deltaY}=event;scrollableRef.current.scrollBy(deltaX,deltaY)}const options={passive:!0};return node.addEventListener("wheel",onWheel,options),()=>{node.removeEventListener("wheel",onWheel,options)}}),[scrollableRef])}},"./packages/block-editor/src/components/block-preview/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{ZP:function(){return block_preview}});var node_modules_classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(node_modules_classnames),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),provider=__webpack_require__("./packages/block-editor/src/components/provider/index.js"),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),pure=__webpack_require__("./packages/compose/build-module/higher-order/pure/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),safe_html=__webpack_require__("./packages/dom/build-module/dom/safe-html.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Context=(0,react.createContext)({});function BlockContextProvider(_ref){let{value:value,children:children}=_ref;const context=(0,react.useContext)(Context),nextValue=(0,react.useMemo)((()=>({...context,...value})),[context,value]);return(0,jsx_runtime.jsx)(Context.Provider,{value:nextValue,children:children})}BlockContextProvider.displayName="BlockContextProvider";var block_context=Context;BlockContextProvider.__docgenInfo={description:"Component which merges passed value with current consumed block context.\n\n@see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\n\n@param {BlockContextProviderProps} props",methods:[],displayName:"BlockContextProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-context/index.js"]={name:"BlockContextProvider",docgenInfo:BlockContextProvider.__docgenInfo,path:"packages/block-editor/src/components/block-context/index.js"});const DEFAULT_BLOCK_CONTEXT={},Edit=props=>{const{attributes:attributes={},name:name}=props,blockType=(0,blocks_build_module.ck)(name),blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>blockType&&blockType.usesContext?Object.fromEntries(Object.entries(blockContext).filter((_ref=>{let[key]=_ref;return blockType.usesContext.includes(key)}))):DEFAULT_BLOCK_CONTEXT),[blockType,blockContext]);if(!blockType)return null;const Component=blockType.edit||blockType.save;if(blockType.apiVersion>1)return(0,jsx_runtime.jsx)(Component,{...props,context:context});const generatedClassName=(0,blocks_build_module.zb)(blockType,"className",!0)?(0,blocks_build_module.Vk)(name):null,className=classnames_default()(generatedClassName,attributes.className,props.className);return(0,jsx_runtime.jsx)(Component,{...props,context:context,className:className})};Edit.displayName="Edit",Edit.__docgenInfo={description:"",methods:[],displayName:"Edit"};var edit=(0,with_filters.Z)("editor.BlockEdit")(Edit);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit/edit.js"]={name:"Edit",docgenInfo:Edit.__docgenInfo,path:"packages/block-editor/src/components/block-edit/edit.js"});var block_edit_context=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js");function BlockEdit(props){const{name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames}=props,context={name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames};return(0,jsx_runtime.jsx)(block_edit_context.Q2,{value:(0,react.useMemo)((()=>context),Object.values(context)),children:(0,jsx_runtime.jsx)(edit,{...props})})}BlockEdit.displayName="BlockEdit",BlockEdit.__docgenInfo={description:"",methods:[],displayName:"BlockEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit/index.js"]={name:"BlockEdit",docgenInfo:BlockEdit.__docgenInfo,path:"packages/block-editor/src/components/block-edit/index.js"});var i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),modal=__webpack_require__("./packages/components/build-module/modal/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),more_horizontal=__webpack_require__("./packages/icons/build-module/library/more-horizontal.js");function Warning(_ref){let{className:className,actions:actions,children:children,secondaryActions:secondaryActions}=_ref;return(0,jsx_runtime.jsx)("div",{style:{display:"contents",all:"initial"},children:(0,jsx_runtime.jsx)("div",{className:classnames_default()(className,"block-editor-warning"),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__contents",children:[(0,jsx_runtime.jsx)("p",{className:"block-editor-warning__message",children:children}),(react.Children.count(actions)>0||secondaryActions)&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__actions",children:[react.Children.count(actions)>0&&react.Children.map(actions,((action,i)=>(0,jsx_runtime.jsx)("span",{className:"block-editor-warning__action",children:action},i))),secondaryActions&&(0,jsx_runtime.jsx)(dropdown_menu.Z,{className:"block-editor-warning__secondary",icon:more_horizontal.Z,label:(0,i18n_build_module.__)("More options"),popoverProps:{position:"bottom left",className:"block-editor-warning__dropdown"},noIcons:!0,children:()=>(0,jsx_runtime.jsx)(menu_group.Z,{children:secondaryActions.map(((item,pos)=>(0,jsx_runtime.jsx)(menu_item.Z,{onClick:item.onClick,children:item.title},pos)))})})]})]})})})}Warning.displayName="Warning",Warning.__docgenInfo={description:"",methods:[],displayName:"Warning"};var warning=Warning;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/warning/index.js"]={name:"Warning",docgenInfo:Warning.__docgenInfo,path:"packages/block-editor/src/components/warning/index.js"});var character=__webpack_require__("./node_modules/diff/lib/diff/character.js");function BlockView(_ref){let{title:title,rawContent:rawContent,renderedContent:renderedContent,action:action,actionText:actionText,className:className}=_ref;return(0,jsx_runtime.jsxs)("div",{className:className,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-compare__heading",children:title}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__html",children:rawContent}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__preview edit-post-visual-editor",children:(0,jsx_runtime.jsx)(raw_html.Z,{children:(0,safe_html.Z)(renderedContent)})})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__action",children:(0,jsx_runtime.jsx)(build_module_button.ZP,{variant:"secondary",tabIndex:"0",onClick:action,children:actionText})})]})}function BlockCompare(_ref){let{block:block,onKeep:onKeep,onConvert:onConvert,convertor:convertor,convertButtonText:convertButtonText}=_ref;const converted=function getConvertedContent(convertedBlock){return(Array.isArray(convertedBlock)?convertedBlock:[convertedBlock]).map((item=>(0,blocks_build_module.kD)(item.name,item.attributes,item.innerBlocks))).join("")}(convertor(block)),difference=function getDifference(originalContent,newContent){return(0,character.Kx)(originalContent,newContent).map(((item,pos)=>{const classes=classnames_default()({"block-editor-block-compare__added":item.added,"block-editor-block-compare__removed":item.removed});return(0,jsx_runtime.jsx)("span",{className:classes,children:item.value},pos)}))}(block.originalContent,converted);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__wrapper",children:[(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("Current"),className:"block-editor-block-compare__current",action:onKeep,actionText:(0,i18n_build_module.__)("Convert to HTML"),rawContent:block.originalContent,renderedContent:block.originalContent}),(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("After Conversion"),className:"block-editor-block-compare__converted",action:onConvert,actionText:convertButtonText,rawContent:difference,renderedContent:converted})]})}BlockView.displayName="BlockView",BlockView.__docgenInfo={description:"",methods:[],displayName:"BlockView"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-compare/block-view.js"]={name:"BlockView",docgenInfo:BlockView.__docgenInfo,path:"packages/block-editor/src/components/block-compare/block-view.js"}),BlockCompare.displayName="BlockCompare",BlockCompare.__docgenInfo={description:"",methods:[],displayName:"BlockCompare"};var block_compare=BlockCompare;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-compare/index.js"]={name:"BlockCompare",docgenInfo:BlockCompare.__docgenInfo,path:"packages/block-editor/src/components/block-compare/index.js"});var store=__webpack_require__("./packages/block-editor/src/store/index.js");function BlockInvalidWarning(_ref){let{convertToHTML:convertToHTML,convertToBlocks:convertToBlocks,convertToClassic:convertToClassic,attemptBlockRecovery:attemptBlockRecovery,block:block}=_ref;const hasHTMLBlock=!!(0,blocks_build_module.ck)("core/html"),[compare,setCompare]=(0,react.useState)(!1),onCompare=(0,react.useCallback)((()=>setCompare(!0)),[]),onCompareClose=(0,react.useCallback)((()=>setCompare(!1)),[]),hiddenActions=(0,react.useMemo)((()=>[{title:(0,i18n_build_module._x)("Resolve","imperative verb"),onClick:onCompare},hasHTMLBlock&&{title:(0,i18n_build_module.__)("Convert to HTML"),onClick:convertToHTML},{title:(0,i18n_build_module.__)("Convert to Classic Block"),onClick:convertToClassic}].filter(Boolean)),[onCompare,convertToHTML,convertToClassic]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.ZP,{onClick:attemptBlockRecovery,variant:"primary",children:(0,i18n_build_module.__)("Attempt Block Recovery")},"recover")],secondaryActions:hiddenActions,children:(0,i18n_build_module.__)("This block contains unexpected or invalid content.")}),compare&&(0,jsx_runtime.jsx)(modal.Z,{title:(0,i18n_build_module.__)("Resolve Block"),onRequestClose:onCompareClose,className:"block-editor-block-compare",children:(0,jsx_runtime.jsx)(block_compare,{block:block,onKeep:convertToHTML,onConvert:convertToBlocks,convertor:blockToBlocks,convertButtonText:(0,i18n_build_module.__)("Convert to Blocks")})})]})}const blockToBlocks=block=>(0,blocks_build_module.AF)({HTML:block.originalContent});BlockInvalidWarning.__docgenInfo={description:"",methods:[],displayName:"BlockInvalidWarning"};var block_invalid_warning=(0,compose.Z)([(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId}=_ref3;return{block:select(store.h).getBlock(clientId)}})),(0,with_dispatch.Z)(((dispatch,_ref4)=>{let{block:block}=_ref4;const{replaceBlock:replaceBlock}=dispatch(store.h);return{convertToClassic(){replaceBlock(block.clientId,(block=>(0,blocks_build_module.j4)("core/freeform",{content:block.originalContent}))(block))},convertToHTML(){replaceBlock(block.clientId,(block=>(0,blocks_build_module.j4)("core/html",{content:block.originalContent}))(block))},convertToBlocks(){replaceBlock(block.clientId,blockToBlocks(block))},attemptBlockRecovery(){replaceBlock(block.clientId,(_ref2=>{let{name:name,attributes:attributes,innerBlocks:innerBlocks}=_ref2;return(0,blocks_build_module.j4)(name,attributes,innerBlocks)})(block))}}}))])(BlockInvalidWarning);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-invalid-warning.js"]={name:"BlockInvalidWarning",docgenInfo:BlockInvalidWarning.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-invalid-warning.js"});const block_crash_warning_warning=(0,jsx_runtime.jsx)(warning,{className:"block-editor-block-list__block-crash-warning",children:(0,i18n_build_module.__)("This block has encountered an error and cannot be previewed.")});var block_crash_warning=()=>block_crash_warning_warning;class BlockCrashBoundary extends react.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}BlockCrashBoundary.displayName="BlockCrashBoundary",BlockCrashBoundary.__docgenInfo={description:"",methods:[],displayName:"BlockCrashBoundary"};var block_crash_boundary=BlockCrashBoundary;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-crash-boundary.js"]={name:"BlockCrashBoundary",docgenInfo:BlockCrashBoundary.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-crash-boundary.js"});var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");function BlockHTML(_ref){let{clientId:clientId}=_ref;const[html,setHtml]=(0,react.useState)(""),block=(0,use_select.Z)((select=>select(store.h).getBlock(clientId)),[clientId]),{updateBlock:updateBlock}=(0,use_dispatch.Z)(store.h);return(0,react.useEffect)((()=>{setHtml((0,blocks_build_module.Jo)(block))}),[block]),(0,jsx_runtime.jsx)(lib.Z,{className:"block-editor-block-list__block-html-textarea",value:html,onBlur:()=>{const blockType=(0,blocks_build_module.ck)(block.name);if(!blockType)return;const attributes=(0,blocks_build_module.DJ)(blockType,html,block.attributes),content=html||(0,blocks_build_module.kD)(blockType,attributes),[isValid]=html?(0,blocks_build_module.lM)({...block,attributes:attributes,originalContent:content}):[!0];updateBlock(clientId,{attributes:attributes,originalContent:content,isValid:isValid}),html||setHtml({content:content})},onChange:event=>setHtml(event.target.value)})}BlockHTML.displayName="BlockHTML",BlockHTML.__docgenInfo={description:"",methods:[],displayName:"BlockHTML"};var block_html=BlockHTML;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-html.js"]={name:"BlockHTML",docgenInfo:BlockHTML.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-html.js"});var use_disabled=__webpack_require__("./packages/compose/build-module/hooks/use-disabled/index.js"),use_moving_animation=__webpack_require__("./packages/block-editor/src/components/use-moving-animation/index.js"),dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_form_element=__webpack_require__("./packages/dom/build-module/dom/is-form-element.js"),place_caret_at_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-horizontal-edge.js");const BLOCK_SELECTOR=".block-editor-block-list__block",APPENDER_SELECTOR=".block-list-appender",BLOCK_APPENDER_CLASS=".block-editor-button-block-appender";function isInsideRootBlock(blockElement,element){return element.closest([BLOCK_SELECTOR,APPENDER_SELECTOR,BLOCK_APPENDER_CLASS].join(","))===blockElement}function getBlockClientId(node){for(;node&&node.nodeType!==node.ELEMENT_NODE;)node=node.parentNode;if(!node)return;const blockNode=node.closest(BLOCK_SELECTOR);return blockNode?blockNode.id.slice("block-".length):void 0}function useFocusFirstElement(clientId){const ref=(0,react.useRef)(),initialPosition=function useInitialPosition(clientId){return(0,use_select.Z)((select=>{const{getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableGetEditorMode:__unstableGetEditorMode,isBlockSelected:isBlockSelected}=select(store.h);if(isBlockSelected(clientId)&&"edit"===__unstableGetEditorMode())return getSelectedBlocksInitialCaretPosition()}),[clientId])}(clientId),{isBlockSelected:isBlockSelected,isMultiSelecting:isMultiSelecting}=(0,use_select.Z)(store.h);return(0,react.useEffect)((()=>{if(!isBlockSelected(clientId)||isMultiSelecting())return;if(null==initialPosition)return;if(!ref.current)return;const{ownerDocument:ownerDocument}=ref.current;if(isInsideRootBlock(ref.current,ownerDocument.activeElement))return;const textInputs=dom_build_module.T_.tabbable.find(ref.current).filter((node=>(0,is_text_field.Z)(node))),isReverse=-1===initialPosition,target=textInputs[isReverse?textInputs.length-1:0]||ref.current;if(isInsideRootBlock(ref.current,target)){if(!ref.current.getAttribute("contenteditable")){const focusElement=dom_build_module.T_.tabbable.findNext(ref.current);if(focusElement&&isInsideRootBlock(ref.current,focusElement)&&(0,is_form_element.Z)(focusElement))return void focusElement.focus()}(0,place_caret_at_horizontal_edge.Z)(target,isReverse)}else ref.current.focus()}),[initialPosition,clientId]),ref}function listener(event){if(event.defaultPrevented)return;const action="mouseover"===event.type?"add":"remove";event.preventDefault(),event.currentTarget.classList[action]("is-hovered")}function useIsHovered(){const isEnabled=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return getSettings().outlineMode}),[]);return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mouseout",listener),node.addEventListener("mouseover",listener),()=>{node.removeEventListener("mouseout",listener),node.removeEventListener("mouseover",listener),node.classList.remove("is-hovered")}}),[isEnabled])}function useBlockClassNames(clientId){return(0,use_select.Z)((select=>{const{isBlockBeingDragged:isBlockBeingDragged,isBlockHighlighted:isBlockHighlighted,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,getBlockName:getBlockName,getSettings:getSettings,hasSelectedInnerBlock:hasSelectedInnerBlock,isTyping:isTyping,__unstableIsFullySelected:__unstableIsFullySelected,__unstableSelectionHasUnmergeableBlock:__unstableSelectionHasUnmergeableBlock}=select(store.h),{outlineMode:outlineMode}=getSettings(),isDragging=isBlockBeingDragged(clientId),isSelected=isBlockSelected(clientId),name=getBlockName(clientId),isAncestorOfSelectedBlock=hasSelectedInnerBlock(clientId,!0),isMultiSelected=isBlockMultiSelected(clientId);return classnames_default()({"is-selected":isSelected,"is-highlighted":isBlockHighlighted(clientId),"is-multi-selected":isMultiSelected,"is-partially-selected":isMultiSelected&&!__unstableIsFullySelected()&&!__unstableSelectionHasUnmergeableBlock(),"is-reusable":(0,blocks_build_module.vr)((0,blocks_build_module.ck)(name)),"is-dragging":isDragging,"has-child-selected":isAncestorOfSelectedBlock,"remove-outline":isSelected&&outlineMode&&isTyping()})}),[clientId])}function useBlockDefaultClassName(clientId){return(0,use_select.Z)((select=>{const name=select(store.h).getBlockName(clientId),blockType=(0,blocks_build_module.ck)(name);if((null==blockType?void 0:blockType.apiVersion)>1)return(0,blocks_build_module.Vk)(name)}),[clientId])}function useBlockCustomClassName(clientId){return(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store.h),attributes=getBlockAttributes(clientId);if(null==attributes||!attributes.className)return;const blockType=(0,blocks_build_module.ck)(getBlockName(clientId));return(null==blockType?void 0:blockType.apiVersion)>1?attributes.className:void 0}),[clientId])}function useBlockMovingModeClassNames(clientId){return(0,use_select.Z)((select=>{const{hasBlockMovingClientId:hasBlockMovingClientId,canInsertBlockType:canInsertBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,isBlockSelected:isBlockSelected}=select(store.h);if(!isBlockSelected(clientId))return;const movingClientId=hasBlockMovingClientId();return movingClientId?classnames_default()("is-block-moving-mode",{"can-insert-moving-block":canInsertBlockType(getBlockName(movingClientId),getBlockRootClientId(clientId))}):void 0}),[clientId])}function useFocusHandler(clientId){const{isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onFocus(event){node.parentElement.closest('[contenteditable="true"]')||(isBlockSelected(clientId)?event.target.isContentEditable||selectionChange(clientId):isInsideRootBlock(node,event.target)&&selectBlock(clientId))}return node.addEventListener("focusin",onFocus),()=>{node.removeEventListener("focusin",onFocus)}}),[isBlockSelected,selectBlock])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");function useEventHandlers(clientId){const isSelected=(0,use_select.Z)((select=>select(store.h).isBlockSelected(clientId)),[clientId]),{getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store.h),{insertDefaultBlock:insertDefaultBlock,removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{if(isSelected)return node.addEventListener("keydown",onKeyDown),node.addEventListener("dragstart",onDragStart),()=>{node.removeEventListener("keydown",onKeyDown),node.removeEventListener("dragstart",onDragStart)};function onKeyDown(event){const{keyCode:keyCode,target:target}=event;keyCode!==keycodes_build_module.K5&&keyCode!==keycodes_build_module.ZH&&keyCode!==keycodes_build_module.yY||target!==node||(0,is_text_field.Z)(target)||(event.preventDefault(),keyCode===keycodes_build_module.K5?insertDefaultBlock({},getBlockRootClientId(clientId),getBlockIndex(clientId)+1):removeBlock(clientId))}function onDragStart(event){event.preventDefault()}}),[clientId,isSelected,getBlockRootClientId,getBlockIndex,insertDefaultBlock,removeBlock])}function useNavModeExit(clientId){const{isNavigationMode:isNavigationMode,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){isNavigationMode()&&!event.defaultPrevented&&(event.preventDefault(),isBlockSelected(clientId)?setNavigationMode(!1):selectBlock(clientId))}return node.addEventListener("mousedown",onMouseDown),()=>{node.addEventListener("mousedown",onMouseDown)}}),[clientId,isNavigationMode,isBlockSelected,setNavigationMode])}var use_block_refs=__webpack_require__("./packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js");function useIntersectionObserver(){const observer=(0,react.useContext)(IntersectionObserver);return(0,use_ref_effect.Z)((node=>{if(observer)return observer.observe(node),()=>{observer.unobserve(node)}}),[observer])}function useBlockOverlayActive(clientId){return(0,use_select.Z)((select=>{const{__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store.h);return __unstableHasActiveBlockOverlayActive(clientId)}),[clientId])}var process=__webpack_require__("./node_modules/process/browser.js");function useBlockProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{__unstableIsHtml:__unstableIsHtml}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{clientId:clientId,className:className,wrapperProps:wrapperProps={},isAligned:isAligned}=(0,react.useContext)(BlockListBlockContext),{index:index,mode:mode,name:name,blockApiVersion:blockApiVersion,blockTitle:blockTitle,isPartOfSelection:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation}=(0,use_select.Z)((select=>{const{getBlockAttributes:getBlockAttributes,getBlockIndex:getBlockIndex,getBlockMode:getBlockMode,getBlockName:getBlockName,isTyping:isTyping,getGlobalBlockCount:getGlobalBlockCount,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,isAncestorMultiSelected:isAncestorMultiSelected,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock}=select(store.h),{getActiveBlockVariation:getActiveBlockVariation}=select(blocks_build_module.h),isSelected=isBlockSelected(clientId),isPartOfMultiSelection=isBlockMultiSelected(clientId)||isAncestorMultiSelected(clientId),blockName=getBlockName(clientId),blockType=(0,blocks_build_module.ck)(blockName),match=getActiveBlockVariation(blockName,getBlockAttributes(clientId));return{index:getBlockIndex(clientId),mode:getBlockMode(clientId),name:blockName,blockApiVersion:(null==blockType?void 0:blockType.apiVersion)||1,blockTitle:(null==match?void 0:match.title)||(null==blockType?void 0:blockType.title),isPartOfSelection:isSelected||isPartOfMultiSelection,adjustScrolling:isSelected||isFirstMultiSelectedBlock(clientId),enableAnimation:!isTyping()&&getGlobalBlockCount()<=200}}),[clientId]),hasOverlay=useBlockOverlayActive(clientId),blockLabel=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block: %s"),blockTitle),htmlSuffix="html"!==mode||__unstableIsHtml?"":"-visual",mergedRefs=(0,use_merge_refs.Z)([props.ref,useFocusFirstElement(clientId),(0,use_block_refs.LT)(clientId),useFocusHandler(clientId),useEventHandlers(clientId),useNavModeExit(clientId),useIsHovered(),useIntersectionObserver(),(0,use_moving_animation.Z)({isSelected:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:index}),(0,use_disabled.Z)({isDisabled:!hasOverlay})]),blockEditContext=(0,block_edit_context.Z8)();return blockApiVersion<2&&clientId===blockEditContext.clientId&&void 0!==process&&process.env,{tabIndex:0,...wrapperProps,...props,ref:mergedRefs,id:`block-${clientId}${htmlSuffix}`,role:"document","aria-label":blockLabel,"data-block":clientId,"data-type":name,"data-title":blockTitle,className:classnames_default()(classnames_default()("block-editor-block-list__block",{"wp-block":!isAligned,"has-block-overlay":hasOverlay}),className,props.className,wrapperProps.className,useBlockClassNames(clientId),useBlockDefaultClassName(clientId),useBlockCustomClassName(clientId),useBlockMovingModeClassNames(clientId)),style:{...wrapperProps.style,...props.style}}}useBlockProps.save=blocks_build_module.dF;var justify_left=__webpack_require__("./packages/icons/build-module/library/justify-left.js"),justify_center=__webpack_require__("./packages/icons/build-module/library/justify-center.js"),justify_right=__webpack_require__("./packages/icons/build-module/library/justify-right.js"),justify_space_between=__webpack_require__("./packages/icons/build-module/library/justify-space-between.js"),arrow_right=__webpack_require__("./packages/icons/build-module/library/arrow-right.js"),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_icon_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option-icon/component.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");function appendSelectors(selectors){let append=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return selectors.split(",").map((subselector=>`.editor-styles-wrapper ${subselector}${append?` ${append}`:""}`)).join(",")}function getBlockGapCSS(selector,layoutDefinitions,layoutType,blockGapValue){var _layoutDefinitions$la,_layoutDefinitions$la2;let output="";return null!=layoutDefinitions&&null!==(_layoutDefinitions$la=layoutDefinitions[layoutType])&&void 0!==_layoutDefinitions$la&&null!==(_layoutDefinitions$la2=_layoutDefinitions$la.spacingStyles)&&void 0!==_layoutDefinitions$la2&&_layoutDefinitions$la2.length&&blockGapValue&&layoutDefinitions[layoutType].spacingStyles.forEach((gapStyle=>{output+=`${appendSelectors(selector,gapStyle.selector.trim())} { `,output+=Object.entries(gapStyle.rules).map((_ref=>{let[cssProperty,value]=_ref;return`${cssProperty}: ${value||blockGapValue}`})).join("; "),output+="; }"})),output}function getAlignmentsInfo(layout){const{contentSize:contentSize,wideSize:wideSize}=layout,alignmentInfo={},sizeRegex=/^(?!0)\d+(px|em|rem|vw|vh|%)?$/i;return sizeRegex.test(contentSize)&&(alignmentInfo.none=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Max %s wide"),contentSize)),sizeRegex.test(wideSize)&&(alignmentInfo.wide=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Max %s wide"),wideSize)),alignmentInfo}var gap=__webpack_require__("./packages/block-editor/src/hooks/gap.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),toolbar_context=__webpack_require__("./packages/components/build-module/toolbar/toolbar-context/index.js"),toolbar_group=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");var block_controls_groups={default:(0,slot_fill.up)("BlockControls"),block:(0,slot_fill.up)("BlockControlsBlock"),inline:(0,slot_fill.up)("BlockFormatControls"),other:(0,slot_fill.up)("BlockControlsOther"),parent:(0,slot_fill.up)("BlockControlsParent")},use_display_block_controls=__webpack_require__("./packages/block-editor/src/components/use-display-block-controls/index.js");function BlockControlsFill(_ref){let{group:group="default",controls:controls,children:children,__experimentalShareWithChildBlocks:__experimentalShareWithChildBlocks=!1}=_ref;const Fill=function useBlockControlsFill(group,shareWithChildBlocks){const isDisplayed=(0,use_display_block_controls.Z)(),{clientId:clientId}=(0,block_edit_context.Z8)(),isParentDisplayed=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,hasSelectedInnerBlock:hasSelectedInnerBlock}=select(store.h),{hasBlockSupport:hasBlockSupport}=select(blocks_build_module.h);return shareWithChildBlocks&&hasBlockSupport(getBlockName(clientId),"__experimentalExposeControlsToChildren",!1)&&hasSelectedInnerBlock(clientId)}),[shareWithChildBlocks,clientId]);var _groups$group;return isDisplayed?null===(_groups$group=block_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill:isParentDisplayed?block_controls_groups.parent.Fill:null}(group,__experimentalShareWithChildBlocks);return Fill?(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,jsx_runtime.jsxs)(toolbar_context.Z.Provider,{value:value,children:["default"===group&&(0,jsx_runtime.jsx)(toolbar_group.Z,{controls:controls}),children]})}})}):null}BlockControlsFill.displayName="BlockControlsFill",BlockControlsFill.__docgenInfo={description:"",methods:[],displayName:"BlockControlsFill",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1},__experimentalShareWithChildBlocks:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/fill.js"]={name:"BlockControlsFill",docgenInfo:BlockControlsFill.__docgenInfo,path:"packages/block-editor/src/components/block-controls/fill.js"});var use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js");function BlockControlsSlot(_ref){let{group:group="default",...props}=_ref;const accessibleToolbarState=(0,react.useContext)(toolbar_context.Z),Slot=block_controls_groups[group].Slot,fills=(0,use_slot_fills.Z)(Slot.__unstableName);return Boolean(fills&&fills.length)?"default"===group?(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps:accessibleToolbarState}):(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps:accessibleToolbarState})}):null}BlockControlsSlot.displayName="BlockControlsSlot",BlockControlsSlot.__docgenInfo={description:"",methods:[],displayName:"BlockControlsSlot",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/slot.js"]={name:"BlockControlsSlot",docgenInfo:BlockControlsSlot.__docgenInfo,path:"packages/block-editor/src/components/block-controls/slot.js"});const BlockControls=BlockControlsFill;BlockControls.Slot=BlockControlsSlot;const BlockFormatControls=props=>(0,jsx_runtime.jsx)(BlockControlsFill,{group:"inline",...props});BlockFormatControls.displayName="BlockFormatControls",BlockFormatControls.Slot=props=>(0,jsx_runtime.jsx)(BlockControlsSlot,{group:"inline",...props});var block_controls=BlockControls;BlockFormatControls.__docgenInfo={description:"",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"BlockFormatControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/index.js"]={name:"BlockFormatControls",docgenInfo:BlockFormatControls.__docgenInfo,path:"packages/block-editor/src/components/block-controls/index.js"});var toolbar_dropdown_menu=__webpack_require__("./packages/components/build-module/toolbar/toolbar-dropdown-menu/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignBottom=(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z"})}),alignCenter=(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z"})}),BLOCK_ALIGNMENTS_CONTROLS={top:{icon:(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M9 20h6V9H9v11zM4 4v1.5h16V4H4z"})}),title:(0,i18n_build_module._x)("Align top","Block vertical alignment setting")},center:{icon:alignCenter,title:(0,i18n_build_module._x)("Align middle","Block vertical alignment setting")},bottom:{icon:alignBottom,title:(0,i18n_build_module._x)("Align bottom","Block vertical alignment setting")}},DEFAULT_CONTROLS=["top","center","bottom"],POPOVER_PROPS={variant:"toolbar"};function BlockVerticalAlignmentUI(_ref){let{value:value,onChange:onChange,controls:controls=DEFAULT_CONTROLS,isCollapsed:isCollapsed=!0,isToolbar:isToolbar}=_ref;const activeAlignment=BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=BLOCK_ALIGNMENTS_CONTROLS.top,UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{popoverProps:{POPOVER_PROPS:POPOVER_PROPS}};return(0,jsx_runtime.jsx)(UIComponent,{icon:activeAlignment?activeAlignment.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module._x)("Change vertical alignment","Block vertical alignment setting label"),controls:controls.map((control=>{return{...BLOCK_ALIGNMENTS_CONTROLS[control],isActive:value===control,role:isCollapsed?"menuitemradio":void 0,onClick:(align=control,()=>onChange(value===align?void 0:align))};var align})),...extraProps})}BlockVerticalAlignmentUI.displayName="BlockVerticalAlignmentUI",BlockVerticalAlignmentUI.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentUI",props:{controls:{defaultValue:{value:"[ 'top', 'center', 'bottom' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};var ui=BlockVerticalAlignmentUI;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/ui.js"]={name:"BlockVerticalAlignmentUI",docgenInfo:BlockVerticalAlignmentUI.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/ui.js"});const BlockVerticalAlignmentControl=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!1});BlockVerticalAlignmentControl.displayName="BlockVerticalAlignmentControl";const BlockVerticalAlignmentToolbar=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!0});BlockVerticalAlignmentToolbar.displayName="BlockVerticalAlignmentToolbar",BlockVerticalAlignmentControl.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentControl"},BlockVerticalAlignmentToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/index.js"]={name:"BlockVerticalAlignmentControl",docgenInfo:BlockVerticalAlignmentControl.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/index.js"]={name:"BlockVerticalAlignmentToolbar",docgenInfo:BlockVerticalAlignmentToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/index.js"});const icons={left:justify_left.Z,center:justify_center.Z,right:justify_right.Z,"space-between":justify_space_between.Z};function JustifyContentUI(_ref){let{allowedControls:allowedControls=["left","center","right","space-between"],isCollapsed:isCollapsed=!0,onChange:onChange,value:value,popoverProps:popoverProps,isToolbar:isToolbar}=_ref;const handleClick=next=>{onChange(next===value?void 0:next)},icon=value?icons[value]:icons.left,allControls=[{name:"left",icon:justify_left.Z,title:(0,i18n_build_module.__)("Justify items left"),isActive:"left"===value,onClick:()=>handleClick("left")},{name:"center",icon:justify_center.Z,title:(0,i18n_build_module.__)("Justify items center"),isActive:"center"===value,onClick:()=>handleClick("center")},{name:"right",icon:justify_right.Z,title:(0,i18n_build_module.__)("Justify items right"),isActive:"right"===value,onClick:()=>handleClick("right")},{name:"space-between",icon:justify_space_between.Z,title:(0,i18n_build_module.__)("Space between items"),isActive:"space-between"===value,onClick:()=>handleClick("space-between")}],UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon:icon,popoverProps:popoverProps,label:(0,i18n_build_module.__)("Change items justification"),controls:allControls.filter((elem=>allowedControls.includes(elem.name))),...extraProps})}JustifyContentUI.displayName="JustifyContentUI",JustifyContentUI.__docgenInfo={description:"",methods:[],displayName:"JustifyContentUI",props:{allowedControls:{defaultValue:{value:"[ 'left', 'center', 'right', 'space-between' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};var justify_content_control_ui=JustifyContentUI;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/ui.js"]={name:"JustifyContentUI",docgenInfo:JustifyContentUI.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/ui.js"});const JustifyContentControl=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!1});JustifyContentControl.displayName="JustifyContentControl";const JustifyToolbar=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!0});JustifyToolbar.displayName="JustifyToolbar",JustifyContentControl.__docgenInfo={description:"",methods:[],displayName:"JustifyContentControl"},JustifyToolbar.__docgenInfo={description:"",methods:[],displayName:"JustifyToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/index.js"]={name:"JustifyContentControl",docgenInfo:JustifyContentControl.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/index.js"]={name:"JustifyToolbar",docgenInfo:JustifyToolbar.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/index.js"});var utils=__webpack_require__("./packages/block-editor/src/hooks/utils.js");const justifyContentMap={left:"flex-start",right:"flex-end",center:"center","space-between":"space-between"},alignItemsMap={left:"flex-start",right:"flex-end",center:"center"},verticalAlignmentMap={top:"flex-start",center:"center",bottom:"flex-end"},flexWrapOptions=["wrap","nowrap"];var flex={name:"flex",label:(0,i18n_build_module.__)("Flex"),inspectorControls:function FlexLayoutInspectorControls(_ref){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport={}}=_ref;const{allowOrientation:allowOrientation=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(component.Z,{children:[(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange})}),(0,jsx_runtime.jsx)(flex_item_component.Z,{children:allowOrientation&&(0,jsx_runtime.jsx)(OrientationControl,{layout:layout,onChange:onChange})})]}),(0,jsx_runtime.jsx)(FlexWrapControl,{layout:layout,onChange:onChange})]})},toolBarControls:function FlexLayoutToolbarControls(_ref2){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport}=_ref2;if(null!=layoutBlockSupport&&layoutBlockSupport.allowSwitching)return null;const{allowVerticalAlignment:allowVerticalAlignment=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:[(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange,isToolbar:!0}),allowVerticalAlignment&&"vertical"!==(null==layout?void 0:layout.orientation)&&(0,jsx_runtime.jsx)(FlexLayoutVerticalAlignmentControl,{layout:layout,onChange:onChange,isToolbar:!0})]})},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{orientation:orientation="horizontal"}=layout,blockGapValue=null!=style&&null!==(_style$spacing=style.spacing)&&void 0!==_style$spacing&&_style$spacing.blockGap&&!(0,utils.sF)(blockName,"spacing","blockGap")?(0,gap.U$)(null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.blockGap,"0.5em"):void 0,justifyContent=justifyContentMap[layout.justifyContent],flexWrap=flexWrapOptions.includes(layout.flexWrap)?layout.flexWrap:"wrap",verticalAlignment=verticalAlignmentMap[layout.verticalAlignment],alignItems=alignItemsMap[layout.justifyContent]||alignItemsMap.left;let output="";const rules=[];return flexWrap&&"wrap"!==flexWrap&&rules.push(`flex-wrap: ${flexWrap}`),"horizontal"===orientation?(verticalAlignment&&rules.push(`align-items: ${verticalAlignment}`),justifyContent&&rules.push(`justify-content: ${justifyContent}`)):(rules.push("flex-direction: column"),rules.push(`align-items: ${alignItems}`)),rules.length&&(output=`${appendSelectors(selector)} {\n\t\t\t\t${rules.join("; ")};\n\t\t\t}`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"flex",blockGapValue)),output},getOrientation(layout){const{orientation:orientation="horizontal"}=layout;return orientation},getAlignments:()=>[]};function FlexLayoutVerticalAlignmentControl(_ref4){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref4;const{verticalAlignment:verticalAlignment=verticalAlignmentMap.center}=layout,onVerticalAlignmentChange=value=>{onChange({...layout,verticalAlignment:value})};if(isToolbar)return(0,jsx_runtime.jsx)(BlockVerticalAlignmentControl,{onChange:onVerticalAlignmentChange,value:verticalAlignment});const verticalAlignmentOptions=[{value:"flex-start",label:(0,i18n_build_module.__)("Align items top")},{value:"center",label:(0,i18n_build_module.__)("Align items center")},{value:"flex-end",label:(0,i18n_build_module.__)("Align items bottom")}];return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-hooks__flex-layout-vertical-alignment-control",children:[(0,jsx_runtime.jsx)("legend",{children:(0,i18n_build_module.__)("Vertical alignment")}),(0,jsx_runtime.jsx)("div",{children:verticalAlignmentOptions.map(((value,icon,label)=>(0,jsx_runtime.jsx)(build_module_button.ZP,{label:label,icon:icon,isPressed:verticalAlignment===value,onClick:()=>onVerticalAlignmentChange(value)},value)))})]})}function FlexLayoutJustifyContentControl(_ref5){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref5;const{justifyContent:justifyContent="left",orientation:orientation="horizontal"}=layout,onJustificationChange=value=>{onChange({...layout,justifyContent:value})},allowedControls=["left","center","right"];if("horizontal"===orientation&&allowedControls.push("space-between"),isToolbar)return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls:allowedControls,value:justifyContent,onChange:onJustificationChange,popoverProps:{position:"bottom right",variant:"toolbar"}});const justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,i18n_build_module.__)("Justify items right")}];return"horizontal"===orientation&&justificationOptions.push({value:"space-between",icon:justify_space_between.Z,label:(0,i18n_build_module.__)("Space between items")}),(0,jsx_runtime.jsx)(toggle_group_control_component.Z,{label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:onJustificationChange,className:"block-editor-hooks__flex-layout-justification-controls",children:justificationOptions.map((_ref6=>{let{value:value,icon:icon,label:label}=_ref6;return(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{value:value,icon:icon,label:label},value)}))})}function FlexWrapControl(_ref7){let{layout:layout,onChange:onChange}=_ref7;const{flexWrap:flexWrap="wrap"}=layout;return(0,jsx_runtime.jsx)(toggle_control.Z,{label:(0,i18n_build_module.__)("Allow to wrap to multiple lines"),onChange:value=>{onChange({...layout,flexWrap:value?"wrap":"nowrap"})},checked:"wrap"===flexWrap})}function OrientationControl(_ref8){let{layout:layout,onChange:onChange}=_ref8;const{orientation:orientation="horizontal"}=layout;return(0,jsx_runtime.jsxs)(toggle_group_control_component.Z,{className:"block-editor-hooks__flex-layout-orientation-controls",label:(0,i18n_build_module.__)("Orientation"),value:orientation,onChange:value=>onChange({...layout,orientation:value}),children:[(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{icon:arrow_right.Z,value:"horizontal",label:(0,i18n_build_module.__)("Horizontal")}),(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{icon:arrow_down.Z,value:"vertical",label:(0,i18n_build_module.__)("Vertical")})]})}FlexLayoutVerticalAlignmentControl.displayName="FlexLayoutVerticalAlignmentControl",FlexLayoutJustifyContentControl.displayName="FlexLayoutJustifyContentControl",FlexWrapControl.displayName="FlexWrapControl",OrientationControl.displayName="OrientationControl";var flow={name:"default",label:(0,i18n_build_module.__)("Flow"),inspectorControls:function DefaultLayoutInspectorControls(){return null},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref){var _style$spacing;let{selector:selector,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref;const blockGapStyleValue=(0,gap.U$)(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";(0,utils.sF)(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=(0,gap.U$)(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=(0,gap.U$)(blockGapStyleValue)));let output="";return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"default",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}},unit_control_utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),position_center=__webpack_require__("./packages/icons/build-module/library/position-center.js"),stretch_wide=__webpack_require__("./packages/icons/build-module/library/stretch-wide.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js"),use_setting=__webpack_require__("./packages/block-editor/src/components/use-setting/index.js"),constrained={name:"constrained",label:(0,i18n_build_module.__)("Constrained"),inspectorControls:function DefaultLayoutInspectorControls(_ref){let{layout:layout,onChange:onChange}=_ref;const{wideSize:wideSize,contentSize:contentSize,justifyContent:justifyContent="center"}=layout,justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,i18n_build_module.__)("Justify items right")}],units=(0,unit_control_utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls",children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls-unit",children:[(0,jsx_runtime.jsx)(unit_control.ZP,{className:"block-editor-hooks__layout-controls-unit-input",label:(0,i18n_build_module.__)("Content"),labelPosition:"top",__unstableInputWidth:"80px",value:contentSize||wideSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,contentSize:nextWidth})},units:units}),(0,jsx_runtime.jsx)(icon.Z,{icon:position_center.Z})]}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls-unit",children:[(0,jsx_runtime.jsx)(unit_control.ZP,{className:"block-editor-hooks__layout-controls-unit-input",label:(0,i18n_build_module.__)("Wide"),labelPosition:"top",__unstableInputWidth:"80px",value:wideSize||contentSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,wideSize:nextWidth})},units:units}),(0,jsx_runtime.jsx)(icon.Z,{icon:stretch_wide.Z})]})]}),(0,jsx_runtime.jsx)("p",{className:"block-editor-hooks__layout-controls-helptext",children:(0,i18n_build_module.__)("Customize the width for all elements that are assigned to the center or wide columns.")}),(0,jsx_runtime.jsx)(toggle_group_control_component.Z,{label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},children:justificationOptions.map((_ref2=>{let{value:value,icon:icon,label:label}=_ref2;return(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{value:value,icon:icon,label:label},value)}))})]})},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout={},style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{contentSize:contentSize,wideSize:wideSize,justifyContent:justifyContent}=layout,blockGapStyleValue=(0,gap.U$)(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";(0,utils.sF)(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=(0,gap.U$)(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=(0,gap.U$)(blockGapStyleValue)));const marginLeft="left"===justifyContent?"0 !important":"auto !important",marginRight="right"===justifyContent?"0 !important":"auto !important";let output=contentSize||wideSize?`\n\t\t\t\t\t${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")} {\n\t\t\t\t\t\tmax-width: ${null!=contentSize?contentSize:wideSize};\n\t\t\t\t\t\tmargin-left: ${marginLeft};\n\t\t\t\t\t\tmargin-right: ${marginRight};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignwide")}  {\n\t\t\t\t\t\tmax-width: ${null!=wideSize?wideSize:contentSize};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`:"";if("left"===justifyContent?output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-left: ${marginLeft}; }`:"right"===justifyContent&&(output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-right: ${marginRight}; }`),null!=style&&null!==(_style$spacing2=style.spacing)&&void 0!==_style$spacing2&&_style$spacing2.padding){(0,style_engine_build_module.R)(style).forEach((rule=>{"paddingRight"===rule.key?output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-right: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`:"paddingLeft"===rule.key&&(output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-left: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`)}))}return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"constrained",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}};const layoutTypes=[flow,flex,constrained];function getLayoutType(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return layoutTypes.find((layoutType=>layoutType.name===name))}const defaultLayout={type:"default"},Layout=(0,react.createContext)(defaultLayout),LayoutProvider=Layout.Provider;function LayoutStyle(_ref){let{layout:layout={},css:css,...props}=_ref;const layoutType=getLayoutType(layout.type),hasBlockGapSupport=null!==(0,use_setting.Z)("spacing.blockGap");if(layoutType){var _layoutType$getLayout;if(css)return(0,jsx_runtime.jsx)("style",{children:css});const layoutStyle=null===(_layoutType$getLayout=layoutType.getLayoutStyle)||void 0===_layoutType$getLayout?void 0:_layoutType$getLayout.call(layoutType,{hasBlockGapSupport:hasBlockGapSupport,layout:layout,...props});if(layoutStyle)return(0,jsx_runtime.jsx)("style",{children:layoutStyle})}return null}LayoutStyle.__docgenInfo={description:"",methods:[],displayName:"LayoutStyle",props:{layout:{defaultValue:{value:"{}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/layout.js"]={name:"LayoutStyle",docgenInfo:LayoutStyle.__docgenInfo,path:"packages/block-editor/src/components/block-list/layout.js"});const BlockListBlockContext=(0,react.createContext)();function Block(_ref){let{children:children,isHtml:isHtml,...props}=_ref;return(0,jsx_runtime.jsx)("div",{...useBlockProps(props,{__unstableIsHtml:isHtml}),children:children})}function BlockListBlock(_ref2){var _wrapperProps;let{block:{__unstableBlockSource:__unstableBlockSource},mode:mode,isLocked:isLocked,canRemove:canRemove,clientId:clientId,isSelected:isSelected,isSelectionEnabled:isSelectionEnabled,className:className,__unstableLayoutClassNames:layoutClassNames,name:name,isValid:isValid,attributes:attributes,wrapperProps:wrapperProps,setAttributes:setAttributes,onReplace:onReplace,onInsertBlocksAfter:onInsertBlocksAfter,onMerge:onMerge,toggleSelection:toggleSelection}=_ref2;const{themeSupportsLayout:themeSupportsLayout,hasContentLockedParent:hasContentLockedParent,isContentBlock:isContentBlock,isContentLocking:isContentLocking,isTemporarilyEditingAsBlocks:isTemporarilyEditingAsBlocks}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent,getTemplateLock:getTemplateLock,__unstableGetTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks}=select(store.h),_hasContentLockedParent=!!__unstableGetContentLockingParent(clientId);return{themeSupportsLayout:getSettings().supportsLayout,isContentBlock:select(blocks_build_module.h).__experimentalHasContentRoleAttribute(name),hasContentLockedParent:_hasContentLockedParent,isContentLocking:"contentOnly"===getTemplateLock(clientId)&&!_hasContentLockedParent,isTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks()===clientId}}),[name,clientId]),{removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h),onRemove=(0,react.useCallback)((()=>removeBlock(clientId)),[clientId]),parentLayout=function useLayout(){return(0,react.useContext)(Layout)}()||{};let blockEdit=(0,jsx_runtime.jsx)(BlockEdit,{name:name,isSelected:isSelected,attributes:attributes,setAttributes:setAttributes,insertBlocksAfter:isLocked?void 0:onInsertBlocksAfter,onReplace:canRemove?onReplace:void 0,onRemove:canRemove?onRemove:void 0,mergeBlocks:canRemove?onMerge:void 0,clientId:clientId,isSelectionEnabled:isSelectionEnabled,toggleSelection:toggleSelection,__unstableLayoutClassNames:layoutClassNames,__unstableParentLayout:Object.keys(parentLayout).length?parentLayout:void 0});const blockType=(0,blocks_build_module.ck)(name);hasContentLockedParent&&!isContentBlock&&(wrapperProps={...wrapperProps,tabIndex:-1}),null!=blockType&&blockType.getEditWrapperProps&&(wrapperProps=function mergeWrapperProps(propsA,propsB){const newProps={...propsA,...propsB};return null!=propsA&&propsA.className&&null!=propsB&&propsB.className&&(newProps.className=classnames_default()(propsA.className,propsB.className)),null!=propsA&&propsA.style&&null!=propsB&&propsB.style&&(newProps.style={...propsA.style,...propsB.style}),newProps}(wrapperProps,blockType.getEditWrapperProps(attributes)));const isAligned=wrapperProps&&!!wrapperProps["data-align"]&&!themeSupportsLayout;let block;if(isAligned&&(blockEdit=(0,jsx_runtime.jsx)("div",{className:"wp-block","data-align":wrapperProps["data-align"],children:blockEdit})),isValid)block="html"===mode?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{display:"none"},children:blockEdit}),(0,jsx_runtime.jsx)(Block,{isHtml:!0,children:(0,jsx_runtime.jsx)(block_html,{clientId:clientId})})]}):(null==blockType?void 0:blockType.apiVersion)>1?blockEdit:(0,jsx_runtime.jsx)(Block,{...wrapperProps,children:blockEdit});else{const saveContent=__unstableBlockSource?(0,blocks_build_module.rq)(__unstableBlockSource):(0,blocks_build_module.kD)(blockType,attributes);block=(0,jsx_runtime.jsxs)(Block,{className:"has-warning",children:[(0,jsx_runtime.jsx)(block_invalid_warning,{clientId:clientId}),(0,jsx_runtime.jsx)(raw_html.Z,{children:(0,safe_html.Z)(saveContent)})]})}const{"data-align":dataAlign,...restWrapperProps}=null!==(_wrapperProps=wrapperProps)&&void 0!==_wrapperProps?_wrapperProps:{},value={clientId:clientId,className:classnames_default()({"is-content-locked":isContentLocking,"is-content-locked-temporarily-editing-as-blocks":isTemporarilyEditingAsBlocks,"is-content-block":hasContentLockedParent&&isContentBlock},dataAlign&&themeSupportsLayout&&`align${dataAlign}`,className),wrapperProps:restWrapperProps,isAligned:isAligned},memoizedValue=(0,react.useMemo)((()=>value),Object.values(value));return(0,jsx_runtime.jsx)(BlockListBlockContext.Provider,{value:memoizedValue,children:(0,jsx_runtime.jsx)(block_crash_boundary,{fallback:(0,jsx_runtime.jsx)(Block,{className:"has-warning",children:(0,jsx_runtime.jsx)(block_crash_warning,{})}),children:block})})}Block.displayName="Block",BlockListBlock.displayName="BlockListBlock";const applyWithSelect=(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId,rootClientId:rootClientId}=_ref3;const{isBlockSelected:isBlockSelected,getBlockMode:getBlockMode,isSelectionEnabled:isSelectionEnabled,getTemplateLock:getTemplateLock,__unstableGetBlockWithoutInnerBlocks:__unstableGetBlockWithoutInnerBlocks,canRemoveBlock:canRemoveBlock,canMoveBlock:canMoveBlock}=select(store.h),block=__unstableGetBlockWithoutInnerBlocks(clientId),isSelected=isBlockSelected(clientId),templateLock=getTemplateLock(rootClientId),canRemove=canRemoveBlock(clientId,rootClientId),canMove=canMoveBlock(clientId,rootClientId),{name:name,attributes:attributes,isValid:isValid}=block||{};return{mode:getBlockMode(clientId),isSelectionEnabled:isSelectionEnabled(),isLocked:!!templateLock,canRemove:canRemove,canMove:canMove,block:block,name:name,attributes:attributes,isValid:isValid,isSelected:isSelected}})),applyWithDispatch=(0,with_dispatch.Z)(((dispatch,ownProps,registry)=>{const{updateBlockAttributes:updateBlockAttributes,insertBlocks:insertBlocks,mergeBlocks:mergeBlocks,replaceBlocks:replaceBlocks,toggleSelection:toggleSelection,__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent,moveBlocksToPosition:moveBlocksToPosition,removeBlock:removeBlock}=dispatch(store.h);return{setAttributes(newAttributes){const{getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=registry.select(store.h),multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(),{clientId:clientId}=ownProps,clientIds=multiSelectedBlockClientIds.length?multiSelectedBlockClientIds:[clientId];updateBlockAttributes(clientIds,newAttributes)},onInsertBlocks(blocks,index){const{rootClientId:rootClientId}=ownProps;insertBlocks(blocks,index,rootClientId)},onInsertBlocksAfter(blocks){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getBlockIndex:getBlockIndex}=registry.select(store.h),index=getBlockIndex(clientId);insertBlocks(blocks,index+1,rootClientId)},onMerge(forward){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getBlock:getBlock,getBlockAttributes:getBlockAttributes,getBlockName:getBlockName,getBlockOrder:getBlockOrder,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,canInsertBlockType:canInsertBlockType}=registry.select(store.h);function moveFirstItemUp(_clientId){let changeSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const targetRootClientId=getBlockRootClientId(_clientId),blockOrder=getBlockOrder(_clientId),[firstClientId]=blockOrder;if(1===blockOrder.length&&(0,blocks_build_module.pe)(getBlock(firstClientId)))removeBlock(_clientId);else{if(canInsertBlockType(getBlockName(firstClientId),targetRootClientId))moveBlocksToPosition([firstClientId],_clientId,targetRootClientId,getBlockIndex(_clientId));else{const replacement=(0,blocks_build_module.m4)(getBlock(firstClientId),(0,blocks_build_module.UT)());replacement&&replacement.length&&registry.batch((()=>{insertBlocks(replacement,getBlockIndex(_clientId),targetRootClientId,changeSelection),removeBlock(firstClientId,!1)}))}!getBlockOrder(_clientId).length&&(0,blocks_build_module.pe)(getBlock(_clientId))&&removeBlock(_clientId,!1)}}if(forward){if(rootClientId){const nextRootClientId=getNextBlockClientId(rootClientId);if(nextRootClientId){if(getBlockName(rootClientId)!==getBlockName(nextRootClientId))return void mergeBlocks(rootClientId,nextRootClientId);{const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(nextRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(nextRootClientId),nextRootClientId,rootClientId),removeBlock(nextRootClientId,!1)}))}}}const nextBlockClientId=getNextBlockClientId(clientId);if(!nextBlockClientId)return;getBlockOrder(nextBlockClientId).length?moveFirstItemUp(nextBlockClientId,!1):mergeBlocks(clientId,nextBlockClientId)}else{const previousBlockClientId=getPreviousBlockClientId(clientId);if(previousBlockClientId)mergeBlocks(previousBlockClientId,clientId);else if(rootClientId){const previousRootClientId=getPreviousBlockClientId(rootClientId);if(previousRootClientId&&getBlockName(rootClientId)===getBlockName(previousRootClientId)){const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(previousRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(rootClientId),rootClientId,previousRootClientId),removeBlock(rootClientId,!1)}))}moveFirstItemUp(rootClientId)}}},onReplace(blocks,indexToSelect,initialPosition){blocks.length&&!(0,blocks_build_module.ZP)(blocks[blocks.length-1])&&__unstableMarkLastChangeAsPersistent(),replaceBlocks([ownProps.clientId],blocks,indexToSelect,initialPosition)},toggleSelection(selectionEnabled){toggleSelection(selectionEnabled)}}}));BlockListBlock.__docgenInfo={description:"",methods:[],displayName:"BlockListBlock"};var block=(0,compose.Z)(pure.Z,applyWithSelect,applyWithDispatch,(0,if_condition.Z)((_ref4=>{let{block:block}=_ref4;return!!block})),(0,with_filters.Z)("editor.BlockListBlock"))(BlockListBlock);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block.js"]={name:"BlockListBlock",docgenInfo:BlockListBlock.__docgenInfo,path:"packages/block-editor/src/components/block-list/block.js"});var html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js"),inserter=__webpack_require__("./packages/block-editor/src/components/inserter/index.js");function DefaultBlockAppender(_ref){let{isLocked:isLocked,onAppend:onAppend,showPrompt:showPrompt,placeholder:placeholder,rootClientId:rootClientId}=_ref;if(isLocked)return null;const value=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Type / to choose a block");return(0,jsx_runtime.jsxs)("div",{"data-root-client-id":rootClientId||"",className:classnames_default()("block-editor-default-block-appender",{"has-visible-prompt":showPrompt}),children:[(0,jsx_runtime.jsx)("p",{tabIndex:"0",role:"button","aria-label":(0,i18n_build_module.__)("Add default block"),className:"block-editor-default-block-appender__content",onKeyDown:event=>{keycodes_build_module.K5!==event.keyCode&&keycodes_build_module.L_!==event.keyCode||onAppend()},onClick:()=>onAppend(),onFocus:()=>{showPrompt&&onAppend()},children:showPrompt?value:"\ufeff"}),(0,jsx_runtime.jsx)(inserter.Z,{rootClientId:rootClientId,position:"bottom right",isAppender:!0,__experimentalIsQuick:!0})]})}DefaultBlockAppender.displayName="DefaultBlockAppender",DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var default_block_appender=(0,compose.Z)((0,with_select.Z)(((select,ownProps)=>{const{getBlockCount:getBlockCount,getSettings:getSettings,getTemplateLock:getTemplateLock}=select(store.h),isEmpty=!getBlockCount(ownProps.rootClientId),{bodyPlaceholder:bodyPlaceholder}=getSettings();return{showPrompt:isEmpty,isLocked:!!getTemplateLock(ownProps.rootClientId),placeholder:bodyPlaceholder}})),(0,with_dispatch.Z)(((dispatch,ownProps)=>{const{insertDefaultBlock:insertDefaultBlock,startTyping:startTyping}=dispatch(store.h);return{onAppend(){const{rootClientId:rootClientId}=ownProps;insertDefaultBlock(void 0,rootClientId),startTyping()}}})))(DefaultBlockAppender);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/default-block-appender/index.js"]={name:"DefaultBlockAppender",docgenInfo:DefaultBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/default-block-appender/index.js"});var visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js");function ButtonBlockAppender(_ref,ref){let{rootClientId:rootClientId,className:className,onFocus:onFocus,tabIndex:tabIndex}=_ref;return(0,jsx_runtime.jsx)(inserter.Z,{position:"bottom center",rootClientId:rootClientId,__experimentalIsQuick:!0,renderToggle:_ref2=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType}=_ref2;label=hasSingleBlockType?(0,i18n_build_module.gB)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");const isToggleButton=!hasSingleBlockType;let inserterButton=(0,jsx_runtime.jsxs)(build_module_button.ZP,{ref:ref,onFocus:onFocus,tabIndex:tabIndex,className:classnames_default()(className,"block-editor-button-block-appender"),onClick:onToggle,"aria-haspopup":isToggleButton?"true":void 0,"aria-expanded":isToggleButton?isOpen:void 0,disabled:disabled,label:label,children:[!hasSingleBlockType&&(0,jsx_runtime.jsx)(visually_hidden_component.Z,{as:"span",children:label}),(0,jsx_runtime.jsx)(icon.Z,{icon:plus.Z})]});return(isToggleButton||hasSingleBlockType)&&(inserterButton=(0,jsx_runtime.jsx)(tooltip.Z,{text:label,children:inserterButton})),inserterButton},isAppender:!0})}ButtonBlockAppender.displayName="ButtonBlockAppender";(0,react.forwardRef)(((props,ref)=>((0,build_module.Z)("wp.blockEditor.ButtonBlockerAppender",{alternative:"wp.blockEditor.ButtonBlockAppender",since:"5.9"}),ButtonBlockAppender(props,ref))));ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"};var button_block_appender=(0,react.forwardRef)(ButtonBlockAppender);function DefaultAppender(_ref){let{rootClientId:rootClientId}=_ref;return(0,use_select.Z)((select=>select(store.h).canInsertBlockType((0,blocks_build_module.UT)(),rootClientId)))?(0,jsx_runtime.jsx)(default_block_appender,{rootClientId:rootClientId}):(0,jsx_runtime.jsx)(button_block_appender,{rootClientId:rootClientId,className:"block-list-appender__toggle"})}function useAppender(rootClientId,CustomAppender){const{hideInserter:hideInserter,isParentSelected:isParentSelected}=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,getSelectedBlockClientId:getSelectedBlockClientId,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),selectedBlockClientId=getSelectedBlockClientId();return{hideInserter:!!getTemplateLock(rootClientId)||"zoom-out"===__unstableGetEditorMode(),isParentSelected:rootClientId===selectedBlockClientId||!rootClientId&&!selectedBlockClientId}}),[rootClientId]);return hideInserter||!1===CustomAppender?null:CustomAppender?(0,jsx_runtime.jsx)(CustomAppender,{}):isParentSelected?(0,jsx_runtime.jsx)(DefaultAppender,{rootClientId:rootClientId}):null}function BlockListAppender(_ref2){let{rootClientId:rootClientId,renderAppender:renderAppender,className:className,tagName:TagName="div"}=_ref2;const appender=useAppender(rootClientId,renderAppender);return appender?(0,jsx_runtime.jsx)(TagName,{tabIndex:-1,className:classnames_default()("block-list-appender wp-block",className),contentEditable:!1,"data-block":!0,children:appender}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/button-block-appender/index.js"]={name:"ButtonBlockAppender",docgenInfo:ButtonBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/button-block-appender/index.js"}),DefaultAppender.displayName="DefaultAppender",useAppender.displayName="useAppender",BlockListAppender.displayName="BlockListAppender",BlockListAppender.__docgenInfo={description:"",methods:[],displayName:"BlockListAppender",props:{tagName:{defaultValue:{value:"'div'",computed:!1},required:!1}}};var block_list_appender=BlockListAppender;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list-appender/index.js"]={name:"BlockListAppender",docgenInfo:BlockListAppender.__docgenInfo,path:"packages/block-editor/src/components/block-list-appender/index.js"});var motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js"),use_popover_scroll=__webpack_require__("./packages/block-editor/src/components/block-popover/use-popover-scroll.js");const MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;(0,react.createContext)();function BlockPopoverInbetween(_ref){let{previousClientId:previousClientId,nextClientId:nextClientId,children:children,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,...props}=_ref;const[popoverRecomputeCounter,forcePopoverRecompute]=(0,react.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0),{orientation:orientation,rootClientId:rootClientId,isVisible:isVisible}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,isBlockVisible:isBlockVisible}=select(store.h),_rootClientId=getBlockRootClientId(null!=previousClientId?previousClientId:nextClientId);return{orientation:(null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:_rootClientId,isVisible:isBlockVisible(previousClientId)&&isBlockVisible(nextClientId)}}),[previousClientId,nextClientId]),previousElement=(0,use_block_refs.qT)(previousClientId),nextElement=(0,use_block_refs.qT)(nextClientId),isVertical="vertical"===orientation,style=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return{};const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;if(isVertical)return{width:previousRect?previousRect.width:nextRect.width,height:nextRect&&previousRect?nextRect.top-previousRect.bottom:0};let width=0;return previousRect&&nextRect&&(width=(0,i18n_build_module.dZ)()?previousRect.left-nextRect.right:nextRect.left-previousRect.right),{width:width,height:previousRect?previousRect.height:nextRect.height}}),[previousElement,nextElement,isVertical,popoverRecomputeCounter,isVisible]),popoverAnchor=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return;const{ownerDocument:ownerDocument}=previousElement||nextElement;return{ownerDocument:ownerDocument,getBoundingClientRect(){const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;let left=0,top=0;return isVertical?(top=previousRect?previousRect.bottom:nextRect.top,left=(0,i18n_build_module.dZ)()?previousRect?previousRect.right:nextRect.right:previousRect?previousRect.left:nextRect.left):(top=previousRect?previousRect.top:nextRect.top,left=(0,i18n_build_module.dZ)()?previousRect?previousRect.left:nextRect.right:previousRect?previousRect.right:nextRect.left),new window.DOMRect(left,top,0,0)}}}),[previousElement,nextElement,popoverRecomputeCounter,isVertical,isVisible]),popoverScrollRef=(0,use_popover_scroll.Z)(__unstableContentRef);return(0,react.useLayoutEffect)((()=>{if(!previousElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(previousElement,{attributes:!0}),()=>{observer.disconnect()}}),[previousElement]),(0,react.useLayoutEffect)((()=>{if(!nextElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(nextElement,{attributes:!0}),()=>{observer.disconnect()}}),[nextElement]),(0,react.useLayoutEffect)((()=>{if(previousElement)return previousElement.ownerDocument.defaultView.addEventListener("resize",forcePopoverRecompute),()=>{var _previousElement$owne;null===(_previousElement$owne=previousElement.ownerDocument.defaultView)||void 0===_previousElement$owne||_previousElement$owne.removeEventListener("resize",forcePopoverRecompute)}}),[previousElement]),(previousElement||nextElement)&&isVisible?(0,jsx_runtime.jsx)(popover.Z,{ref:popoverScrollRef,animate:!1,anchor:popoverAnchor,focusOnMount:!1,__unstableSlotName:__unstablePopoverSlot||null,...props,className:classnames_default()("block-editor-block-popover","block-editor-block-popover__inbetween",props.className),resize:!1,flip:!1,placement:"bottom-start",variant:"unstyled",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-popover__inbetween-container",style:style,children:children})},nextClientId+"--"+rootClientId):null}BlockPopoverInbetween.displayName="BlockPopoverInbetween",BlockPopoverInbetween.__docgenInfo={description:"",methods:[],displayName:"BlockPopoverInbetween"};var inbetween=BlockPopoverInbetween;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/inbetween.js"]={name:"BlockPopoverInbetween",docgenInfo:BlockPopoverInbetween.__docgenInfo,path:"packages/block-editor/src/components/block-popover/inbetween.js"});var block_popover=__webpack_require__("./packages/block-editor/src/components/block-popover/index.js");const animateVariants={hide:{opacity:0,scaleY:.75},show:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:.9}};function BlockDropZonePopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{clientId:clientId}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getBlockInsertionPoint:getBlockInsertionPoint}=select(store.h),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);return order.length?{clientId:order[insertionPoint.index]}:{}}),[]),reducedMotion=(0,use_reduced_motion.Z)();return(0,jsx_runtime.jsx)(block_popover.Z,{clientId:clientId,__unstableCoverTarget:!0,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,className:"block-editor-block-popover__drop-zone",children:(0,jsx_runtime.jsx)(motion.E.div,{"data-testid":"block-popover-drop-zone",initial:reducedMotion?animateVariants.show:animateVariants.hide,animate:animateVariants.show,exit:reducedMotion?animateVariants.show:animateVariants.exit,className:"block-editor-block-popover__drop-zone-foreground"})})}BlockDropZonePopover.displayName="BlockDropZonePopover",BlockDropZonePopover.__docgenInfo={description:"",methods:[],displayName:"BlockDropZonePopover"};var drop_zone=BlockDropZonePopover;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/drop-zone.js"]={name:"BlockDropZonePopover",docgenInfo:BlockDropZonePopover.__docgenInfo,path:"packages/block-editor/src/components/block-popover/drop-zone.js"});const insertion_point_InsertionPointOpenRef=(0,react.createContext)();function InbetweenInsertionPointPopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{selectBlock:selectBlock,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h),openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),ref=(0,react.useRef)(),{orientation:orientation,previousClientId:previousClientId,nextClientId:nextClientId,rootClientId:rootClientId,isInserterShown:isInserterShown,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockOrder:getBlockOrder,getBlockListSettings:getBlockListSettings,getBlockInsertionPoint:getBlockInsertionPoint,isBlockBeingDragged:isBlockBeingDragged,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSettings:getSettings,isNavigationMode:_isNavigationMode}=select(store.h),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);if(!order.length)return{};let _previousClientId=order[insertionPoint.index-1],_nextClientId=order[insertionPoint.index];for(;isBlockBeingDragged(_previousClientId);)_previousClientId=getPreviousBlockClientId(_previousClientId);for(;isBlockBeingDragged(_nextClientId);)_nextClientId=getNextBlockClientId(_nextClientId);const settings=getSettings();return{previousClientId:_previousClientId,nextClientId:_nextClientId,orientation:(null===(_getBlockListSettings=getBlockListSettings(insertionPoint.rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:insertionPoint.rootClientId,isNavigationMode:_isNavigationMode(),isDistractionFree:settings.isDistractionFree,isInserterShown:null==insertionPoint?void 0:insertionPoint.__unstableWithInserter}}),[]),disableMotion=(0,use_reduced_motion.Z)();const lineVariants={start:{opacity:0,scale:0},rest:{opacity:1,scale:1,transition:{delay:isInserterShown?.5:0,type:"tween"}},hover:{opacity:1,scale:1,transition:{delay:.5,type:"tween"}}},inserterVariants={start:{scale:disableMotion?1:0},rest:{scale:1,transition:{delay:.4,type:"tween"}}};if(isDistractionFree&&!isNavigationMode)return null;const className=classnames_default()("block-editor-block-list__insertion-point","is-"+orientation);return(0,jsx_runtime.jsx)(inbetween,{previousClientId:previousClientId,nextClientId:nextClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,children:(0,jsx_runtime.jsxs)(motion.E.div,{layout:!disableMotion,initial:disableMotion?"rest":"start",animate:"rest",whileHover:"hover",whileTap:"pressed",exit:"start",ref:ref,tabIndex:-1,onClick:function onClick(event){event.target===ref.current&&nextClientId&&selectBlock(nextClientId,-1)},onFocus:function onFocus(event){event.target!==ref.current&&(openRef.current=!0)},className:classnames_default()(className,{"is-with-inserter":isInserterShown}),onHoverEnd:function maybeHideInserterPoint(event){event.target!==ref.current||openRef.current||hideInsertionPoint()},children:[(0,jsx_runtime.jsx)(motion.E.div,{variants:lineVariants,className:"block-editor-block-list__insertion-point-indicator","data-testid":"block-list-insertion-point-indicator"}),isInserterShown&&(0,jsx_runtime.jsx)(motion.E.div,{variants:inserterVariants,className:classnames_default()("block-editor-block-list__insertion-point-inserter"),children:(0,jsx_runtime.jsx)(inserter.Z,{position:"bottom center",clientId:nextClientId,rootClientId:rootClientId,__experimentalIsQuick:!0,onToggle:isOpen=>{openRef.current=isOpen},onSelectOrClose:()=>{openRef.current=!1}})})]})})}function InsertionPoint(props){const{insertionPoint:insertionPoint,isVisible:isVisible}=(0,use_select.Z)((select=>{const{getBlockInsertionPoint:getBlockInsertionPoint,isBlockInsertionPointVisible:isBlockInsertionPointVisible}=select(store.h);return{insertionPoint:getBlockInsertionPoint(),isVisible:isBlockInsertionPointVisible()}}),[]);return isVisible?"replace"===insertionPoint.operation?(0,jsx_runtime.jsx)(drop_zone,{...props},`${insertionPoint.rootClientId}-${insertionPoint.index}`):(0,jsx_runtime.jsx)(InbetweenInsertionPointPopover,{...props}):null}function useInBetweenInserter(){const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isInBetweenInserterDisabled=(0,use_select.Z)((select=>select(store.h).getSettings().isDistractionFree||"zoom-out"===select(store.h).__unstableGetEditorMode()),[]),{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,isBlockInsertionPointVisible:isBlockInsertionPointVisible,isMultiSelecting:isMultiSelecting,getSelectedBlockClientIds:getSelectedBlockClientIds,getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay}=(0,use_select.Z)(store.h),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{if(!isInBetweenInserterDisabled)return node.addEventListener("mousemove",onMouseMove),()=>{node.removeEventListener("mousemove",onMouseMove)};function onMouseMove(event){var _getBlockListSettings;if(openRef.current)return;if(event.target.nodeType===event.target.TEXT_NODE)return;if(isMultiSelecting())return;if(!event.target.classList.contains("block-editor-block-list__layout"))return void hideInsertionPoint();let rootClientId;if(!event.target.classList.contains("is-root-container")){rootClientId=(event.target.getAttribute("data-block")?event.target:event.target.closest("[data-block]")).getAttribute("data-block")}if(getTemplateLock(rootClientId))return;const orientation=(null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",offsetTop=event.clientY,offsetLeft=event.clientX;let element=Array.from(event.target.children).find((blockEl=>{const blockElRect=blockEl.getBoundingClientRect();return blockEl.classList.contains("wp-block")&&"vertical"===orientation&&blockElRect.top>offsetTop||blockEl.classList.contains("wp-block")&&"horizontal"===orientation&&blockElRect.left>offsetLeft}));if(!element)return void hideInsertionPoint();if(!element.id&&(element=element.firstElementChild,!element))return void hideInsertionPoint();const clientId=element.id.slice("block-".length);if(!clientId||__unstableIsWithinBlockOverlay(clientId))return;if(getSelectedBlockClientIds().includes(clientId))return;const elementRect=element.getBoundingClientRect();if("horizontal"===orientation&&(event.clientY>elementRect.bottom||event.clientY<elementRect.top)||"vertical"===orientation&&(event.clientX>elementRect.right||event.clientX<elementRect.left))return void hideInsertionPoint();const index=getBlockIndex(clientId);0!==index?showInsertionPoint(rootClientId,index,{__unstableWithInserter:!0}):hideInsertionPoint()}}),[openRef,getBlockListSettings,getBlockRootClientId,getBlockIndex,isBlockInsertionPointVisible,isMultiSelecting,showInsertionPoint,hideInsertionPoint,getSelectedBlockClientIds,isInBetweenInserterDisabled])}InbetweenInsertionPointPopover.displayName="InbetweenInsertionPointPopover",InsertionPoint.__docgenInfo={description:"",methods:[],displayName:"InsertionPoint"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/insertion-point.js"]={name:"InsertionPoint",docgenInfo:InsertionPoint.__docgenInfo,path:"packages/block-editor/src/components/block-tools/insertion-point.js"});var data_build_module=__webpack_require__("./packages/data/build-module/index.js");const requestIdleCallback="undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback||window.requestAnimationFrame,cancelIdleCallback="undefined"==typeof window?clearTimeout:window.cancelIdleCallback||window.cancelAnimationFrame;var keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js"),drag_handle=__webpack_require__("./packages/icons/build-module/library/drag-handle.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),use_block_display_title=__webpack_require__("./packages/block-editor/src/components/block-title/use-block-display-title.js");function BlockTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;return(0,use_block_display_title.Z)({clientId:clientId,maximumLength:maximumLength,context:context})}var block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),block_draggable=__webpack_require__("./packages/block-editor/src/components/block-draggable/index.js"),use_block_display_information=__webpack_require__("./packages/block-editor/src/components/use-block-display-information/index.js"),block_mover=__webpack_require__("./packages/block-editor/src/components/block-mover/index.js");function BlockSelectionButton(_ref){let{clientId:clientId,rootClientId:rootClientId}=_ref;const blockInformation=(0,use_block_display_information.Z)(clientId),selected=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlock:getBlock,getBlockIndex:getBlockIndex,hasBlockMovingClientId:hasBlockMovingClientId,getBlockListSettings:getBlockListSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),index=getBlockIndex(clientId),{name:name,attributes:attributes}=getBlock(clientId);return{index:index,name:name,attributes:attributes,blockMovingMode:hasBlockMovingClientId(),orientation:null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation,editorMode:__unstableGetEditorMode()}}),[clientId,rootClientId]),{index:index,name:name,attributes:attributes,blockMovingMode:blockMovingMode,orientation:orientation,editorMode:editorMode}=selected,{setNavigationMode:setNavigationMode,removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h),ref=(0,react.useRef)(),blockType=(0,blocks_build_module.ck)(name),label=(0,blocks_build_module.DK)(blockType,attributes,index+1,orientation);(0,react.useEffect)((()=>{ref.current.focus(),(0,a11y_build_module.D)(label)}),[label]);const blockElement=(0,use_block_refs.qT)(clientId),{hasBlockMovingClientId:hasBlockMovingClientId,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getClientIdsOfDescendants:getClientIdsOfDescendants,getSelectedBlockClientId:getSelectedBlockClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId}=(0,use_select.Z)(store.h),{selectBlock:selectBlock,clearSelectedBlock:clearSelectedBlock,setBlockMovingClientId:setBlockMovingClientId,moveBlockToPosition:moveBlockToPosition}=(0,use_dispatch.Z)(store.h);const classNames=classnames_default()("block-editor-block-list__block-selection-button",{"is-block-moving-mode":!!blockMovingMode}),dragHandleLabel=(0,i18n_build_module.__)("Drag");return(0,jsx_runtime.jsx)("div",{className:classNames,children:(0,jsx_runtime.jsxs)(component.Z,{justify:"center",className:"block-editor-block-list__block-selection-button__content",children:[(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(block_icon.Z,{icon:null==blockInformation?void 0:blockInformation.icon,showColors:!0})}),(0,jsx_runtime.jsxs)(flex_item_component.Z,{children:["zoom-out"===editorMode&&(0,jsx_runtime.jsx)(block_mover.Z,{clientIds:[clientId],hideDragHandle:!0}),"navigation"===editorMode&&(0,jsx_runtime.jsx)(block_draggable.Z,{clientIds:[clientId],children:draggableProps=>(0,jsx_runtime.jsx)(build_module_button.ZP,{icon:drag_handle.Z,className:"block-selection-button_drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1",...draggableProps})})]}),(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(build_module_button.ZP,{ref:ref,onClick:"navigation"===editorMode?()=>setNavigationMode(!1):void 0,onKeyDown:function onKeyDown(event){const{keyCode:keyCode}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isTab=keyCode===keycodes_build_module.Mf,isEscape=keyCode===keycodes_build_module.hY,isEnter=keyCode===keycodes_build_module.K5,isSpace=keyCode===keycodes_build_module.L_,isShift=event.shiftKey;if(keyCode===keycodes_build_module.ZH||keyCode===keycodes_build_module.yY)return removeBlock(clientId),void event.preventDefault();const selectedBlockClientId=getSelectedBlockClientId(),selectionEndClientId=getMultiSelectedBlocksEndClientId(),selectionBeforeEndClientId=getPreviousBlockClientId(selectionEndClientId||selectedBlockClientId),selectionAfterEndClientId=getNextBlockClientId(selectionEndClientId||selectedBlockClientId),navigateUp=isTab&&isShift||isUp,navigateDown=isTab&&!isShift||isDown,navigateOut=isLeft,navigateIn=isRight;let focusedBlockUid;if(navigateUp)focusedBlockUid=selectionBeforeEndClientId;else if(navigateDown)focusedBlockUid=selectionAfterEndClientId;else if(navigateOut){var _getBlockRootClientId;focusedBlockUid=null!==(_getBlockRootClientId=getBlockRootClientId(selectedBlockClientId))&&void 0!==_getBlockRootClientId?_getBlockRootClientId:selectedBlockClientId}else if(navigateIn){var _getClientIdsOfDescen;focusedBlockUid=null!==(_getClientIdsOfDescen=getClientIdsOfDescendants([selectedBlockClientId])[0])&&void 0!==_getClientIdsOfDescen?_getClientIdsOfDescen:selectedBlockClientId}const startingBlockClientId=hasBlockMovingClientId();if(isEscape&&startingBlockClientId&&!event.defaultPrevented&&(setBlockMovingClientId(null),event.preventDefault()),(isEnter||isSpace)&&startingBlockClientId){const sourceRoot=getBlockRootClientId(startingBlockClientId),destRoot=getBlockRootClientId(selectedBlockClientId),sourceBlockIndex=getBlockIndex(startingBlockClientId);let destinationBlockIndex=getBlockIndex(selectedBlockClientId);sourceBlockIndex<destinationBlockIndex&&sourceRoot===destRoot&&(destinationBlockIndex-=1),moveBlockToPosition(startingBlockClientId,sourceRoot,destRoot,destinationBlockIndex),selectBlock(startingBlockClientId),setBlockMovingClientId(null)}if(navigateDown||navigateUp||navigateOut||navigateIn)if(focusedBlockUid)event.preventDefault(),selectBlock(focusedBlockUid);else if(isTab&&selectedBlockClientId){let nextTabbable;if(navigateDown){nextTabbable=blockElement;do{nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable)}while(nextTabbable&&blockElement.contains(nextTabbable));nextTabbable||(nextTabbable=blockElement.ownerDocument.defaultView.frameElement,nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable))}else nextTabbable=dom_build_module.T_.tabbable.findPrevious(blockElement);nextTabbable&&(event.preventDefault(),nextTabbable.focus(),clearSelectedBlock())}},label:label,showTooltip:!1,className:"block-selection-button_select-button",children:(0,jsx_runtime.jsx)(BlockTitle,{clientId:clientId,maximumLength:35})})})]})})}BlockSelectionButton.displayName="BlockSelectionButton",BlockSelectionButton.__docgenInfo={description:"Block selection button component, displaying the label of the block. If the block\ndescends from a root block, a button is displayed enabling the user to select\nthe root block.\n\n@param {string} props          Component props.\n@param {string} props.clientId Client ID of block.\n\n@return {WPComponent} The component to be rendered.",methods:[],displayName:"BlockSelectionButton"};var block_selection_button=BlockSelectionButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/block-selection-button.js"]={name:"BlockSelectionButton",docgenInfo:BlockSelectionButton.__docgenInfo,path:"packages/block-editor/src/components/block-tools/block-selection-button.js"});var toolbar=__webpack_require__("./packages/components/build-module/toolbar/toolbar/index.js"),menu=__webpack_require__("./packages/components/build-module/navigable-container/menu.js");function getAllToolbarItemsIn(container){return Array.from(container.querySelectorAll("[data-toolbar-item]"))}function useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,defaultIndex,onIndexChange){const[initialFocusOnMount]=(0,react.useState)(focusOnMount),[initialIndex]=(0,react.useState)(defaultIndex),focusToolbar=(0,react.useCallback)((()=>{!function focusFirstTabbableIn(container){const[firstTabbable]=dom_build_module.T_.tabbable.find(container);firstTabbable&&firstTabbable.focus({preventScroll:!0})}(ref.current)}),[]);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",focusToolbar),(0,react.useEffect)((()=>{initialFocusOnMount&&focusToolbar()}),[isAccessibleToolbar,initialFocusOnMount,focusToolbar]),(0,react.useEffect)((()=>{let raf=0;return initialIndex&&!initialFocusOnMount&&(raf=window.requestAnimationFrame((()=>{const items=getAllToolbarItemsIn(ref.current),index=initialIndex||0;items[index]&&function hasFocusWithin(container){return container.contains(container.ownerDocument.activeElement)}(ref.current)&&items[index].focus({preventScroll:!0})}))),()=>{if(window.cancelAnimationFrame(raf),!onIndexChange||!ref.current)return;const index=getAllToolbarItemsIn(ref.current).findIndex((item=>0===item.tabIndex));onIndexChange(index)}}),[initialIndex,initialFocusOnMount])}function NavigableToolbar(_ref){let{children:children,focusOnMount:focusOnMount,__experimentalInitialIndex:initialIndex,__experimentalOnIndexChange:onIndexChange,...props}=_ref;const ref=(0,react.useRef)(),isAccessibleToolbar=function useIsAccessibleToolbar(ref){const[isAccessibleToolbar,setIsAccessibleToolbar]=(0,react.useState)(!0),determineIsAccessibleToolbar=(0,react.useCallback)((()=>{const onlyToolbarItem=function hasOnlyToolbarItem(elements){return!elements.some((element=>!("toolbarItem"in element.dataset)))}(dom_build_module.T_.tabbable.find(ref.current));onlyToolbarItem||(0,build_module.Z)("Using custom components as toolbar controls",{since:"5.6",alternative:"ToolbarItem, ToolbarButton or ToolbarDropdownMenu components",link:"https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols"}),setIsAccessibleToolbar(onlyToolbarItem)}),[]);return(0,react.useLayoutEffect)((()=>{const observer=new window.MutationObserver(determineIsAccessibleToolbar);return observer.observe(ref.current,{childList:!0,subtree:!0}),()=>observer.disconnect()}),[isAccessibleToolbar]),isAccessibleToolbar}(ref);return useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,initialIndex,onIndexChange),isAccessibleToolbar?(0,jsx_runtime.jsx)(toolbar.Z,{label:props["aria-label"],ref:ref,...props,children:children}):(0,jsx_runtime.jsx)(menu.Z,{orientation:"horizontal",role:"toolbar",ref:ref,...props,children:children})}NavigableToolbar.displayName="NavigableToolbar",NavigableToolbar.__docgenInfo={description:"",methods:[],displayName:"NavigableToolbar"};var navigable_toolbar=NavigableToolbar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/navigable-toolbar/index.js"]={name:"NavigableToolbar",docgenInfo:NavigableToolbar.__docgenInfo,path:"packages/block-editor/src/components/navigable-toolbar/index.js"});var toolbar_button=__webpack_require__("./packages/components/build-module/toolbar/toolbar-button/index.js"),block_toolbar_utils=__webpack_require__("./packages/block-editor/src/components/block-toolbar/utils.js");function BlockParentSelector(){const{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),{firstParentClientId:firstParentClientId,shouldHide:shouldHide,isDistractionFree:isDistractionFree}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientId:getSelectedBlockClientId,getSettings:getSettings}=select(store.h),{hasBlockSupport:hasBlockSupport}=select(blocks_build_module.h),parents=getBlockParents(getSelectedBlockClientId()),_firstParentClientId=parents[parents.length-1],parentBlockName=getBlockName(_firstParentClientId),_parentBlockType=(0,blocks_build_module.ck)(parentBlockName),settings=getSettings();return{firstParentClientId:_firstParentClientId,shouldHide:!hasBlockSupport(_parentBlockType,"__experimentalParentSelector",!0),isDistractionFree:settings.isDistractionFree}}),[]),blockInformation=(0,use_block_display_information.Z)(firstParentClientId),nodeRef=(0,react.useRef)(),{gestures:showMoversGestures}=(0,block_toolbar_utils.o)({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}});return shouldHide||void 0===firstParentClientId?null:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-parent-selector",ref:nodeRef,...showMoversGestures,children:(0,jsx_runtime.jsx)(toolbar_button.Z,{className:"block-editor-block-parent-selector__button",onClick:()=>selectBlock(firstParentClientId),label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Select %s"),null==blockInformation?void 0:blockInformation.title),showTooltip:!0,icon:(0,jsx_runtime.jsx)(block_icon.Z,{icon:null==blockInformation?void 0:blockInformation.icon})})},firstParentClientId)}BlockParentSelector.displayName="BlockParentSelector",BlockParentSelector.__docgenInfo={description:'Block parent selector component, displaying the hierarchy of the\ncurrent block selection as a single icon to "go up" a level.\n\n@return {WPComponent} Parent block selector.',methods:[],displayName:"BlockParentSelector"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-parent-selector/index.js"]={name:"BlockParentSelector",docgenInfo:BlockParentSelector.__docgenInfo,path:"packages/block-editor/src/components/block-parent-selector/index.js"});var toolbar_item=__webpack_require__("./packages/components/build-module/toolbar/toolbar-item/index.js"),copy=__webpack_require__("./packages/icons/build-module/library/copy.js");function PreviewBlockPopover(_ref){let{blocks:blocks}=_ref;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__parent",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__container",children:(0,jsx_runtime.jsx)(popover.Z,{className:"block-editor-block-switcher__preview__popover",placement:"bottom-start",focusOnMount:!1,children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__preview",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview-title",children:(0,i18n_build_module.__)("Preview")}),(0,jsx_runtime.jsx)(block_preview,{viewportWidth:500,blocks:blocks})]})})})})}PreviewBlockPopover.displayName="PreviewBlockPopover",PreviewBlockPopover.__docgenInfo={description:"",methods:[],displayName:"PreviewBlockPopover"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/preview-block-popover.js"]={name:"PreviewBlockPopover",docgenInfo:PreviewBlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/preview-block-popover.js"});const BlockTransformationsMenu=_ref3=>{let{className:className,possibleBlockTransformations:possibleBlockTransformations,onSelect:onSelect,blocks:blocks}=_ref3;const[hoveredTransformItemName,setHoveredTransformItemName]=(0,react.useState)(),{priorityTextTransformations:priorityTextTransformations,restTransformations:restTransformations}=function useGroupedTransforms(possibleBlockTransformations){const priorityContentTranformationBlocks={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},transformations=(0,react.useMemo)((()=>{const priorityTextTranformsNames=Object.keys(priorityContentTranformationBlocks);return possibleBlockTransformations.reduce(((accumulator,item)=>{const{name:name}=item;return priorityTextTranformsNames.includes(name)?accumulator.priorityTextTransformations.push(item):accumulator.restTransformations.push(item),accumulator}),{priorityTextTransformations:[],restTransformations:[]})}),[possibleBlockTransformations]);return transformations.priorityTextTransformations.sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return priorityContentTranformationBlocks[currentName]<priorityContentTranformationBlocks[nextName]?-1:1})),transformations}(possibleBlockTransformations),hasBothContentTransformations=priorityTextTransformations.length&&restTransformations.length,restTransformItems=!!restTransformations.length&&(0,jsx_runtime.jsx)(RestTransformationItems,{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.Z,{label:(0,i18n_build_module.__)("Transform to"),className:className,children:[hoveredTransformItemName&&(0,jsx_runtime.jsx)(PreviewBlockPopover,{blocks:(0,blocks_build_module.m4)(blocks,hoveredTransformItemName)}),priorityTextTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName},item.name))),!hasBothContentTransformations&&restTransformItems]}),!!hasBothContentTransformations&&(0,jsx_runtime.jsx)(menu_group.Z,{className:className,children:restTransformItems})]})};function RestTransformationItems(_ref4){let{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref4;return restTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName},item.name)))}function BlockTranformationItem(_ref5){let{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref5;const{name:name,icon:icon,title:title,isDisabled:isDisabled}=item;return(0,jsx_runtime.jsxs)(menu_item.Z,{className:(0,blocks_build_module.hq)(name),onClick:event=>{event.preventDefault(),onSelect(name)},disabled:isDisabled,onMouseLeave:()=>setHoveredTransformItemName(null),onMouseEnter:()=>setHoveredTransformItemName(name),children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),title]})}BlockTranformationItem.displayName="BlockTranformationItem",BlockTransformationsMenu.__docgenInfo={description:"",methods:[],displayName:"BlockTransformationsMenu"};var block_transformations_menu=BlockTransformationsMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/block-transformations-menu.js"]={name:"BlockTransformationsMenu",docgenInfo:BlockTransformationsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/block-transformations-menu.js"});var text_component=__webpack_require__("./packages/components/build-module/text/component.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js"),token_list_build_module=__webpack_require__("./packages/token-list/build-module/index.js");function getDefaultStyle(styles){return null==styles?void 0:styles.find((style=>style.isDefault))}function useStylesForBlocks(_ref){let{clientId:clientId,onSwitch:onSwitch}=_ref;const{styles:styles,block:block,blockType:blockType,className:className}=(0,use_select.Z)((select=>{const{getBlock:getBlock}=select(store.h),block=getBlock(clientId);if(!block)return{};const blockType=(0,blocks_build_module.ck)(block.name),{getBlockStyles:getBlockStyles}=select(blocks_build_module.h);return{block:block,blockType:blockType,styles:getBlockStyles(block.name),className:block.attributes.className||""}}),[clientId]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),stylesToRender=function getRenderedStyles(styles){return styles&&0!==styles.length?getDefaultStyle(styles)?styles:[{name:"default",label:(0,i18n_build_module._x)("Default","block style"),isDefault:!0},...styles]:[]}(styles),activeStyle=function getActiveStyle(styles,className){for(const style of new token_list_build_module.Z(className).values()){if(-1===style.indexOf("is-style-"))continue;const potentialStyleName=style.substring(9),activeStyle=null==styles?void 0:styles.find((_ref=>{let{name:name}=_ref;return name===potentialStyleName}));if(activeStyle)return activeStyle}return getDefaultStyle(styles)}(stylesToRender,className),genericPreviewBlock=function useGenericPreviewBlock(block,type){return(0,react.useMemo)((()=>{const example=null==type?void 0:type.example,blockName=null==type?void 0:type.name;return example&&blockName?(0,blocks_build_module.Wf)(blockName,{attributes:example.attributes,innerBlocks:example.innerBlocks}):block?(0,blocks_build_module.Wm)(block):void 0}),[null!=type&&type.example?null==block?void 0:block.name:block,type])}(block,blockType);return{onSelect:style=>{const styleClassName=function replaceActiveStyle(className,activeStyle,newStyle){const list=new token_list_build_module.Z(className);return activeStyle&&list.remove("is-style-"+activeStyle.name),list.add("is-style-"+newStyle.name),list.value}(className,activeStyle,style);updateBlockAttributes(clientId,{className:styleClassName}),onSwitch()},stylesToRender:stylesToRender,activeStyle:activeStyle,genericPreviewBlock:genericPreviewBlock,className:className}}const noop=()=>{};function BlockStylesMenuItems(_ref){let{clientId:clientId,onSwitch:onSwitch=noop}=_ref;const{onSelect:onSelect,stylesToRender:stylesToRender,activeStyle:activeStyle}=useStylesForBlocks({clientId:clientId,onSwitch:onSwitch});return stylesToRender&&0!==stylesToRender.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:stylesToRender.map((style=>{const menuItemText=style.label||style.name;return(0,jsx_runtime.jsx)(menu_item.Z,{icon:activeStyle.name===style.name?check.Z:null,onClick:()=>onSelect(style),children:(0,jsx_runtime.jsx)(text_component.Z,{as:"span",limit:18,ellipsizeMode:"tail",truncate:!0,children:menuItemText})},style.name)}))}):null}function BlockStylesMenu(_ref){let{hoveredBlock:hoveredBlock,onSwitch:onSwitch}=_ref;const{clientId:clientId}=hoveredBlock;return(0,jsx_runtime.jsx)(menu_group.Z,{label:(0,i18n_build_module.__)("Styles"),className:"block-editor-block-switcher__styles__menugroup",children:(0,jsx_runtime.jsx)(BlockStylesMenuItems,{clientId:clientId,onSwitch:onSwitch})})}BlockStylesMenuItems.__docgenInfo={description:"",methods:[],displayName:"BlockStylesMenuItems",props:{onSwitch:{defaultValue:{value:"() => {}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-styles/menu-items.js"]={name:"BlockStylesMenuItems",docgenInfo:BlockStylesMenuItems.__docgenInfo,path:"packages/block-editor/src/components/block-styles/menu-items.js"}),BlockStylesMenu.displayName="BlockStylesMenu",BlockStylesMenu.__docgenInfo={description:"",methods:[],displayName:"BlockStylesMenu"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/block-styles-menu.js"]={name:"BlockStylesMenu",docgenInfo:BlockStylesMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/block-styles-menu.js"});var use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),CompositeState=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js"),Composite=__webpack_require__("./node_modules/reakit/es/Composite/Composite.js"),CompositeItem=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js");const getMatchingBlockByName=function(block,selectedBlockName){let consumedBlocks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const{clientId:clientId,name:name,innerBlocks:innerBlocks=[]}=block;if(!consumedBlocks.has(clientId)){if(name===selectedBlockName)return block;for(const innerBlock of innerBlocks){const match=getMatchingBlockByName(innerBlock,selectedBlockName,consumedBlocks);if(match)return match}}},transformMatchingBlock=(match,selectedBlock)=>{const retainedBlockAttributes=((name,attributes)=>{const contentAttributes=(0,blocks_build_module.A$)(name,"content");return null!=contentAttributes&&contentAttributes.length?contentAttributes.reduce(((_accumulator,attribute)=>(attributes[attribute]&&(_accumulator[attribute]=attributes[attribute]),_accumulator)),{}):attributes})(selectedBlock.name,selectedBlock.attributes);match.attributes={...match.attributes,...retainedBlockAttributes}};var use_transformed_patterns=(patterns,selectedBlocks)=>(0,react.useMemo)((()=>patterns.reduce(((accumulator,_pattern)=>{const transformedBlocks=((selectedBlocks,patternBlocks)=>{const _patternBlocks=patternBlocks.map((block=>(0,blocks_build_module.Wm)(block))),consumedBlocks=new Set;for(const selectedBlock of selectedBlocks){let isMatch=!1;for(const patternBlock of _patternBlocks){const match=getMatchingBlockByName(patternBlock,selectedBlock.name,consumedBlocks);if(match){isMatch=!0,consumedBlocks.add(match.clientId),transformMatchingBlock(match,selectedBlock);break}}if(!isMatch)return}return _patternBlocks})(selectedBlocks,_pattern.blocks);return transformedBlocks&&accumulator.push({..._pattern,transformedBlocks:transformedBlocks}),accumulator}),[])),[patterns,selectedBlocks]);function PatternTransformationsMenu(_ref){let{blocks:blocks,patterns:statePatterns,onSelect:onSelect}=_ref;const[showTransforms,setShowTransforms]=(0,react.useState)(!1),patterns=use_transformed_patterns(statePatterns,blocks);return patterns.length?(0,jsx_runtime.jsxs)(menu_group.Z,{className:"block-editor-block-switcher__pattern__transforms__menugroup",children:[showTransforms&&(0,jsx_runtime.jsx)(PreviewPatternsPopover,{patterns:patterns,onSelect:onSelect}),(0,jsx_runtime.jsx)(menu_item.Z,{onClick:event=>{event.preventDefault(),setShowTransforms(!showTransforms)},icon:chevron_right.Z,children:(0,i18n_build_module.__)("Patterns")})]}):null}function PreviewPatternsPopover(_ref2){let{patterns:patterns,onSelect:onSelect}=_ref2;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__parent",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__container",children:(0,jsx_runtime.jsx)(popover.Z,{className:"block-editor-block-switcher__preview__popover",position:"bottom right",children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__preview",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview-title",children:(0,i18n_build_module.__)("Preview")}),(0,jsx_runtime.jsx)(BlockPatternsList,{patterns:patterns,onSelect:onSelect})]})})})})}function BlockPatternsList(_ref3){let{patterns:patterns,onSelect:onSelect}=_ref3;const composite=(0,CompositeState.u)();return(0,jsx_runtime.jsx)(Composite.b,{...composite,role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":(0,i18n_build_module.__)("Patterns list"),children:patterns.map((pattern=>(0,jsx_runtime.jsx)(BlockPattern,{pattern:pattern,onSelect:onSelect,composite:composite},pattern.name)))})}function BlockPattern(_ref4){let{pattern:pattern,onSelect:onSelect,composite:composite}=_ref4;const baseClassName="block-editor-block-switcher__preview-patterns-container",descriptionId=(0,use_instance_id.Z)(BlockPattern,`${baseClassName}-list__item-description`);return(0,jsx_runtime.jsxs)("div",{className:`${baseClassName}-list__list-item`,"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,children:[(0,jsx_runtime.jsxs)(CompositeItem.A,{role:"option",as:"div",...composite,className:`${baseClassName}-list__item`,onClick:()=>onSelect(pattern.transformedBlocks),children:[(0,jsx_runtime.jsx)(block_preview,{blocks:pattern.transformedBlocks,viewportWidth:pattern.viewportWidth||500}),(0,jsx_runtime.jsx)("div",{className:`${baseClassName}-list__item-title`,children:pattern.title})]}),!!pattern.description&&(0,jsx_runtime.jsx)(visually_hidden_component.Z,{id:descriptionId,children:pattern.description})]})}PatternTransformationsMenu.displayName="PatternTransformationsMenu",PreviewPatternsPopover.displayName="PreviewPatternsPopover",BlockPatternsList.displayName="BlockPatternsList",BlockPattern.displayName="BlockPattern",PatternTransformationsMenu.__docgenInfo={description:"",methods:[],displayName:"PatternTransformationsMenu"};var pattern_transformations_menu=PatternTransformationsMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js"]={name:"PatternTransformationsMenu",docgenInfo:PatternTransformationsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js"});const BlockSwitcherDropdownMenu=_ref=>{let{clientIds:clientIds,blocks:blocks}=_ref;const{replaceBlocks:replaceBlocks,multiSelect:multiSelect}=(0,use_dispatch.Z)(store.h),blockInformation=(0,use_block_display_information.Z)(blocks[0].clientId),{possibleBlockTransformations:possibleBlockTransformations,canRemove:canRemove,hasBlockStyles:hasBlockStyles,icon:icon,patterns:patterns}=(0,use_select.Z)((select=>{const{getBlockRootClientId:getBlockRootClientId,getBlockTransformItems:getBlockTransformItems,__experimentalGetPatternTransformItems:__experimentalGetPatternTransformItems}=select(store.h),{getBlockStyles:getBlockStyles,getBlockType:getBlockType}=select(blocks_build_module.h),{canRemoveBlocks:canRemoveBlocks}=select(store.h),rootClientId=getBlockRootClientId(Array.isArray(clientIds)?clientIds[0]:clientIds),[{name:firstBlockName}]=blocks,_isSingleBlockSelected=1===blocks.length,styles=_isSingleBlockSelected&&getBlockStyles(firstBlockName);let _icon;if(_isSingleBlockSelected)_icon=null==blockInformation?void 0:blockInformation.icon;else{var _getBlockType;_icon=1===new Set(blocks.map((_ref2=>{let{name:name}=_ref2;return name}))).size?null===(_getBlockType=getBlockType(firstBlockName))||void 0===_getBlockType?void 0:_getBlockType.icon:copy.Z}return{possibleBlockTransformations:getBlockTransformItems(blocks,rootClientId),canRemove:canRemoveBlocks(clientIds,rootClientId),hasBlockStyles:!(null==styles||!styles.length),icon:_icon,patterns:__experimentalGetPatternTransformItems(blocks,rootClientId)}}),[clientIds,blocks,null==blockInformation?void 0:blockInformation.icon]),blockTitle=(0,use_block_display_title.Z)({clientId:Array.isArray(clientIds)?clientIds[0]:clientIds,maximumLength:35}),isReusable=1===blocks.length&&(0,blocks_build_module.vr)(blocks[0]),isTemplate=1===blocks.length&&(0,blocks_build_module.zQ)(blocks[0]);function selectForMultipleBlocks(insertedBlocks){insertedBlocks.length>1&&multiSelect(insertedBlocks[0].clientId,insertedBlocks[insertedBlocks.length-1].clientId)}const hasPossibleBlockTransformations=!!possibleBlockTransformations.length&&canRemove&&!isTemplate,hasPatternTransformation=!(null==patterns||!patterns.length)&&canRemove;if(!hasBlockStyles&&!hasPossibleBlockTransformations)return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_button.Z,{disabled:!0,className:"block-editor-block-switcher__no-switcher-icon",title:blockTitle,icon:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),(isReusable||isTemplate)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-block-switcher__toggle-text",children:blockTitle})]})})});const blockSwitcherLabel=blockTitle,blockSwitcherDescription=1===blocks.length?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s: Change block type or style"),blockTitle):(0,i18n_build_module.gB)((0,i18n_build_module._n)("Change type of %d block","Change type of %d blocks",blocks.length),blocks.length),showDropDown=hasBlockStyles||hasPossibleBlockTransformations||hasPatternTransformation;return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_item.Z,{children:toggleProps=>(0,jsx_runtime.jsx)(dropdown_menu.Z,{className:"block-editor-block-switcher",label:blockSwitcherLabel,popoverProps:{position:"bottom right",variant:"toolbar",className:"block-editor-block-switcher__popover"},icon:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,className:"block-editor-block-switcher__toggle",showColors:!0}),(isReusable||isTemplate)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-block-switcher__toggle-text",children:blockTitle})]}),toggleProps:{describedBy:blockSwitcherDescription,...toggleProps},menuProps:{orientation:"both"},children:_ref3=>{let{onClose:onClose}=_ref3;return showDropDown&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__container",children:[hasPatternTransformation&&(0,jsx_runtime.jsx)(pattern_transformations_menu,{blocks:blocks,patterns:patterns,onSelect:transformedBlocks=>{!function onPatternTransform(transformedBlocks){replaceBlocks(clientIds,transformedBlocks),selectForMultipleBlocks(transformedBlocks)}(transformedBlocks),onClose()}}),hasPossibleBlockTransformations&&(0,jsx_runtime.jsx)(block_transformations_menu,{className:"block-editor-block-switcher__transforms__menugroup",possibleBlockTransformations:possibleBlockTransformations,blocks:blocks,onSelect:name=>{!function onBlockTransform(name){const newBlocks=(0,blocks_build_module.m4)(blocks,name);replaceBlocks(clientIds,newBlocks),selectForMultipleBlocks(newBlocks)}(name),onClose()}}),hasBlockStyles&&(0,jsx_runtime.jsx)(BlockStylesMenu,{hoveredBlock:blocks[0],onSwitch:onClose})]})}})})})};BlockSwitcherDropdownMenu.displayName="BlockSwitcherDropdownMenu";const BlockSwitcher=_ref4=>{let{clientIds:clientIds}=_ref4;const blocks=(0,use_select.Z)((select=>select(store.h).getBlocksByClientId(clientIds)),[clientIds]);return!blocks.length||blocks.some((block=>!block))?null:(0,jsx_runtime.jsx)(BlockSwitcherDropdownMenu,{clientIds:clientIds,blocks:blocks})};BlockSwitcher.displayName="BlockSwitcher",BlockSwitcher.__docgenInfo={description:"",methods:[],displayName:"BlockSwitcher"};var block_switcher=BlockSwitcher;BlockSwitcherDropdownMenu.__docgenInfo={description:"",methods:[],displayName:"BlockSwitcherDropdownMenu"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/index.js"]={name:"BlockSwitcherDropdownMenu",docgenInfo:BlockSwitcherDropdownMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/index.js"]={name:"BlockSwitcher",docgenInfo:BlockSwitcher.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/index.js"});const{Fill:__unstableBlockToolbarLastItem,Slot:Slot}=(0,slot_fill.up)("__unstableBlockToolbarLastItem");__unstableBlockToolbarLastItem.Slot=Slot;var block_toolbar_last_item=__unstableBlockToolbarLastItem,block_settings_dropdown=__webpack_require__("./packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js");function BlockSettingsMenu(_ref){let{clientIds:clientIds,...props}=_ref;return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_item.Z,{children:toggleProps=>(0,jsx_runtime.jsx)(block_settings_dropdown.Z,{clientIds:clientIds,toggleProps:toggleProps,...props})})})}BlockSettingsMenu.displayName="BlockSettingsMenu",BlockSettingsMenu.__docgenInfo={description:"",methods:[],displayName:"BlockSettingsMenu"};var block_settings_menu=BlockSettingsMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/index.js"]={name:"BlockSettingsMenu",docgenInfo:BlockSettingsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/index.js"});var lock=__webpack_require__("./packages/icons/build-module/library/lock.js"),block_lock_modal=__webpack_require__("./packages/block-editor/src/components/block-lock/modal.js"),use_block_lock=__webpack_require__("./packages/block-editor/src/components/block-lock/use-block-lock.js");function BlockLockToolbar(_ref){let{clientId:clientId}=_ref;const blockInformation=(0,use_block_display_information.Z)(clientId),{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLock}=(0,use_block_lock.Z)(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);return canLock?canEdit&&canMove&&canRemove?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_group.Z,{className:"block-editor-block-lock-toolbar",children:(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:lock.Z,label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Unlock %s"),blockInformation.title),onClick:toggleModal})}),isModalOpen&&(0,jsx_runtime.jsx)(block_lock_modal.Z,{clientId:clientId,onClose:toggleModal})]}):null}BlockLockToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockLockToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/toolbar.js"]={name:"BlockLockToolbar",docgenInfo:BlockLockToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-lock/toolbar.js"});var group=__webpack_require__("./packages/icons/build-module/library/group.js"),row=__webpack_require__("./packages/icons/build-module/library/row.js"),stack=__webpack_require__("./packages/icons/build-module/library/stack.js"),use_convert_to_group_button_props=__webpack_require__("./packages/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js");const layouts={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"}};function BlockGroupToolbar(){const{blocksSelection:blocksSelection,clientIds:clientIds,groupingBlockName:groupingBlockName,isGroupable:isGroupable}=(0,use_convert_to_group_button_props.Z)(),{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store.h),{canRemove:canRemove,variations:variations}=(0,use_select.Z)((select=>{const{canRemoveBlocks:canRemoveBlocks}=select(store.h),{getBlockVariations:getBlockVariations}=select(blocks_build_module.h);return{canRemove:canRemoveBlocks(clientIds),variations:getBlockVariations(groupingBlockName,"transform")}}),[clientIds,groupingBlockName]),onConvertToGroup=layout=>{const newBlocks=(0,blocks_build_module.m4)(blocksSelection,groupingBlockName);"string"!=typeof layout&&(layout="group"),newBlocks&&newBlocks.length>0&&(newBlocks[0].attributes.layout=layouts[layout],replaceBlocks(clientIds,newBlocks))};if(!isGroupable||!canRemove)return null;const canInsertRow=!!variations.find((_ref=>{let{name:name}=_ref;return"group-row"===name})),canInsertStack=!!variations.find((_ref2=>{let{name:name}=_ref2;return"group-stack"===name}));return(0,jsx_runtime.jsxs)(toolbar_group.Z,{children:[(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:group.Z,label:(0,i18n_build_module._x)("Group","verb"),onClick:onConvertToGroup}),canInsertRow&&(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:row.Z,label:(0,i18n_build_module._x)("Row","single horizontal line"),onClick:()=>onConvertToGroup("row")}),canInsertStack&&(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:stack.Z,label:(0,i18n_build_module._x)("Stack","verb"),onClick:()=>onConvertToGroup("stack")})]})}BlockGroupToolbar.displayName="BlockGroupToolbar",BlockGroupToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockGroupToolbar"};var convert_to_group_buttons_toolbar=BlockGroupToolbar;function BlockEditVisuallyButton(_ref){let{clientIds:clientIds}=_ref;const clientId=1===clientIds.length?clientIds[0]:void 0,canEditVisually=(0,use_select.Z)((select=>!!clientId&&"html"===select(store.h).getBlockMode(clientId)),[clientId]),{toggleBlockMode:toggleBlockMode}=(0,use_dispatch.Z)(store.h);return canEditVisually?(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_button.Z,{onClick:()=>{toggleBlockMode(clientId)},children:(0,i18n_build_module.__)("Edit visually")})}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/convert-to-group-buttons/toolbar.js"]={name:"BlockGroupToolbar",docgenInfo:BlockGroupToolbar.__docgenInfo,path:"packages/block-editor/src/components/convert-to-group-buttons/toolbar.js"}),BlockEditVisuallyButton.displayName="BlockEditVisuallyButton",BlockEditVisuallyButton.__docgenInfo={description:"",methods:[],displayName:"BlockEditVisuallyButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit-visually-button/index.js"]={name:"BlockEditVisuallyButton",docgenInfo:BlockEditVisuallyButton.__docgenInfo,path:"packages/block-editor/src/components/block-edit-visually-button/index.js"});var block_name_context=(0,react.createContext)("");const BlockToolbar=_ref=>{let{hideDragHandle:hideDragHandle}=_ref;const{blockClientIds:blockClientIds,blockClientId:blockClientId,blockType:blockType,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,isValid:isValid,isVisual:isVisual,isContentLocked:isContentLocked}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockMode:getBlockMode,getSelectedBlockClientIds:getSelectedBlockClientIds,isBlockValid:isBlockValid,getBlockRootClientId:getBlockRootClientId,getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store.h),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],blockRootClientId=getBlockRootClientId(selectedBlockClientId),settings=getSettings();return{blockClientIds:selectedBlockClientIds,blockClientId:selectedBlockClientId,blockType:selectedBlockClientId&&(0,blocks_build_module.ck)(getBlockName(selectedBlockClientId)),hasFixedToolbar:settings.hasFixedToolbar,isDistractionFree:settings.isDistractionFree,rootClientId:blockRootClientId,isValid:selectedBlockClientIds.every((id=>isBlockValid(id))),isVisual:selectedBlockClientIds.every((id=>"visual"===getBlockMode(id))),isContentLocked:!!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]),{toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),nodeRef=(0,react.useRef)(),{showMovers:showMovers,gestures:showMoversGestures}=(0,block_toolbar_utils.o)({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(blockClientId,isFocused)}}),displayHeaderToolbar=(0,use_viewport_match.Z)("medium","<")||hasFixedToolbar;if(blockType&&!(0,blocks_build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const shouldShowMovers=displayHeaderToolbar||showMovers;if(0===blockClientIds.length)return null;const shouldShowVisualToolbar=isValid&&isVisual,isMultiToolbar=blockClientIds.length>1,isSynced=(0,blocks_build_module.vr)(blockType)||(0,blocks_build_module.zQ)(blockType),classes=classnames_default()("block-editor-block-toolbar",{"is-showing-movers":shouldShowMovers,"is-synced":isSynced});return(0,jsx_runtime.jsxs)("div",{className:classes,children:[!isMultiToolbar&&!displayHeaderToolbar&&!isContentLocked&&(0,jsx_runtime.jsx)(BlockParentSelector,{}),(0,jsx_runtime.jsx)("div",{ref:nodeRef,...showMoversGestures,children:(shouldShowVisualToolbar||isMultiToolbar)&&!isContentLocked&&(0,jsx_runtime.jsxs)(toolbar_group.Z,{className:"block-editor-block-toolbar__block-controls",children:[(0,jsx_runtime.jsx)(block_switcher,{clientIds:blockClientIds}),!isMultiToolbar&&(0,jsx_runtime.jsx)(BlockLockToolbar,{clientId:blockClientIds[0]}),(0,jsx_runtime.jsx)(block_mover.Z,{clientIds:blockClientIds,hideDragHandle:hideDragHandle})]})}),shouldShowVisualToolbar&&isMultiToolbar&&(0,jsx_runtime.jsx)(convert_to_group_buttons_toolbar,{}),shouldShowVisualToolbar&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_controls.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_name_context.Provider,{value:null==blockType?void 0:blockType.name,children:(0,jsx_runtime.jsx)(block_toolbar_last_item.Slot,{})})]}),(0,jsx_runtime.jsx)(BlockEditVisuallyButton,{clientIds:blockClientIds}),!isContentLocked&&(0,jsx_runtime.jsx)(block_settings_menu,{clientIds:blockClientIds})]})};BlockToolbar.displayName="BlockToolbar",BlockToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockToolbar"};var block_toolbar=BlockToolbar;function BlockContextualToolbar(_ref){let{focusOnMount:focusOnMount,isFixed:isFixed,...props}=_ref;const{blockType:blockType,hasParents:hasParents,showParentSelector:showParentSelector}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store.h),{getBlockType:getBlockType}=select(blocks_build_module.h),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],parents=getBlockParents(selectedBlockClientId),parentBlockType=getBlockType(getBlockName(parents[parents.length-1]));return{blockType:selectedBlockClientId&&getBlockType(getBlockName(selectedBlockClientId)),hasParents:parents.length,showParentSelector:parentBlockType&&(0,blocks_build_module.zb)(parentBlockType,"__experimentalParentSelector",!0)&&selectedBlockClientIds.length<=1&&!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]);if(blockType&&!(0,blocks_build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const classes=classnames_default()("block-editor-block-contextual-toolbar",{"has-parent":hasParents&&showParentSelector,"is-fixed":isFixed});return(0,jsx_runtime.jsx)(navigable_toolbar,{focusOnMount:focusOnMount,className:classes,"aria-label":(0,i18n_build_module.__)("Block tools"),...props,children:(0,jsx_runtime.jsx)(block_toolbar,{hideDragHandle:isFixed})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-toolbar/index.js"]={name:"BlockToolbar",docgenInfo:BlockToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-toolbar/index.js"}),BlockContextualToolbar.displayName="BlockContextualToolbar",BlockContextualToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockContextualToolbar"};var block_contextual_toolbar=BlockContextualToolbar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/block-contextual-toolbar.js"]={name:"BlockContextualToolbar",docgenInfo:BlockContextualToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-tools/block-contextual-toolbar.js"});var get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js"),base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),custom_select_control=__webpack_require__("./packages/components/build-module/custom-select-control/index.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js"),inspector_controls=__webpack_require__("./packages/block-editor/src/components/inspector-controls/index.js");const OPTION_CLASSNAME="block-editor-hooks__position-selection__select-control__option",DEFAULT_OPTION={key:"default",value:"",name:(0,i18n_build_module.__)("Default"),className:OPTION_CLASSNAME},STICKY_OPTION={key:"sticky",value:"sticky",name:(0,i18n_build_module.__)("Sticky"),className:OPTION_CLASSNAME,__experimentalHint:(0,i18n_build_module.__)("The block will stick to the top of the window instead of scrolling.")},FIXED_OPTION={key:"fixed",value:"fixed",name:(0,i18n_build_module.__)("Fixed"),className:OPTION_CLASSNAME,__experimentalHint:(0,i18n_build_module.__)("The block will not move when the page is scrolled.")},POSITION_SIDES=["top","right","bottom","left"],VALID_POSITION_TYPES=["sticky","fixed"];function hasPositionSupport(blockType){return!!(0,blocks_build_module.Dx)(blockType,"position")}function hasStickyOrFixedPositionValue(attributes){var _attributes$style,_attributes$style$pos;const positionType=null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$pos=_attributes$style.position)||void 0===_attributes$style$pos?void 0:_attributes$style$pos.type;return"sticky"===positionType||"fixed"===positionType}function useIsPositionDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const allowFixed=(0,use_setting.Z)("position.fixed"),allowSticky=(0,use_setting.Z)("position.sticky"),isDisabled=!allowFixed&&!allowSticky;return!hasPositionSupport(blockName)||isDisabled}function PositionPanel(props){var _style$position2;const{attributes:{style:style={}},clientId:clientId,name:blockName,setAttributes:setAttributes}=props,allowFixed=function hasFixedPositionSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,"position");return!!(!0===support||null!=support&&support.fixed)}(blockName),allowSticky=function hasStickyPositionSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,"position");return!!(!0===support||null!=support&&support.sticky)}(blockName),value=null==style||null===(_style$position2=style.position)||void 0===_style$position2?void 0:_style$position2.type,{hasParents:hasParents}=(0,use_select.Z)((select=>{const{getBlockParents:getBlockParents}=select(store.h);return{hasParents:getBlockParents(clientId).length}}),[clientId]),options=(0,react.useMemo)((()=>{const availableOptions=[DEFAULT_OPTION];return(allowSticky&&!hasParents||value===STICKY_OPTION.value)&&availableOptions.push(STICKY_OPTION),(allowFixed||value===FIXED_OPTION.value)&&availableOptions.push(FIXED_OPTION),availableOptions}),[allowFixed,allowSticky,hasParents,value]),selectedOption=value&&options.find((option=>option.value===value))||DEFAULT_OPTION;return platform.Z.select({web:options.length>1?(0,jsx_runtime.jsx)(inspector_controls.Z,{__experimentalGroup:"position",children:(0,jsx_runtime.jsx)(base_control.ZP,{className:"block-editor-hooks__position-selection",children:(0,jsx_runtime.jsx)(custom_select_control.Z,{__nextUnconstrainedWidth:!0,__next36pxDefaultSize:!0,className:"block-editor-hooks__position-selection__select-control",label:(0,i18n_build_module.__)("Position"),hideLabelFromVision:!0,describedBy:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Currently selected position: %s"),selectedOption.name),options:options,value:selectedOption,__experimentalShowSelectedHint:!0,onChange:_ref3=>{let{selectedItem:selectedItem}=_ref3;(next=>{const newStyle={...style,position:{...null==style?void 0:style.position,type:next,top:"sticky"===next||"fixed"===next?"0px":void 0}};setAttributes({style:(0,utils.QU)(newStyle)})})(selectedItem.value)},size:"__unstable-large"})})}):null,native:null})}const withInspectorControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const{name:blockName}=props;return[(0,blocks_build_module.zb)(blockName,"position")&&!useIsPositionDisabled(props)&&(0,jsx_runtime.jsx)(PositionPanel,{...props},"position"),(0,jsx_runtime.jsx)(BlockEdit,{...props},"edit")]}),"withInspectorControls"),withPositionStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{const{name:name,attributes:attributes}=props,allowPositionStyles=(0,blocks_build_module.zb)(name,"position")&&!useIsPositionDisabled(props),id=(0,use_instance_id.Z)(BlockListBlock),element=(0,react.useContext)(BlockList.__unstableElementContext);let css;allowPositionStyles&&(css=function getPositionCSS(_ref){let{selector:selector,style:style}=_ref,output="";const{type:positionType}=(null==style?void 0:style.position)||{};return VALID_POSITION_TYPES.includes(positionType)?(output+=`${selector} {`,output+=`position: ${positionType};`,POSITION_SIDES.forEach((side=>{var _style$position;void 0!==(null==style||null===(_style$position=style.position)||void 0===_style$position?void 0:_style$position[side])&&(output+=`${side}: ${style.position[side]};`)})),"sticky"!==positionType&&"fixed"!==positionType||(output+="z-index: 10"),output+="}",output):output}({selector:`.wp-container-${id}.wp-container-${id}`,style:null==attributes?void 0:attributes.style})||"");const className=classnames_default()(null==props?void 0:props.className,{[`wp-container-${id}`]:allowPositionStyles&&!!css});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[allowPositionStyles&&element&&!!css&&(0,react_dom.createPortal)((0,jsx_runtime.jsx)("style",{children:css}),element),(0,jsx_runtime.jsx)(BlockListBlock,{...props,className:className})]})}));(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/position/with-position-styles",withPositionStyles),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/position/with-inspector-controls",withInspectorControls);const COMMON_PROPS={placement:"top-start"},DEFAULT_PROPS={...COMMON_PROPS,flip:!1,shift:!0},RESTRICTED_HEIGHT_PROPS={...COMMON_PROPS,flip:!0,shift:!1};function getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky){if(!contentElement||!selectedBlockElement)return DEFAULT_PROPS;const scrollTop=(null==scrollContainer?void 0:scrollContainer.scrollTop)||0,blockRect=selectedBlockElement.getBoundingClientRect(),topOfContentElementInViewport=scrollTop+contentElement.getBoundingClientRect().top,viewportHeight=contentElement.ownerDocument.documentElement.clientHeight,restrictedTopArea=topOfContentElementInViewport+toolbarHeight,hasSpaceForToolbarAbove=blockRect.top>restrictedTopArea,isBlockTallerThanViewport=blockRect.height>viewportHeight-toolbarHeight;return isSticky||!hasSpaceForToolbarAbove&&!isBlockTallerThanViewport?RESTRICTED_HEIGHT_PROPS:DEFAULT_PROPS}function selector(select){const{__unstableGetEditorMode:__unstableGetEditorMode,isMultiSelecting:isMultiSelecting,hasMultiSelection:hasMultiSelection,isTyping:isTyping,__experimentalIsBlockInterfaceHidden:isBlockInterfaceHidden,getSettings:getSettings,getLastMultiSelectedBlockClientId:getLastMultiSelectedBlockClientId}=select(store.h);return{editorMode:__unstableGetEditorMode(),isMultiSelecting:isMultiSelecting(),isTyping:isTyping(),isBlockInterfaceHidden:isBlockInterfaceHidden(),hasFixedToolbar:getSettings().hasFixedToolbar,isDistractionFree:getSettings().isDistractionFree,lastClientId:hasMultiSelection()?getLastMultiSelectedBlockClientId():null}}function SelectedBlockPopover(_ref){let{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:showContents,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{editorMode:editorMode,isMultiSelecting:isMultiSelecting,isTyping:isTyping,isBlockInterfaceHidden:isBlockInterfaceHidden,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,lastClientId:lastClientId}=(0,use_select.Z)(selector,[]),isInsertionPointVisible=(0,use_select.Z)((select=>{const{isBlockInsertionPointVisible:isBlockInsertionPointVisible,getBlockInsertionPoint:getBlockInsertionPoint,getBlockOrder:getBlockOrder}=select(store.h);if(!isBlockInsertionPointVisible())return!1;const insertionPoint=getBlockInsertionPoint();return getBlockOrder(insertionPoint.rootClientId)[insertionPoint.index]===clientId}),[clientId]),isLargeViewport=(0,use_viewport_match.Z)("medium"),isToolbarForced=(0,react.useRef)(!1),{stopTyping:stopTyping}=(0,use_dispatch.Z)(store.h),showEmptyBlockSideInserter=!isTyping&&"edit"===editorMode&&isEmptyDefaultBlock,shouldShowBreadcrumb="navigation"===editorMode||"zoom-out"===editorMode,shouldShowContextualToolbar="edit"===editorMode&&!hasFixedToolbar&&isLargeViewport&&!isMultiSelecting&&!showEmptyBlockSideInserter&&!isTyping&&!isBlockInterfaceHidden,canFocusHiddenToolbar=!("edit"!==editorMode||shouldShowContextualToolbar||hasFixedToolbar||isDistractionFree||isEmptyDefaultBlock);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",(()=>{isToolbarForced.current=!0,stopTyping(!0)}),{isDisabled:!canFocusHiddenToolbar}),(0,react.useEffect)((()=>{isToolbarForced.current=!1}));const initialToolbarItemIndexRef=(0,react.useRef)(),popoverProps=function useBlockToolbarPopoverProps(_ref){let{contentElement:contentElement,clientId:clientId}=_ref;const selectedBlockElement=(0,use_block_refs.qT)(clientId),[toolbarHeight,setToolbarHeight]=(0,react.useState)(0),{blockIndex:blockIndex,isSticky:isSticky}=(0,use_select.Z)((select=>{const{getBlockIndex:getBlockIndex,getBlockAttributes:getBlockAttributes}=select(store.h);return{blockIndex:getBlockIndex(clientId),isSticky:hasStickyOrFixedPositionValue(getBlockAttributes(clientId))}}),[clientId]),scrollContainer=(0,react.useMemo)((()=>{if(contentElement)return(0,get_scroll_container.Z)(contentElement)}),[contentElement]),[props,setProps]=(0,react.useState)((()=>getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky))),popoverRef=(0,use_ref_effect.Z)((popoverNode=>{setToolbarHeight(popoverNode.offsetHeight)}),[]),updateProps=(0,react.useCallback)((()=>setProps(getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky))),[contentElement,selectedBlockElement,scrollContainer,toolbarHeight]);return(0,react.useLayoutEffect)(updateProps,[blockIndex,updateProps]),(0,react.useLayoutEffect)((()=>{var _contentElement$owner,_contentView$addEvent,_selectedBlockElement;if(!contentElement||!selectedBlockElement)return;const contentView=null==contentElement||null===(_contentElement$owner=contentElement.ownerDocument)||void 0===_contentElement$owner?void 0:_contentElement$owner.defaultView;let resizeObserver;null==contentView||null===(_contentView$addEvent=contentView.addEventHandler)||void 0===_contentView$addEvent||_contentView$addEvent.call(contentView,"resize",updateProps);const blockView=null==selectedBlockElement||null===(_selectedBlockElement=selectedBlockElement.ownerDocument)||void 0===_selectedBlockElement?void 0:_selectedBlockElement.defaultView;return blockView.ResizeObserver&&(resizeObserver=new blockView.ResizeObserver(updateProps),resizeObserver.observe(selectedBlockElement)),()=>{var _contentView$removeEv;null==contentView||null===(_contentView$removeEv=contentView.removeEventHandler)||void 0===_contentView$removeEv||_contentView$removeEv.call(contentView,"resize",updateProps),resizeObserver&&resizeObserver.disconnect()}}),[updateProps,contentElement,selectedBlockElement]),{...props,ref:popoverRef}}({contentElement:null==__unstableContentRef?void 0:__unstableContentRef.current,clientId:clientId});return shouldShowBreadcrumb||shouldShowContextualToolbar||showEmptyBlockSideInserter?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showEmptyBlockSideInserter&&(0,jsx_runtime.jsx)(block_popover.Z,{clientId:capturingClientId||clientId,__unstableCoverTarget:!0,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-side-inserter-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1,shift:!1,...popoverProps,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-list__empty-block-inserter",children:(0,jsx_runtime.jsx)(inserter.Z,{position:"bottom right",rootClientId:rootClientId,clientId:clientId,__experimentalIsQuick:!0})})}),(shouldShowBreadcrumb||shouldShowContextualToolbar)&&(0,jsx_runtime.jsxs)(block_popover.Z,{clientId:capturingClientId||clientId,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1,...popoverProps,children:[shouldShowContextualToolbar&&showContents&&(0,jsx_runtime.jsx)(block_contextual_toolbar,{focusOnMount:isToolbarForced.current,__experimentalInitialIndex:initialToolbarItemIndexRef.current,__experimentalOnIndexChange:index=>{initialToolbarItemIndexRef.current=index}},clientId),shouldShowBreadcrumb&&(0,jsx_runtime.jsx)(block_selection_button,{clientId:clientId,rootClientId:rootClientId})]})]}):null}function wrapperSelector(select){const{getSelectedBlockClientId:getSelectedBlockClientId,getFirstMultiSelectedBlockClientId:getFirstMultiSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlock:getBlock,getBlockParents:getBlockParents,getSettings:getSettings,isNavigationMode:_isNavigationMode,__experimentalGetBlockListSettingsForBlocks:__experimentalGetBlockListSettingsForBlocks}=select(store.h),clientId=getSelectedBlockClientId()||getFirstMultiSelectedBlockClientId();if(!clientId)return;const{name:name,attributes:attributes={}}=getBlock(clientId)||{},blockParentsClientIds=getBlockParents(clientId),parentBlockListSettings=__experimentalGetBlockListSettingsForBlocks(blockParentsClientIds),capturingClientId=blockParentsClientIds.find((parentClientId=>{var _parentBlockListSetti;return null===(_parentBlockListSetti=parentBlockListSettings[parentClientId])||void 0===_parentBlockListSetti?void 0:_parentBlockListSetti.__experimentalCaptureToolbars})),settings=getSettings();return{clientId:clientId,rootClientId:getBlockRootClientId(clientId),name:name,isDistractionFree:settings.isDistractionFree,isNavigationMode:_isNavigationMode(),isEmptyDefaultBlock:name&&(0,blocks_build_module.ZP)({name:name,attributes:attributes}),capturingClientId:capturingClientId}}function WrappedBlockPopover(_ref2){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref2;const selected=(0,use_select.Z)(wrapperSelector,[]);if(!selected)return null;const{clientId:clientId,rootClientId:rootClientId,name:name,isEmptyDefaultBlock:isEmptyDefaultBlock,capturingClientId:capturingClientId,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=selected;return name?(0,jsx_runtime.jsx)(SelectedBlockPopover,{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:!isDistractionFree||isNavigationMode,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}):null}function BlockToolsBackCompat(_ref){let{children:children}=_ref;const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isDisabled=(0,react.useContext)(disabled.Z.Context);return openRef||isDisabled?children:((0,build_module.Z)('wp.components.Popover.Slot name="block-toolbar"',{alternative:"wp.blockEditor.BlockTools",since:"5.8",version:"6.3"}),(0,jsx_runtime.jsxs)(InsertionPoint,{__unstablePopoverSlot:"block-toolbar",children:[(0,jsx_runtime.jsx)(WrappedBlockPopover,{__unstablePopoverSlot:"block-toolbar"}),children]}))}function useBlockSelectionClearer(){const{getSettings:getSettings,hasSelectedBlock:hasSelectedBlock,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),{clearSelectedBlock:clearSelectedBlock}=(0,use_dispatch.Z)(store.h),{__experimentalClearBlockSelection:isEnabled}=getSettings();return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)};function onMouseDown(event){(hasSelectedBlock()||hasMultiSelection())&&event.target===node&&clearSelectedBlock()}}),[hasSelectedBlock,hasMultiSelection,clearSelectedBlock,isEnabled])}function BlockSelectionClearer(props){return(0,jsx_runtime.jsx)("div",{ref:useBlockSelectionClearer(),...props})}WrappedBlockPopover.displayName="WrappedBlockPopover",WrappedBlockPopover.__docgenInfo={description:"",methods:[],displayName:"WrappedBlockPopover"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/selected-block-popover.js"]={name:"WrappedBlockPopover",docgenInfo:WrappedBlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-tools/selected-block-popover.js"}),BlockToolsBackCompat.displayName="BlockToolsBackCompat",BlockToolsBackCompat.__docgenInfo={description:"",methods:[],displayName:"BlockToolsBackCompat"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/back-compat.js"]={name:"BlockToolsBackCompat",docgenInfo:BlockToolsBackCompat.__docgenInfo,path:"packages/block-editor/src/components/block-tools/back-compat.js"}),BlockSelectionClearer.displayName="BlockSelectionClearer",BlockSelectionClearer.__docgenInfo={description:"",methods:[],displayName:"BlockSelectionClearer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-selection-clearer/index.js"]={name:"BlockSelectionClearer",docgenInfo:BlockSelectionClearer.__docgenInfo,path:"packages/block-editor/src/components/block-selection-clearer/index.js"});var with_client_id=(0,create_higher_order_component.o)((WrappedComponent=>props=>{const{clientId:clientId}=(0,block_edit_context.Z8)();return(0,jsx_runtime.jsx)(WrappedComponent,{...props,clientId:clientId})}),"withClientId");const button_block_appender_ButtonBlockAppender=_ref=>{let{clientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock,isToggle:isToggle}=_ref;return(0,jsx_runtime.jsx)(button_block_appender,{className:classnames_default()({"block-list-appender__toggle":isToggle}),rootClientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock})};button_block_appender_ButtonBlockAppender.displayName="ButtonBlockAppender",button_block_appender_ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"};var inner_blocks_button_block_appender=with_client_id(button_block_appender_ButtonBlockAppender);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inner-blocks/button-block-appender.js"]={name:"ButtonBlockAppender",docgenInfo:button_block_appender_ButtonBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/inner-blocks/button-block-appender.js"});const default_block_appender_DefaultBlockAppender=_ref=>{let{clientId:clientId}=_ref;return(0,jsx_runtime.jsx)(default_block_appender,{rootClientId:clientId})};default_block_appender_DefaultBlockAppender.displayName="DefaultBlockAppender",default_block_appender_DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var inner_blocks_default_block_appender=(0,compose.Z)([with_client_id,(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlockOrder:getBlockOrder}=select(store.h),blockClientIds=getBlockOrder(clientId);return{lastBlockClientId:blockClientIds[blockClientIds.length-1]}}))])(default_block_appender_DefaultBlockAppender);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inner-blocks/default-block-appender.js"]={name:"DefaultBlockAppender",docgenInfo:default_block_appender_DefaultBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/inner-blocks/default-block-appender.js"});var is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");const pendingSettingsUpdates=new WeakMap;var es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6);var use_block_sync=__webpack_require__("./packages/block-editor/src/components/provider/use-block-sync.js"),use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js"),use_drop_zone=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js"),use_on_block_drop=__webpack_require__("./packages/block-editor/src/components/use-on-block-drop/index.js"),math=__webpack_require__("./packages/block-editor/src/utils/math.js");function getDropTargetPosition(blocksData,position){var _blocksData$nearestIn,_blocksData$adjacentI;let orientation=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical";const allowedEdges="horizontal"===orientation?["left","right"]:["top","bottom"],isRightToLeft=(0,i18n_build_module.dZ)();let nearestIndex=0,insertPosition="before",minDistance=1/0;blocksData.forEach((_ref=>{let{isUnmodifiedDefaultBlock:isUnmodifiedDefaultBlock,getBoundingClientRect:getBoundingClientRect,blockIndex:blockIndex}=_ref;const rect=getBoundingClientRect();let[distance,edge]=(0,math.kY)(position,rect,allowedEdges);isUnmodifiedDefaultBlock&&(0,math._3)(position,rect)&&(distance=0),distance<minDistance&&(insertPosition="bottom"===edge||!isRightToLeft&&"right"===edge||isRightToLeft&&"left"===edge?"after":"before",minDistance=distance,nearestIndex=blockIndex)}));const adjacentIndex=nearestIndex+("after"===insertPosition?1:-1),isNearestBlockUnmodifiedDefaultBlock=!(null===(_blocksData$nearestIn=blocksData[nearestIndex])||void 0===_blocksData$nearestIn||!_blocksData$nearestIn.isUnmodifiedDefaultBlock),isAdjacentBlockUnmodifiedDefaultBlock=!(null===(_blocksData$adjacentI=blocksData[adjacentIndex])||void 0===_blocksData$adjacentI||!_blocksData$adjacentI.isUnmodifiedDefaultBlock);if(!isNearestBlockUnmodifiedDefaultBlock&&!isAdjacentBlockUnmodifiedDefaultBlock){return["after"===insertPosition?nearestIndex+1:nearestIndex,"insert"]}return[isNearestBlockUnmodifiedDefaultBlock?nearestIndex:adjacentIndex,"replace"]}function useBlockDropZone(){let{rootClientId:targetRootClientId=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[dropTarget,setDropTarget]=(0,react.useState)({index:null,operation:"insert"}),isDisabled=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay,__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store.h),templateLock=getTemplateLock(targetRootClientId);return["all","contentOnly"].some((lock=>lock===templateLock))||__unstableHasActiveBlockOverlayActive(targetRootClientId)||__unstableIsWithinBlockOverlay(targetRootClientId)}),[targetRootClientId]),{getBlockListSettings:getBlockListSettings,getBlocks:getBlocks,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store.h),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h),onBlockDrop=(0,use_on_block_drop.ZP)(targetRootClientId,dropTarget.index,{operation:dropTarget.operation}),throttled=(0,use_throttle.Z)((0,react.useCallback)(((event,ownerDocument)=>{var _getBlockListSettings;const blocks=getBlocks(targetRootClientId);if(0===blocks.length)return void setDropTarget({index:0,operation:"insert"});const blocksData=blocks.map((block=>{const clientId=block.clientId;return{isUnmodifiedDefaultBlock:(0,blocks_build_module.ZP)(block),getBoundingClientRect:()=>ownerDocument.getElementById(`block-${clientId}`).getBoundingClientRect(),blockIndex:getBlockIndex(clientId)}})),[targetIndex,operation]=getDropTargetPosition(blocksData,{x:event.clientX,y:event.clientY},null===(_getBlockListSettings=getBlockListSettings(targetRootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation);setDropTarget({index:targetIndex,operation:operation}),showInsertionPoint(targetRootClientId,targetIndex,{operation:operation})}),[targetRootClientId]),200);return(0,use_drop_zone.Z)({isDisabled:isDisabled,onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget.ownerDocument)},onDragLeave(){throttled.cancel(),hideInsertionPoint()},onDragEnd(){throttled.cancel(),hideInsertionPoint()}})}function UncontrolledInnerBlocks(props){const{clientId:clientId,allowedBlocks:allowedBlocks,__experimentalDefaultBlock:__experimentalDefaultBlock,__experimentalDirectInsert:__experimentalDirectInsert,template:template,templateLock:templateLock,wrapperRef:wrapperRef,templateInsertUpdatesSelection:templateInsertUpdatesSelection,__experimentalCaptureToolbars:captureToolbars,__experimentalAppenderTagName:__experimentalAppenderTagName,renderAppender:renderAppender,orientation:orientation,placeholder:placeholder,__experimentalLayout:__experimentalLayout}=props;!function useNestedSettingsUpdate(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout){const{updateBlockListSettings:updateBlockListSettings}=(0,use_dispatch.Z)(store.h),registry=(0,use_registry.Z)(),{blockListSettings:blockListSettings,parentLock:parentLock}=(0,use_select.Z)((select=>{const rootClientId=select(store.h).getBlockRootClientId(clientId);return{blockListSettings:select(store.h).getBlockListSettings(clientId),parentLock:select(store.h).getTemplateLock(rootClientId)}}),[clientId]),_allowedBlocks=(0,react.useMemo)((()=>allowedBlocks),allowedBlocks);(0,react.useLayoutEffect)((()=>{const newSettings={allowedBlocks:_allowedBlocks,templateLock:void 0===templateLock||"contentOnly"===parentLock?parentLock:templateLock};if(void 0!==captureToolbars&&(newSettings.__experimentalCaptureToolbars=captureToolbars),void 0!==orientation)newSettings.orientation=orientation;else{const layoutType=getLayoutType(null==layout?void 0:layout.type);newSettings.orientation=layoutType.getOrientation(layout)}void 0!==__experimentalDefaultBlock&&(newSettings.__experimentalDefaultBlock=__experimentalDefaultBlock),void 0!==__experimentalDirectInsert&&(newSettings.__experimentalDirectInsert=__experimentalDirectInsert),(0,is_shallow_equal_build_module.ZP)(blockListSettings,newSettings)||(pendingSettingsUpdates.get(registry)||pendingSettingsUpdates.set(registry,[]),pendingSettingsUpdates.get(registry).push([clientId,newSettings]),window.queueMicrotask((()=>{var _pendingSettingsUpdat;null!==(_pendingSettingsUpdat=pendingSettingsUpdates.get(registry))&&void 0!==_pendingSettingsUpdat&&_pendingSettingsUpdat.length&&registry.batch((()=>{pendingSettingsUpdates.get(registry).forEach((args=>{updateBlockListSettings(...args)})),pendingSettingsUpdates.set(registry,[])}))})))}),[clientId,blockListSettings,_allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,parentLock,captureToolbars,orientation,updateBlockListSettings,layout,registry])}(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,__experimentalLayout),function useInnerBlockTemplateSync(clientId,template,templateLock,templateInsertUpdatesSelection){const{getBlocks:getBlocks,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{replaceInnerBlocks:replaceInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.Z)(store.h),{innerBlocks:innerBlocks}=(0,use_select.Z)((select=>({innerBlocks:select(store.h).getBlocks(clientId)})),[clientId]),existingTemplate=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let isCancelled=!1;return window.queueMicrotask((()=>{if(isCancelled)return;const currentInnerBlocks=getBlocks(clientId),shouldApplyTemplate=0===currentInnerBlocks.length||"all"===templateLock||"contentOnly"===templateLock,hasTemplateChanged=!es6_default()(template,existingTemplate.current);if(!shouldApplyTemplate||!hasTemplateChanged)return;existingTemplate.current=template;const nextBlocks=(0,blocks_build_module.fw)(currentInnerBlocks,template);es6_default()(nextBlocks,currentInnerBlocks)||(__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,nextBlocks,0===currentInnerBlocks.length&&templateInsertUpdatesSelection&&0!==nextBlocks.length&&isBlockSelected(clientId),getSelectedBlocksInitialCaretPosition()))})),()=>{isCancelled=!0}}),[innerBlocks,template,templateLock,clientId])}(clientId,template,templateLock,templateInsertUpdatesSelection);const context=function useBlockContext(clientId){return(0,use_select.Z)((select=>{const block=select(store.h).getBlock(clientId);if(!block)return;const blockType=select(blocks_build_module.h).getBlockType(block.name);return blockType&&0!==Object.keys(blockType.providesContext).length?Object.fromEntries(Object.entries(blockType.providesContext).map((_ref=>{let[contextName,attributeName]=_ref;return[contextName,block.attributes[attributeName]]}))):void 0}),[clientId])}(clientId),name=(0,use_select.Z)((select=>{var _select$getBlock;return null===(_select$getBlock=select(store.h).getBlock(clientId))||void 0===_select$getBlock?void 0:_select$getBlock.name}),[clientId]),{allowSizingOnChildren:allowSizingOnChildren=!1}=(0,blocks_build_module.Dx)(name,"__experimentalLayout")||{},layout=(0,react.useMemo)((()=>({...__experimentalLayout,...allowSizingOnChildren&&{allowSizingOnChildren:!0}})),[__experimentalLayout,allowSizingOnChildren]);return(0,jsx_runtime.jsx)(BlockContextProvider,{value:context,children:(0,jsx_runtime.jsx)(block_list_BlockListItems,{rootClientId:clientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout,wrapperRef:wrapperRef,placeholder:placeholder})})}function ControlledInnerBlocks(props){return(0,use_block_sync.Z)(props),(0,jsx_runtime.jsx)(UncontrolledInnerBlocks,{...props})}UncontrolledInnerBlocks.displayName="UncontrolledInnerBlocks",ControlledInnerBlocks.displayName="ControlledInnerBlocks";const ForwardedInnerBlocks=(0,react.forwardRef)(((props,ref)=>{const innerBlocksProps=useInnerBlocksProps({ref:ref},props);return(0,jsx_runtime.jsx)("div",{className:"block-editor-inner-blocks",children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})}));function useInnerBlocksProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{__unstableDisableLayoutClassNames:__unstableDisableLayoutClassNames,__unstableDisableDropZone:__unstableDisableDropZone}=options,{clientId:clientId,__unstableLayoutClassNames:layoutClassNames=""}=(0,block_edit_context.Z8)(),isSmallScreen=(0,use_viewport_match.Z)("medium","<"),{__experimentalCaptureToolbars:__experimentalCaptureToolbars,hasOverlay:hasOverlay}=(0,use_select.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,isBlockSelected:isBlockSelected,hasSelectedInnerBlock:hasSelectedInnerBlock,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),blockName=getBlockName(clientId),enableClickThrough="navigation"===__unstableGetEditorMode()||isSmallScreen;return{__experimentalCaptureToolbars:select(blocks_build_module.h).hasBlockSupport(blockName,"__experimentalExposeControlsToChildren",!1),hasOverlay:"core/template"!==blockName&&!isBlockSelected(clientId)&&!hasSelectedInnerBlock(clientId,!0)&&enableClickThrough}}),[clientId,isSmallScreen]),blockDropZoneRef=useBlockDropZone({rootClientId:clientId}),ref=(0,use_merge_refs.Z)([props.ref,__unstableDisableDropZone?null:blockDropZoneRef]),innerBlocksProps={__experimentalCaptureToolbars:__experimentalCaptureToolbars,...options},InnerBlocks=innerBlocksProps.value&&innerBlocksProps.onChange?ControlledInnerBlocks:UncontrolledInnerBlocks;return{...props,ref:ref,className:classnames_default()(props.className,"block-editor-block-list__layout",__unstableDisableLayoutClassNames?"":layoutClassNames,{"has-overlay":hasOverlay}),children:clientId?(0,jsx_runtime.jsx)(InnerBlocks,{...innerBlocksProps,clientId:clientId}):(0,jsx_runtime.jsx)(block_list_BlockListItems,{...options})}}useInnerBlocksProps.save=blocks_build_module.cZ,ForwardedInnerBlocks.DefaultBlockAppender=inner_blocks_default_block_appender,ForwardedInnerBlocks.ButtonBlockAppender=inner_blocks_button_block_appender,ForwardedInnerBlocks.Content=()=>useInnerBlocksProps.save().children;const elementContext=(0,react.createContext)(),IntersectionObserver=(0,react.createContext)(),pendingBlockVisibilityUpdatesPerRegistry=new WeakMap;function Root(_ref){let{className:className,...settings}=_ref;const[element,setElement]=(0,react.useState)(),isLargeViewport=(0,use_viewport_match.Z)("medium"),{isOutlineMode:isOutlineMode,isFocusMode:isFocusMode,editorMode:editorMode}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),{outlineMode:outlineMode,focusMode:focusMode}=getSettings();return{isOutlineMode:outlineMode,isFocusMode:focusMode,editorMode:__unstableGetEditorMode()}}),[]),registry=(0,use_registry.Z)(),{setBlockVisibility:setBlockVisibility}=(0,use_dispatch.Z)(store.h),delayedBlockVisibilityUpdates=(0,use_debounce.Z)((0,react.useCallback)((()=>{const updates={};pendingBlockVisibilityUpdatesPerRegistry.get(registry).forEach((_ref2=>{let[id,isIntersecting]=_ref2;updates[id]=isIntersecting})),setBlockVisibility(updates)}),[registry]),300,{trailing:!0}),intersectionObserver=(0,react.useMemo)((()=>{const{IntersectionObserver:Observer}=window;if(Observer)return new Observer((entries=>{pendingBlockVisibilityUpdatesPerRegistry.get(registry)||pendingBlockVisibilityUpdatesPerRegistry.set(registry,[]);for(const entry of entries){const clientId=entry.target.getAttribute("data-block");pendingBlockVisibilityUpdatesPerRegistry.get(registry).push([clientId,entry.isIntersecting])}delayedBlockVisibilityUpdates()}))}),[]),innerBlocksProps=useInnerBlocksProps({ref:(0,use_merge_refs.Z)([useBlockSelectionClearer(),useInBetweenInserter(),setElement]),className:classnames_default()("is-root-container",className,{"is-outline-mode":isOutlineMode,"is-focus-mode":isFocusMode&&isLargeViewport,"is-navigate-mode":"navigation"===editorMode})},settings);return(0,jsx_runtime.jsx)(elementContext.Provider,{value:element,children:(0,jsx_runtime.jsx)(IntersectionObserver.Provider,{value:intersectionObserver,children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})})}function BlockList(settings){return function usePreParsePatterns(){const{patterns:patterns,isPreviewMode:isPreviewMode}=(0,use_select.Z)((_select=>{const{__experimentalBlockPatterns:__experimentalBlockPatterns,__unstableIsPreviewMode:__unstableIsPreviewMode}=_select(store.h).getSettings();return{patterns:__experimentalBlockPatterns,isPreviewMode:__unstableIsPreviewMode}}),[]);return(0,react.useEffect)((()=>{if(isPreviewMode)return;if(null==patterns||!patterns.length)return;let handle,index=-1;const callback=()=>{index++,index>=patterns.length||((0,data_build_module.Ys)(store.h).__experimentalGetParsedPattern(patterns[index].name),handle=requestIdleCallback(callback))};return handle=requestIdleCallback(callback),()=>cancelIdleCallback(handle)}),[patterns,isPreviewMode]),null}(),(0,jsx_runtime.jsx)(BlockToolsBackCompat,{children:(0,jsx_runtime.jsx)(block_edit_context.Q2,{value:block_edit_context.FF,children:(0,jsx_runtime.jsx)(Root,{...settings})})})}function Items(_ref3){let{placeholder:placeholder,rootClientId:rootClientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout=defaultLayout}=_ref3;const{order:order,selectedBlocks:selectedBlocks,visibleBlocks:visibleBlocks}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetVisibleBlocks:__unstableGetVisibleBlocks}=select(store.h);return{order:getBlockOrder(rootClientId),selectedBlocks:getSelectedBlockClientIds(),visibleBlocks:__unstableGetVisibleBlocks()}}),[rootClientId]);return(0,jsx_runtime.jsxs)(LayoutProvider,{value:layout,children:[order.map((clientId=>(0,jsx_runtime.jsx)(context.ZP,{value:!visibleBlocks.has(clientId)&&!selectedBlocks.includes(clientId),children:(0,jsx_runtime.jsx)(block,{rootClientId:rootClientId,clientId:clientId})},clientId))),order.length<1&&placeholder,(0,jsx_runtime.jsx)(block_list_appender,{tagName:__experimentalAppenderTagName,rootClientId:rootClientId,renderAppender:renderAppender})]})}function block_list_BlockListItems(props){return(0,jsx_runtime.jsx)(context.ZP,{value:!1,children:(0,jsx_runtime.jsx)(Items,{...props})})}Root.displayName="Root",BlockList.displayName="BlockList",BlockList.__unstableElementContext=elementContext,Items.displayName="Items",block_list_BlockListItems.displayName="BlockListItems",BlockList.__docgenInfo={description:"",methods:[],displayName:"BlockList"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/index.js"]={name:"BlockList",docgenInfo:BlockList.__docgenInfo,path:"packages/block-editor/src/components/block-list/index.js"}),block_list_BlockListItems.__docgenInfo={description:"",methods:[],displayName:"BlockListItems"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/index.js"]={name:"BlockListItems",docgenInfo:block_list_BlockListItems.__docgenInfo,path:"packages/block-editor/src/components/block-list/index.js"});var serialize=__webpack_require__("./packages/element/build-module/serialize.js");function use_multi_selection_selector(select){const{isMultiSelecting:isMultiSelecting,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableIsFullySelected:__unstableIsFullySelected}=select(store.h);return{isMultiSelecting:isMultiSelecting(),multiSelectedBlockClientIds:getMultiSelectedBlockClientIds(),hasMultiSelection:hasMultiSelection(),selectedBlockClientId:getSelectedBlockClientId(),initialPosition:getSelectedBlocksInitialCaretPosition(),isFullSelection:__unstableIsFullySelected()}}function useMultiSelection(){const{initialPosition:initialPosition,isMultiSelecting:isMultiSelecting,multiSelectedBlockClientIds:multiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,selectedBlockClientId:selectedBlockClientId,isFullSelection:isFullSelection}=(0,use_select.Z)(use_multi_selection_selector,[]);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(null==initialPosition)return;if(!hasMultiSelection||isMultiSelecting)return;const{length:length}=multiSelectedBlockClientIds;length<2||isFullSelection&&(node.contentEditable=!0,node.focus(),defaultView.getSelection().removeAllRanges())}),[hasMultiSelection,isMultiSelecting,multiSelectedBlockClientIds,selectedBlockClientId,initialPosition,isFullSelection])}var is_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/is-vertical-edge.js"),is_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/is-horizontal-edge.js"),compute_caret_rect=__webpack_require__("./packages/dom/build-module/dom/compute-caret-rect.js"),is_rtl=__webpack_require__("./packages/dom/build-module/dom/is-rtl.js"),place_caret_at_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-vertical-edge.js");function getClosestTabbable(target,isReverse,containerElement,onlyVertical){let targetRect,focusableNodes=dom_build_module.T_.focusable.find(containerElement);return isReverse&&focusableNodes.reverse(),focusableNodes=focusableNodes.slice(focusableNodes.indexOf(target)+1),onlyVertical&&(targetRect=target.getBoundingClientRect()),focusableNodes.find((function isTabCandidate(node){if(1!==node.children.length||!function isInSameBlock(a,b){return a.closest(BLOCK_SELECTOR)===b.closest(BLOCK_SELECTOR)}(node,node.firstElementChild)||"true"!==node.firstElementChild.getAttribute("contenteditable")){if(!dom_build_module.T_.tabbable.isTabbableIndex(node))return!1;if(node.isContentEditable&&"true"!==node.contentEditable)return!1;if(onlyVertical){const nodeRect=node.getBoundingClientRect();if(nodeRect.left>=targetRect.right||nodeRect.right<=targetRect.left)return!1}return!0}}))}function useArrowNav(){const{getMultiSelectedBlocksStartClientId:getMultiSelectedBlocksStartClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getSettings:getSettings,hasMultiSelection:hasMultiSelection,__unstableIsFullySelected:__unstableIsFullySelected}=(0,use_select.Z)(store.h),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{let verticalRect;function onMouseDown(){verticalRect=null}function onKeyDown(event){if(event.defaultPrevented)return;const{keyCode:keyCode,target:target,shiftKey:shiftKey,ctrlKey:ctrlKey,altKey:altKey,metaKey:metaKey}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isReverse=isUp||isLeft,isHorizontal=isLeft||isRight,isVertical=isUp||isDown,isNav=isHorizontal||isVertical,hasModifier=shiftKey||ctrlKey||altKey||metaKey,isNavEdge=isVertical?is_vertical_edge.Z:is_horizontal_edge.Z,{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(!isNav)return;if(hasMultiSelection()){if(shiftKey)return;if(!__unstableIsFullySelected())return;return event.preventDefault(),void(isReverse?selectBlock(getMultiSelectedBlocksStartClientId()):selectBlock(getMultiSelectedBlocksEndClientId(),-1))}if(!function isNavigationCandidate(element,keyCode,hasModifier){if((keyCode===keycodes_build_module.UP||keyCode===keycodes_build_module.WV)&&!hasModifier)return!0;const{tagName:tagName}=element;if("INPUT"===tagName)return["button","checkbox","color","file","image","radio","reset","submit"].includes(element.getAttribute("type"));return"TEXTAREA"!==tagName}(target,keyCode,hasModifier))return;isVertical?verticalRect||(verticalRect=(0,compute_caret_rect.Z)(defaultView)):verticalRect=null;const isReverseDir=(0,is_rtl.Z)(target)?!isReverse:isReverse,{keepCaretInsideBlock:keepCaretInsideBlock}=getSettings();if(shiftKey)(function isClosestTabbableABlock(target,isReverse){const closestTabbable=getClosestTabbable(target,isReverse,node);return closestTabbable&&getBlockClientId(closestTabbable)})(target,isReverse)&&isNavEdge(target,isReverse)&&(node.contentEditable=!0,node.focus());else if(!isVertical||!(0,is_vertical_edge.Z)(target,isReverse)||altKey&&!(0,is_horizontal_edge.Z)(target,isReverseDir)||keepCaretInsideBlock){if(isHorizontal&&defaultView.getSelection().isCollapsed&&(0,is_horizontal_edge.Z)(target,isReverseDir)&&!keepCaretInsideBlock){const closestTabbable=getClosestTabbable(target,isReverseDir,node);(0,place_caret_at_horizontal_edge.Z)(closestTabbable,isReverse),event.preventDefault()}}else{const closestTabbable=getClosestTabbable(target,isReverse,node,!0);closestTabbable&&((0,place_caret_at_vertical_edge.Z)(closestTabbable,altKey?!isReverse:isReverse,altKey?void 0:verticalRect),event.preventDefault())}}return node.addEventListener("mousedown",onMouseDown),node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("mousedown",onMouseDown),node.removeEventListener("keydown",onKeyDown)}}),[])}var is_entirely_selected=__webpack_require__("./packages/dom/build-module/dom/is-entirely-selected.js");function useSelectAll(){const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,getBlockRootClientId:getBlockRootClientId}=(0,use_select.Z)(store.h),{multiSelect:multiSelect,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),isMatch=(0,keyboard_shortcuts_build_module.sx)();return(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(!isMatch("core/block-editor/select-all",event))return;const selectedClientIds=getSelectedBlockClientIds();if(selectedClientIds.length<2&&!(0,is_entirely_selected.Z)(event.target))return;event.preventDefault();const[firstSelectedClientId]=selectedClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),blockClientIds=getBlockOrder(rootClientId);selectedClientIds.length!==blockClientIds.length?multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1]):rootClientId&&(node.ownerDocument.defaultView.getSelection().removeAllRanges(),selectBlock(rootClientId))}return node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("keydown",onKeyDown)}}),[])}function setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useDragSelection(){const{startMultiSelect:startMultiSelect,stopMultiSelect:stopMultiSelect}=(0,use_dispatch.Z)(store.h),{isSelectionEnabled:isSelectionEnabled,hasMultiSelection:hasMultiSelection,isDraggingBlocks:isDraggingBlocks}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;let anchorElement,rafId;function onMouseUp(){stopMultiSelect(),defaultView.removeEventListener("mouseup",onMouseUp),rafId=defaultView.requestAnimationFrame((()=>{if(hasMultiSelection())return;setContentEditableWrapper(node,!1);const selection=defaultView.getSelection();if(selection.rangeCount){const{commonAncestorContainer:commonAncestorContainer}=selection.getRangeAt(0);anchorElement.contains(commonAncestorContainer)&&anchorElement.focus()}}))}function onMouseLeave(_ref){let{buttons:buttons,target:target}=_ref;isDraggingBlocks()||1===buttons&&target.getAttribute("contenteditable")&&isSelectionEnabled()&&(anchorElement=ownerDocument.activeElement,startMultiSelect(),defaultView.addEventListener("mouseup",onMouseUp),setContentEditableWrapper(node,!0))}return node.addEventListener("mouseout",onMouseLeave),()=>{node.removeEventListener("mouseout",onMouseLeave),defaultView.removeEventListener("mouseup",onMouseUp),defaultView.cancelAnimationFrame(rafId)}}),[startMultiSelect,stopMultiSelect,isSelectionEnabled,hasMultiSelection])}function use_selection_observer_setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useSelectionObserver(){const{multiSelect:multiSelect,selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store.h),{getBlockParents:getBlockParents,getBlockSelectionStart:getBlockSelectionStart}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;function onSelectionChange(event){const selection=defaultView.getSelection();if(!selection.rangeCount)return;const isClickShift=event.shiftKey&&"mouseup"===event.type;if(selection.isCollapsed&&!isClickShift)return void use_selection_observer_setContentEditableWrapper(node,!1);let startClientId=getBlockClientId(function extractSelectionStartNode(selection){const{anchorNode:anchorNode,anchorOffset:anchorOffset}=selection;return anchorNode.nodeType===anchorNode.TEXT_NODE||0===anchorOffset?anchorNode:anchorNode.childNodes[anchorOffset-1]}(selection)),endClientId=getBlockClientId(function extractSelectionEndNode(selection){const{focusNode:focusNode,focusOffset:focusOffset}=selection;return focusNode.nodeType===focusNode.TEXT_NODE||focusOffset===focusNode.childNodes.length?focusNode:focusNode.childNodes[focusOffset]}(selection));if(isClickShift){const selectedClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target),focusNodeIsNonSelectable=clickedClientId!==endClientId;(startClientId===endClientId&&selection.isCollapsed||!endClientId||focusNodeIsNonSelectable)&&(endClientId=clickedClientId),startClientId!==selectedClientId&&(startClientId=selectedClientId)}if(void 0===startClientId&&void 0===endClientId)return void use_selection_observer_setContentEditableWrapper(node,!1);if(startClientId===endClientId)selectBlock(startClientId);else{const startPath=[...getBlockParents(startClientId),startClientId],endPath=[...getBlockParents(endClientId),endClientId],depth=function findDepth(a,b){let depth=0;for(;a[depth]===b[depth];)depth++;return depth}(startPath,endPath);multiSelect(startPath[depth],endPath[depth])}}function addListeners(){ownerDocument.addEventListener("selectionchange",onSelectionChange),defaultView.addEventListener("mouseup",onSelectionChange)}function removeListeners(){ownerDocument.removeEventListener("selectionchange",onSelectionChange),defaultView.removeEventListener("mouseup",onSelectionChange)}function resetListeners(){removeListeners(),addListeners()}return addListeners(),node.addEventListener("focusin",resetListeners),()=>{removeListeners(),node.removeEventListener("focusin",resetListeners)}}),[multiSelect,selectBlock,selectionChange,getBlockParents])}function useClickSelection(){const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),{isSelectionEnabled:isSelectionEnabled,getBlockSelectionStart:getBlockSelectionStart,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){if(!isSelectionEnabled()||0!==event.button)return;const startClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target);event.shiftKey?startClientId!==clickedClientId&&(node.contentEditable=!0,node.focus()):hasMultiSelection()&&selectBlock(clickedClientId)}return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)}}),[selectBlock,isSelectionEnabled,getBlockSelectionStart,hasMultiSelection])}function useInput(){const{__unstableIsFullySelected:__unstableIsFullySelected,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableIsSelectionMergeable:__unstableIsSelectionMergeable,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),{replaceBlocks:replaceBlocks,__unstableSplitSelection:__unstableSplitSelection,removeBlocks:removeBlocks,__unstableDeleteSelection:__unstableDeleteSelection,__unstableExpandSelection:__unstableExpandSelection}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onBeforeInput(event){var _event$inputType;hasMultiSelection()&&null!==(_event$inputType=event.inputType)&&void 0!==_event$inputType&&_event$inputType.startsWith("format")&&event.preventDefault()}function onKeyDown(event){event.defaultPrevented||hasMultiSelection()&&(event.keyCode===keycodes_build_module.K5?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?replaceBlocks(getSelectedBlockClientIds(),(0,blocks_build_module.j4)((0,blocks_build_module.UT)())):__unstableSplitSelection()):event.keyCode===keycodes_build_module.ZH||event.keyCode===keycodes_build_module.yY?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?removeBlocks(getSelectedBlockClientIds()):__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):__unstableExpandSelection()):1!==event.key.length||event.metaKey||event.ctrlKey||(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges())))}function onCompositionStart(event){hasMultiSelection()&&(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection():(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()))}return node.addEventListener("beforeinput",onBeforeInput),node.addEventListener("keydown",onKeyDown),node.addEventListener("compositionstart",onCompositionStart),()=>{node.removeEventListener("beforeinput",onBeforeInput),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("compositionstart",onCompositionStart)}}),[])}function useWritingFlow(){const[before,ref,after]=function useTabNav(){const container=(0,react.useRef)(),focusCaptureBeforeRef=(0,react.useRef)(),focusCaptureAfterRef=(0,react.useRef)(),lastFocus=(0,react.useRef)(),{hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getBlockCount:getBlockCount}=(0,use_select.Z)(store.h),{setNavigationMode:setNavigationMode}=(0,use_dispatch.Z)(store.h),focusCaptureTabIndex=(0,use_select.Z)((select=>select(store.h).isNavigationMode()),[])?void 0:"0",noCapture=(0,react.useRef)();function onFocusCapture(event){if(noCapture.current)noCapture.current=null;else if(hasMultiSelection())container.current.focus();else if(getSelectedBlockClientId())lastFocus.current.focus();else{setNavigationMode(!0);const action=event.target.compareDocumentPosition(container.current)&event.target.DOCUMENT_POSITION_FOLLOWING?"findNext":"findPrevious";dom_build_module.T_.tabbable[action](event.target).focus()}}const before=(0,jsx_runtime.jsx)("div",{ref:focusCaptureBeforeRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),after=(0,jsx_runtime.jsx)("div",{ref:focusCaptureAfterRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),ref=(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(event.defaultPrevented)return;if(event.keyCode===keycodes_build_module.hY)return event.preventDefault(),void setNavigationMode(!0);if(event.keyCode!==keycodes_build_module.Mf)return;const isShift=event.shiftKey,direction=isShift?"findPrevious":"findNext";if(!hasMultiSelection()&&!getSelectedBlockClientId())return void(event.target===node&&setNavigationMode(!0));if(((0,is_form_element.Z)(event.target)||event.target.getAttribute("data-block")===getSelectedBlockClientId())&&(0,is_form_element.Z)(dom_build_module.T_.tabbable[direction](event.target)))return;const next=isShift?focusCaptureBeforeRef:focusCaptureAfterRef;noCapture.current=!0,next.current.focus({preventScroll:!0})}function onFocusOut(event){lastFocus.current=event.target;const{ownerDocument:ownerDocument}=node;event.relatedTarget||ownerDocument.activeElement!==ownerDocument.body||0!==getBlockCount()||node.focus()}function preventScrollOnTab(event){var _event$target;if(event.keyCode!==keycodes_build_module.Mf)return;if("region"===(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.getAttribute("role")))return;if(container.current===event.target)return;const direction=event.shiftKey?"findPrevious":"findNext",target=dom_build_module.T_.tabbable[direction](event.target);target!==focusCaptureBeforeRef.current&&target!==focusCaptureAfterRef.current||(event.preventDefault(),target.focus({preventScroll:!0}))}const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;return defaultView.addEventListener("keydown",preventScrollOnTab),node.addEventListener("keydown",onKeyDown),node.addEventListener("focusout",onFocusOut),()=>{defaultView.removeEventListener("keydown",preventScrollOnTab),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("focusout",onFocusOut)}}),[]);return[before,(0,use_merge_refs.Z)([container,ref]),after]}(),hasMultiSelection=(0,use_select.Z)((select=>select(store.h).hasMultiSelection()),[]);return[before,(0,use_merge_refs.Z)([ref,useInput(),useDragSelection(),useSelectionObserver(),useClickSelection(),useMultiSelection(),useSelectAll(),useArrowNav(),(0,use_ref_effect.Z)((node=>{if(node.tabIndex=0,node.contentEditable=hasMultiSelection,hasMultiSelection)return node.classList.add("has-multi-selection"),node.setAttribute("aria-label",(0,i18n_build_module.__)("Multiple selected blocks")),()=>{node.classList.remove("has-multi-selection"),node.removeAttribute("aria-label")}}),[hasMultiSelection])]),after]}function WritingFlow(_ref,forwardedRef){let{children:children,...props}=_ref;const[before,ref,after]=useWritingFlow();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[before,(0,jsx_runtime.jsx)("div",{...props,ref:(0,use_merge_refs.Z)([ref,forwardedRef]),className:classnames_default()(props.className,"block-editor-writing-flow"),children:children}),after]})}WritingFlow.__docgenInfo={description:"",methods:[],displayName:"WritingFlow"};(0,react.forwardRef)(WritingFlow);function useParsedAssets(html){return(0,react.useMemo)((()=>{const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children)}),[html])}function Iframe(_ref2){let{contentRef:contentRef,children:children,head:head,tabIndex:tabIndex=0,scale:scale=1,frameSize:frameSize=0,readonly:readonly,forwardedRef:ref,...props}=_ref2;const assets=(0,use_select.Z)((select=>select(store.h).getSettings().__unstableResolvedAssets),[]),[,forceRender]=(0,react.useReducer)((()=>({}))),[iframeDocument,setIframeDocument]=(0,react.useState)(),[bodyClasses,setBodyClasses]=(0,react.useState)([]),styles=useParsedAssets(null==assets?void 0:assets.styles),styleIds=styles.map((style=>style.id)),neededCompatStyles=function useCompatibilityStyles(){return(0,react.useMemo)((()=>Array.from(document.styleSheets).reduce(((accumulator,styleSheet)=>{try{styleSheet.cssRules}catch(e){return accumulator}const{ownerNode:ownerNode,cssRules:cssRules}=styleSheet;if(null===ownerNode)return accumulator;if(!cssRules)return accumulator;if("LINK"!==ownerNode.tagName)return accumulator;if("wp-reset-editor-styles-css"===ownerNode.id)return accumulator;if(function matchFromRules(_cssRules){return Array.from(_cssRules).find((_ref=>{let{selectorText:selectorText,conditionText:conditionText,cssRules:__cssRules}=_ref;return conditionText?matchFromRules(__cssRules):selectorText&&(selectorText.includes(".editor-styles-wrapper")||selectorText.includes(".wp-block"))}))}(cssRules)){accumulator.push(ownerNode.cloneNode(!0));const inlineCssId=ownerNode.id.replace("-css","-inline-css"),inlineCssElement=document.getElementById(inlineCssId);inlineCssElement&&accumulator.push(inlineCssElement.cloneNode(!0))}return accumulator}),[])),[])}().filter((style=>!styleIds.includes(style.id))),scripts=useParsedAssets(null==assets?void 0:assets.scripts),clearerRef=useBlockSelectionClearer(),[before,writingFlowRef,after]=useWritingFlow(),[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),setRef=(0,use_ref_effect.Z)((node=>{let iFrameDocument;function preventFileDropDefault(event){event.preventDefault()}function setDocumentIfReady(){const{contentDocument:contentDocument,ownerDocument:ownerDocument}=node,{readyState:readyState,documentElement:documentElement}=contentDocument;return iFrameDocument=contentDocument,("interactive"===readyState||"complete"===readyState)&&(function bubbleEvents(doc){const{defaultView:defaultView}=doc,{frameElement:frameElement}=defaultView;function bubbleEvent(event){const constructorName=Object.getPrototypeOf(event).constructor.name,Constructor=window[constructorName],init={};for(const key in event)init[key]=event[key];if(event instanceof defaultView.MouseEvent){const rect=frameElement.getBoundingClientRect();init.clientX+=rect.left,init.clientY+=rect.top}const newEvent=new Constructor(event.type,init);!frameElement.dispatchEvent(newEvent)&&event.preventDefault()}const eventTypes=["dragover"];for(const name of eventTypes)doc.addEventListener(name,bubbleEvent)}(contentDocument),setIframeDocument(contentDocument),clearerRef(documentElement),setBodyClasses(Array.from(ownerDocument.body.classList).filter((name=>name.startsWith("admin-color-")||name.startsWith("post-type-")||"wp-embed-responsive"===name))),contentDocument.dir=ownerDocument.dir,documentElement.removeChild(contentDocument.head),documentElement.removeChild(contentDocument.body),iFrameDocument.addEventListener("dragover",preventFileDropDefault,!1),iFrameDocument.addEventListener("drop",preventFileDropDefault,!1),!0)}return node.addEventListener("load",setDocumentIfReady),()=>{var _iFrameDocument,_iFrameDocument2;node.removeEventListener("load",setDocumentIfReady),null===(_iFrameDocument=iFrameDocument)||void 0===_iFrameDocument||_iFrameDocument.removeEventListener("dragover",preventFileDropDefault),null===(_iFrameDocument2=iFrameDocument)||void 0===_iFrameDocument2||_iFrameDocument2.removeEventListener("drop",preventFileDropDefault)}}),[]),headRef=(0,use_ref_effect.Z)((element=>{scripts.reduce(((promise,script)=>promise.then((()=>async function loadScript(head,_ref){let{id:id,src:src}=_ref;return new Promise(((resolve,reject)=>{const script=head.ownerDocument.createElement("script");script.id=id,src?(script.src=src,script.onload=()=>resolve(),script.onerror=()=>reject()):resolve(),head.appendChild(script)}))}(element,script)))),Promise.resolve()).finally((()=>{forceRender()}))}),[]),bodyRef=(0,use_merge_refs.Z)([contentRef,clearerRef,writingFlowRef]),styleAssets=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"html{height:auto!important;}body{margin:0}"}),[...styles,...neededCompatStyles].map((_ref3=>{let{tagName:tagName,href:href,id:id,rel:rel,media:media,textContent:textContent}=_ref3;const TagName=tagName.toLowerCase();return"style"===TagName?(0,react.createElement)(TagName,{id:id,key:id},textContent):(0,react.createElement)(TagName,{href:href,id:id,rel:rel,media:media,key:id})}))]}),srcDoc=(0,react.useMemo)((()=>"<!doctype html>"+(0,serialize.ZP)(styleAssets)),[]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tabIndex>=0&&before,(0,jsx_runtime.jsx)("iframe",{...props,ref:(0,use_merge_refs.Z)([ref,setRef]),tabIndex:tabIndex,srcDoc:srcDoc,title:(0,i18n_build_module.__)("Editor canvas"),children:iframeDocument&&(0,react_dom.createPortal)((0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("head",{ref:headRef,children:[styleAssets,head,(0,jsx_runtime.jsx)("style",{children:`html { transition: background 5s; ${frameSize?"background: #2f2f2f; transition: background 0s;":""} }`})]}),(0,jsx_runtime.jsxs)("body",{ref:bodyRef,className:classnames_default()("block-editor-iframe__body","editor-styles-wrapper",...bodyClasses),style:{marginBottom:`-${contentHeight*(1-scale)-frameSize}px`,marginTop:frameSize,transform:`scale( ${scale} )`},inert:readonly?"true":void 0,children:[contentResizeListener,(0,jsx_runtime.jsx)(style_provider.Z,{document:iframeDocument,children:children})]})]}),iframeDocument.documentElement)}),tabIndex>=0&&after]})}function IframeIfReady(props,ref){return(0,use_select.Z)((select=>select(store.h).getSettings().__internalIsInitialized),[])?(0,jsx_runtime.jsx)(Iframe,{...props,forwardedRef:ref}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/writing-flow/index.js"]={name:"WritingFlow",docgenInfo:WritingFlow.__docgenInfo,path:"packages/block-editor/src/components/writing-flow/index.js"}),IframeIfReady.displayName="IframeIfReady",IframeIfReady.__docgenInfo={description:"",methods:[],displayName:"IframeIfReady"};var iframe=(0,react.forwardRef)(IframeIfReady);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/iframe/index.js"]={name:"IframeIfReady",docgenInfo:IframeIfReady.__docgenInfo,path:"packages/block-editor/src/components/iframe/index.js"});var colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),traverse=__webpack_require__("./node_modules/traverse/index.js"),traverse_default=__webpack_require__.n(traverse);const commentre=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function parse(css,options){options=options||{};let lineno=1,column=1;function updatePosition(str){const lines=str.match(/\n/g);lines&&(lineno+=lines.length);const i=str.lastIndexOf("\n");column=~i?str.length-i:column+str.length}function position(){const start={line:lineno,column:column};return function(node){return node.position=new Position(start),whitespace(),node}}function Position(start){this.start=start,this.end={line:lineno,column:column},this.source=options.source}Position.prototype.content=css;const errorsList=[];function error(msg){const err=new Error(options.source+":"+lineno+":"+column+": "+msg);if(err.reason=msg,err.filename=options.source,err.line=lineno,err.column=column,err.source=css,!options.silent)throw err;errorsList.push(err)}function open(){return match(/^{\s*/)}function close(){return match(/^}/)}function rules(){let node;const accumulator=[];for(whitespace(),comments(accumulator);css.length&&"}"!==css.charAt(0)&&(node=atrule()||rule());)!1!==node&&(accumulator.push(node),comments(accumulator));return accumulator}function match(re){const m=re.exec(css);if(!m)return;const str=m[0];return updatePosition(str),css=css.slice(str.length),m}function whitespace(){match(/^\s*/)}function comments(accumulator){let c;for(accumulator=accumulator||[];c=comment();)!1!==c&&accumulator.push(c);return accumulator}function comment(){const pos=position();if("/"!==css.charAt(0)||"*"!==css.charAt(1))return;let i=2;for(;""!==css.charAt(i)&&("*"!==css.charAt(i)||"/"!==css.charAt(i+1));)++i;if(i+=2,""===css.charAt(i-1))return error("End of comment missing");const str=css.slice(2,i-2);return column+=2,updatePosition(str),css=css.slice(i),column+=2,pos({type:"comment",comment:str})}function selector(){const m=match(/^([^{]+)/);if(m)return trim(m[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(matched){return matched.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(s){return s.replace(/\u200C/g,",")}))}function declaration(){const pos=position();let prop=match(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!prop)return;if(prop=trim(prop[0]),!match(/^:\s*/))return error("property missing ':'");const val=match(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),ret=pos({type:"declaration",property:prop.replace(commentre,""),value:val?trim(val[0]).replace(commentre,""):""});return match(/^[;\s]*/),ret}function declarations(){const decls=[];if(!open())return error("missing '{'");let decl;for(comments(decls);decl=declaration();)!1!==decl&&(decls.push(decl),comments(decls));return close()?decls:error("missing '}'")}function keyframe(){let m;const vals=[],pos=position();for(;m=match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)vals.push(m[1]),match(/^,\s*/);if(vals.length)return pos({type:"keyframe",values:vals,declarations:declarations()})}const atimport=_compileAtrule("import"),atcharset=_compileAtrule("charset"),atnamespace=_compileAtrule("namespace");function _compileAtrule(name){const re=new RegExp("^@"+name+"\\s*([^;]+);");return function(){const pos=position(),m=match(re);if(!m)return;const ret={type:name};return ret[name]=m[1].trim(),pos(ret)}}function atrule(){if("@"===css[0])return function atkeyframes(){const pos=position();let m=match(/^@([-\w]+)?keyframes\s*/);if(!m)return;const vendor=m[1];if(m=match(/^([-\w]+)\s*/),!m)return error("@keyframes missing name");const name=m[1];if(!open())return error("@keyframes missing '{'");let frame,frames=comments();for(;frame=keyframe();)frames.push(frame),frames=frames.concat(comments());return close()?pos({type:"keyframes",name:name,vendor:vendor,keyframes:frames}):error("@keyframes missing '}'")}()||function atmedia(){const pos=position(),m=match(/^@media *([^{]+)/);if(!m)return;const media=trim(m[1]);if(!open())return error("@media missing '{'");const style=comments().concat(rules());return close()?pos({type:"media",media:media,rules:style}):error("@media missing '}'")}()||function atcustommedia(){const pos=position(),m=match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return pos({type:"custom-media",name:trim(m[1]),media:trim(m[2])})}()||function atsupports(){const pos=position(),m=match(/^@supports *([^{]+)/);if(!m)return;const supports=trim(m[1]);if(!open())return error("@supports missing '{'");const style=comments().concat(rules());return close()?pos({type:"supports",supports:supports,rules:style}):error("@supports missing '}'")}()||atimport()||atcharset()||atnamespace()||function atdocument(){const pos=position(),m=match(/^@([-\w]+)?document *([^{]+)/);if(!m)return;const vendor=trim(m[1]),doc=trim(m[2]);if(!open())return error("@document missing '{'");const style=comments().concat(rules());return close()?pos({type:"document",document:doc,vendor:vendor,rules:style}):error("@document missing '}'")}()||function atpage(){const pos=position();if(!match(/^@page */))return;const sel=selector()||[];if(!open())return error("@page missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"page",selectors:sel,declarations:decls}):error("@page missing '}'")}()||function athost(){const pos=position();if(!match(/^@host\s*/))return;if(!open())return error("@host missing '{'");const style=comments().concat(rules());return close()?pos({type:"host",rules:style}):error("@host missing '}'")}()||function atfontface(){const pos=position();if(!match(/^@font-face\s*/))return;if(!open())return error("@font-face missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"font-face",declarations:decls}):error("@font-face missing '}'")}()}function rule(){const pos=position(),sel=selector();return sel?(comments(),pos({type:"rule",selectors:sel,declarations:declarations()})):error("selector missing")}return addParent(function stylesheet(){const rulesList=rules();return{type:"stylesheet",stylesheet:{source:options.source,rules:rulesList,parsingErrors:errorsList}}}())}function trim(str){return str?str.replace(/^\s+|\s+$/g,""):""}function addParent(obj,parent){const isNode=obj&&"string"==typeof obj.type,childParent=isNode?obj:parent;for(const k in obj){const value=obj[k];Array.isArray(value)?value.forEach((function(v){addParent(v,childParent)})):value&&"object"==typeof value&&addParent(value,childParent)}return isNode&&Object.defineProperty(obj,"parent",{configurable:!0,writable:!0,enumerable:!1,value:parent||null}),obj}var inherits_browser=__webpack_require__("./node_modules/inherits/inherits_browser.js"),inherits_browser_default=__webpack_require__.n(inherits_browser),compiler=Compiler;function Compiler(opts){this.options=opts||{}}Compiler.prototype.emit=function(str){return str},Compiler.prototype.visit=function(node){return this[node.type](node)},Compiler.prototype.mapVisit=function(nodes,delim){let buf="";delim=delim||"";for(let i=0,length=nodes.length;i<length;i++)buf+=this.visit(nodes[i]),delim&&i<length-1&&(buf+=this.emit(delim));return buf};var compress=compress_Compiler;function compress_Compiler(options){compiler.call(this,options)}inherits_browser_default()(compress_Compiler,compiler),compress_Compiler.prototype.compile=function(node){return node.stylesheet.rules.map(this.visit,this).join("")},compress_Compiler.prototype.comment=function(node){return this.emit("",node.position)},compress_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},compress_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},compress_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},compress_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit("{")+this.mapVisit(node.keyframes)+this.emit("}")},compress_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(node.values.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}")},compress_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", "):"";return this.emit("@page "+sel,node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face",node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},compress_Compiler.prototype.rule=function(node){const decls=node.declarations;return decls.length?this.emit(node.selectors.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}"):""},compress_Compiler.prototype.declaration=function(node){return this.emit(node.property+":"+node.value,node.position)+this.emit(";")};var identity=identity_Compiler;function identity_Compiler(options){options=options||{},compiler.call(this,options),this.indentation=options.indent}inherits_browser_default()(identity_Compiler,compiler),identity_Compiler.prototype.compile=function(node){return this.stylesheet(node)},identity_Compiler.prototype.stylesheet=function(node){return this.mapVisit(node.stylesheet.rules,"\n\n")},identity_Compiler.prototype.comment=function(node){return this.emit(this.indent()+"/*"+node.comment+"*/",node.position)},identity_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},identity_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},identity_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},identity_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.keyframes,"\n")+this.emit(this.indent(-1)+"}")},identity_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(this.indent())+this.emit(node.values.join(", "),node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},identity_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", ")+" ":"";return this.emit("@page "+sel,node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face ",node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},identity_Compiler.prototype.rule=function(node){const indent=this.indent(),decls=node.declarations;return decls.length?this.emit(node.selectors.map((function(s){return indent+s})).join(",\n"),node.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},identity_Compiler.prototype.declaration=function(node){return this.emit(this.indent())+this.emit(node.property+": "+node.value,node.position)+this.emit(";")},identity_Compiler.prototype.indent=function(level){return this.level=this.level||1,null!==level?(this.level+=level,""):Array(this.level).join(this.indentation||"  ")};var transform_styles_traverse=function traverseCSS(css,callback){try{const parsed=parse(css);return function stringify(node,options){return((options=options||{}).compress?new compress(options):new identity(options)).compile(node)}(traverse_default().map(parsed,(function(node){if(!node)return node;const updatedNode=callback(node);return this.update(updatedNode)})))}catch(err){return console.warn("Error while traversing the CSS: "+err),null}};function isValidURL(meta){return 0!==meta.value.indexOf("data:")&&0!==meta.value.indexOf("#")&&(!function isAbsolutePath(filePath){return/^\/(?!\/)/.test(filePath)}(meta.value)&&!function isRemotePath(filePath){return/^(?:https?:)?\/\//.test(filePath)}(meta.value))}function getResourcePath(str,baseURL){return new URL(str,baseURL).toString()}var url_rewrite=rootURL=>node=>{if("declaration"===node.type){const updatedURLs=function getURLs(value){const reg=/url\((\s*)(['"]?)(.+?)\2(\s*)\)/g;let match;const URLs=[];for(;null!==(match=reg.exec(value));){const meta={source:match[0],before:match[1],quote:match[2],value:match[3],after:match[4]};isValidURL(meta)&&URLs.push(meta)}return URLs}(node.value).map(function processURL(baseURL){return meta=>({...meta,newUrl:"url("+meta.before+meta.quote+getResourcePath(meta.value,baseURL)+meta.quote+meta.after+")"})}(rootURL));return{...node,value:(raw=node.value,URLs=updatedURLs,URLs.forEach((item=>{raw=raw.replace(item.source,item.newUrl)})),raw)}}var raw,URLs;return node};const IS_ROOT_TAG=/^(body|html|:root).*$/;var transforms_wrap=function(namespace){let ignore=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return node=>{const updateSelector=selector=>ignore.includes(selector.trim())?selector:selector.match(IS_ROOT_TAG)?selector.replace(/^(body|html|:root)/,namespace):namespace+" "+selector;return"rule"===node.type?{...node,selectors:node.selectors.map(updateSelector)}:node}};var transform_styles=function(styles){let wrapperClassName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.values(null!=styles?styles:[]).map((_ref=>{let{css:css,baseURL:baseURL}=_ref;const transforms=[];return wrapperClassName&&transforms.push(transforms_wrap(wrapperClassName)),baseURL&&transforms.push(url_rewrite(baseURL)),transforms.length?transform_styles_traverse(css,(0,compose.Z)(transforms)):css}))};function useDarkThemeBodyClassName(styles){return(0,react.useCallback)((node=>{if(!node)return;const{ownerDocument:ownerDocument}=node,{defaultView:defaultView,body:body}=ownerDocument,canvas=ownerDocument.querySelector(".editor-styles-wrapper");let backgroundColor;if(canvas)backgroundColor=defaultView.getComputedStyle(canvas,null).getPropertyValue("background-color");else{const tempCanvas=ownerDocument.createElement("div");tempCanvas.classList.add("editor-styles-wrapper"),body.appendChild(tempCanvas),backgroundColor=defaultView.getComputedStyle(tempCanvas,null).getPropertyValue("background-color"),body.removeChild(tempCanvas)}const colordBackgroundColor=(0,colord.Vi)(backgroundColor);colordBackgroundColor.luminance()>.5||0===colordBackgroundColor.alpha()?body.classList.remove("is-dark-theme"):body.classList.add("is-dark-theme")}),[styles])}function EditorStyles(_ref){let{styles:styles}=_ref;const transformedStyles=(0,react.useMemo)((()=>transform_styles(styles,".editor-styles-wrapper")),[styles]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{ref:useDarkThemeBodyClassName(styles)}),transformedStyles.map(((css,index)=>(0,jsx_runtime.jsx)("style",{children:css},index)))]})}(0,colord.l7)([names.Z,a11y.Z]),EditorStyles.__docgenInfo={description:"",methods:[],displayName:"EditorStyles"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/editor-styles/index.js"]={name:"EditorStyles",docgenInfo:EditorStyles.__docgenInfo,path:"packages/block-editor/src/components/editor-styles/index.js"});var components=__webpack_require__("./packages/block-editor/src/components/duotone/components.js");let MemoizedBlockList;function ScaledBlockPreview(_ref){let{viewportWidth:viewportWidth,containerWidth:containerWidth,minHeight:minHeight,additionalStyles:additionalStyles=[]}=_ref;viewportWidth||(viewportWidth=containerWidth);const[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),{styles:styles,duotone:duotone}=(0,use_select.Z)((select=>{var _settings$__experimen,_settings$__experimen2;const settings=select(store.h).getSettings();return{styles:settings.styles,duotone:null===(_settings$__experimen=settings.__experimentalFeatures)||void 0===_settings$__experimen||null===(_settings$__experimen2=_settings$__experimen.color)||void 0===_settings$__experimen2?void 0:_settings$__experimen2.duotone}}),[]),editorStyles=(0,react.useMemo)((()=>styles?[...styles,{css:"body{height:auto;overflow:hidden;border:none;padding:0;}",__unstableType:"presets"},...additionalStyles]:styles),[styles,additionalStyles]),svgFilters=(0,react.useMemo)((()=>{var _duotone$default,_duotone$theme;return[...null!==(_duotone$default=null==duotone?void 0:duotone.default)&&void 0!==_duotone$default?_duotone$default:[],...null!==(_duotone$theme=null==duotone?void 0:duotone.theme)&&void 0!==_duotone$theme?_duotone$theme:[]]}),[duotone]);MemoizedBlockList=MemoizedBlockList||(0,pure.Z)(BlockList);const scale=containerWidth/viewportWidth;return(0,jsx_runtime.jsx)(disabled.Z,{className:"block-editor-block-preview__content",style:{transform:`scale(${scale})`,height:contentHeight*scale,maxHeight:contentHeight>2e3?2e3*scale:void 0,minHeight:minHeight},children:(0,jsx_runtime.jsxs)(iframe,{head:(0,jsx_runtime.jsx)(EditorStyles,{styles:editorStyles}),contentRef:(0,use_ref_effect.Z)((bodyElement=>{const{ownerDocument:{documentElement:documentElement}}=bodyElement;documentElement.classList.add("block-editor-block-preview__content-iframe"),documentElement.style.position="absolute",documentElement.style.width="100%",bodyElement.style.boxSizing="border-box",bodyElement.style.position="absolute",bodyElement.style.width="100%"}),[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:viewportWidth,height:contentHeight,pointerEvents:"none",maxHeight:2e3,minHeight:0!==scale&&scale<1&&minHeight?minHeight/scale:minHeight},children:[contentResizeListener,svgFilters.map((preset=>(0,jsx_runtime.jsx)(components.DY,{preset:preset},preset.slug))),(0,jsx_runtime.jsx)(MemoizedBlockList,{renderAppender:!1})]})})}function AutoBlockPreview(props){const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.Z)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"relative",width:"100%",height:0},children:containerResizeListener}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-preview__container",children:!!containerWidth&&(0,jsx_runtime.jsx)(ScaledBlockPreview,{...props,containerWidth:containerWidth})})]})}function BlockPreview(_ref){let{blocks:blocks,viewportWidth:viewportWidth=1200,minHeight:minHeight,additionalStyles:additionalStyles=[],__experimentalMinHeight:__experimentalMinHeight,__experimentalPadding:__experimentalPadding}=_ref;__experimentalMinHeight&&(minHeight=__experimentalMinHeight,(0,build_module.Z)("The __experimentalMinHeight prop",{since:"6.2",version:"6.4",alternative:"minHeight"})),__experimentalPadding&&(additionalStyles=[...additionalStyles,{css:`body { padding: ${__experimentalPadding}px; }`}],(0,build_module.Z)("The __experimentalPadding prop of BlockPreview",{since:"6.2",version:"6.4",alternative:"additionalStyles"}));const originalSettings=(0,use_select.Z)((select=>select(store.h).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,__unstableIsPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]);return blocks&&0!==blocks.length?(0,jsx_runtime.jsx)(provider.jC,{value:renderedBlocks,settings:settings,children:(0,jsx_runtime.jsx)(AutoBlockPreview,{viewportWidth:viewportWidth,minHeight:minHeight,additionalStyles:additionalStyles})}):null}ScaledBlockPreview.displayName="ScaledBlockPreview",AutoBlockPreview.__docgenInfo={description:"",methods:[],displayName:"AutoBlockPreview"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-preview/auto.js"]={name:"AutoBlockPreview",docgenInfo:AutoBlockPreview.__docgenInfo,path:"packages/block-editor/src/components/block-preview/auto.js"}),BlockPreview.displayName="BlockPreview",BlockPreview.__docgenInfo={description:"",methods:[],displayName:"BlockPreview",props:{viewportWidth:{defaultValue:{value:"1200",computed:!1},required:!1},additionalStyles:{defaultValue:{value:"[]",computed:!1},required:!1}}};var block_preview=(0,react.memo)(BlockPreview);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-preview/index.js"]={name:"BlockPreview",docgenInfo:BlockPreview.__docgenInfo,path:"packages/block-editor/src/components/block-preview/index.js"})},"./packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return block_settings_dropdown}});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),react=__webpack_require__("./node_modules/react/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js"),use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js"),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),assert_is_defined=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function documentHasTextSelection(doc){(0,assert_is_defined.c)(doc.defaultView,"doc.defaultView");const selection=doc.defaultView.getSelection();(0,assert_is_defined.c)(selection,"selection");const range=selection.rangeCount?selection.getRangeAt(0):null;return!!range&&!range.collapsed}var is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_html_input_element=__webpack_require__("./packages/dom/build-module/dom/is-html-input-element.js");function documentHasUncollapsedSelection(doc){return documentHasTextSelection(doc)||!!doc.activeElement&&function inputFieldHasUncollapsedSelection(element){if(!(0,is_html_input_element.Z)(element)&&!(0,is_text_field.Z)(element))return!1;try{const{selectionStart:selectionStart,selectionEnd:selectionEnd}=element;return null===selectionStart||selectionStart!==selectionEnd}catch(error){return!0}}(doc.activeElement)}var strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),data_transfer=__webpack_require__("./packages/dom/build-module/data-transfer.js");var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function useNotifyCopy(){const{getBlockName:getBlockName}=(0,use_select.Z)(store.h),{getBlockType:getBlockType}=(0,use_select.Z)(build_module.h),{createSuccessNotice:createSuccessNotice}=(0,use_dispatch.Z)(notices_build_module.h);return(0,react.useCallback)(((eventType,selectedBlockClientIds)=>{let notice="";if(1===selectedBlockClientIds.length){var _getBlockType;const clientId=selectedBlockClientIds[0],title=null===(_getBlockType=getBlockType(getBlockName(clientId)))||void 0===_getBlockType?void 0:_getBlockType.title;notice="copy"===eventType?(0,i18n_build_module.gB)((0,i18n_build_module.__)('Copied "%s" to clipboard.'),title):(0,i18n_build_module.gB)((0,i18n_build_module.__)('Moved "%s" to clipboard.'),title)}else notice="copy"===eventType?(0,i18n_build_module.gB)((0,i18n_build_module._n)("Copied %d block to clipboard.","Copied %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length):(0,i18n_build_module.gB)((0,i18n_build_module._n)("Moved %d block to clipboard.","Moved %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length);createSuccessNotice(notice,{type:"snackbar"})}),[])}function useClipboardHandler(){const{getBlocksByClientId:getBlocksByClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,getSettings:getSettings,__unstableIsFullySelected:__unstableIsFullySelected,__unstableIsSelectionCollapsed:__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable:__unstableIsSelectionMergeable,__unstableGetSelectedBlocksWithPartialSelection:__unstableGetSelectedBlocksWithPartialSelection,canInsertBlockType:canInsertBlockType}=(0,use_select.Z)(store.h),{flashBlock:flashBlock,removeBlocks:removeBlocks,replaceBlocks:replaceBlocks,__unstableDeleteSelection:__unstableDeleteSelection,__unstableExpandSelection:__unstableExpandSelection,insertBlocks:insertBlocks}=(0,use_dispatch.Z)(store.h),notifyCopy=useNotifyCopy();return(0,use_ref_effect.Z)((node=>{function handler(event){const selectedBlockClientIds=getSelectedBlockClientIds();if(0===selectedBlockClientIds.length)return;if(!hasMultiSelection()){const{target:target}=event,{ownerDocument:ownerDocument}=target;if("copy"===event.type||"cut"===event.type?documentHasUncollapsedSelection(ownerDocument):function documentHasSelection(doc){return!!doc.activeElement&&((0,is_html_input_element.Z)(doc.activeElement)||(0,is_text_field.Z)(doc.activeElement)||documentHasTextSelection(doc))}(ownerDocument))return}if(!node.contains(event.target.ownerDocument.activeElement))return;const eventDefaultPrevented=event.defaultPrevented;event.preventDefault();const isSelectionMergeable=__unstableIsSelectionMergeable(),shouldHandleWholeBlocks=__unstableIsSelectionCollapsed()||__unstableIsFullySelected(),expandSelectionIsNeeded=!shouldHandleWholeBlocks&&!isSelectionMergeable;if("copy"===event.type||"cut"===event.type)if(1===selectedBlockClientIds.length&&flashBlock(selectedBlockClientIds[0]),expandSelectionIsNeeded)__unstableExpandSelection();else{let blocks;if(notifyCopy(event.type,selectedBlockClientIds),shouldHandleWholeBlocks)blocks=getBlocksByClientId(selectedBlockClientIds);else{const[head,tail]=__unstableGetSelectedBlocksWithPartialSelection();blocks=[head,...getBlocksByClientId(selectedBlockClientIds.slice(1,selectedBlockClientIds.length-1)),tail]}const wrapperBlockName=event.clipboardData.getData("__unstableWrapperBlockName");wrapperBlockName&&(blocks=(0,build_module.j4)(wrapperBlockName,JSON.parse(event.clipboardData.getData("__unstableWrapperBlockAttributes")),blocks));const serialized=(0,build_module.qC)(blocks);event.clipboardData.setData("text/plain",function toPlainText(html){html=html.replace(/<br>/g,"\n");return(0,strip_html.Z)(html).trim().replace(/\n\n+/g,"\n\n")}(serialized)),event.clipboardData.setData("text/html",serialized)}if("cut"===event.type)shouldHandleWholeBlocks&&!expandSelectionIsNeeded?removeBlocks(selectedBlockClientIds):__unstableDeleteSelection();else if("paste"===event.type){if(eventDefaultPrevented)return;const{__experimentalCanUserUseUnfilteredHTML:canUserUseUnfilteredHTML}=getSettings(),{plainText:plainText,html:html,files:files}=function getPasteEventData(_ref){let{clipboardData:clipboardData}=_ref,plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error1){try{html=clipboardData.getData("Text")}catch(error2){return}}const files=(0,data_transfer.f)(clipboardData);return files.length&&!function shouldDismissPastedFiles(files,html){if(html&&1===(null==files?void 0:files.length)&&0===files[0].type.indexOf("image/")){var _html$match;const IMAGE_TAG=/<\s*img\b/gi;if(1!==(null===(_html$match=html.match(IMAGE_TAG))||void 0===_html$match?void 0:_html$match.length))return!0;const IMG_WITH_LOCAL_SRC=/<\s*img\b[^>]*\bsrc="file:\/\//i;if(html.match(IMG_WITH_LOCAL_SRC))return!0}return!1}(files,html)?{files:files}:{html:html,plainText:plainText,files:[]}}(event);let blocks=[];if(files.length){const fromTransforms=(0,build_module.Xn)("from");blocks=files.reduce(((accumulator,file)=>{const transformation=(0,build_module.MC)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat()}else blocks=(0,build_module.ag)({HTML:html,plainText:plainText,mode:"BLOCKS",canUserUseUnfilteredHTML:canUserUseUnfilteredHTML});if(1===selectedBlockClientIds.length){const[selectedBlockClientId]=selectedBlockClientIds;if(blocks.every((block=>canInsertBlockType(block.name,selectedBlockClientId))))return void insertBlocks(blocks,void 0,selectedBlockClientId)}replaceBlocks(selectedBlockClientIds,blocks,blocks.length-1,-1)}}return node.ownerDocument.addEventListener("copy",handler),node.ownerDocument.addEventListener("cut",handler),node.ownerDocument.addEventListener("paste",handler),()=>{node.ownerDocument.removeEventListener("copy",handler),node.ownerDocument.removeEventListener("cut",handler),node.ownerDocument.removeEventListener("paste",handler)}}),[])}function CopyHandler(_ref){let{children:children}=_ref;return(0,jsx_runtime.jsx)("div",{ref:useClipboardHandler(),children:children})}CopyHandler.displayName="CopyHandler",CopyHandler.__docgenInfo={description:"",methods:[],displayName:"CopyHandler"};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/copy-handler/index.js"]={name:"CopyHandler",docgenInfo:CopyHandler.__docgenInfo,path:"packages/block-editor/src/components/copy-handler/index.js"});var use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),platform=__webpack_require__("./packages/element/build-module/platform.js");const styleSupportKeys=[...["typography.lineHeight","typography.fontSize","typography.__experimentalFontStyle","typography.__experimentalFontWeight","typography.__experimentalFontFamily","typography.__experimentalTextDecoration","typography.__experimentalTextTransform","typography.__experimentalLetterSpacing"],"__experimentalBorder","color","spacing"];const STYLE_ATTRIBUTES={align:nameOrType=>(0,build_module.zb)(nameOrType,"align"),borderColor:nameOrType=>function hasBorderSupport(nameOrType){let feature=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if("web"!==platform.Z.OS)return!1;const support=(0,build_module.Dx)(nameOrType,"__experimentalBorder");return!!(!0===support||("any"===feature?null!=support&&support.color||null!=support&&support.radius||null!=support&&support.width||null!=support&&support.style:null!=support&&support[feature]))}(nameOrType,"color"),backgroundColor:nameOrType=>{const colorSupport=(0,build_module.Dx)(nameOrType,"color");return colorSupport&&!1!==colorSupport.background},textColor:nameOrType=>{const colorSupport=(0,build_module.Dx)(nameOrType,"color");return colorSupport&&!1!==colorSupport.text},gradient:nameOrType=>{const colorSupport=(0,build_module.Dx)(nameOrType,"color");return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.gradients},className:nameOrType=>(0,build_module.zb)(nameOrType,"customClassName",!0),fontFamily:nameOrType=>(0,build_module.zb)(nameOrType,"typography.__experimentalFontFamily"),fontSize:nameOrType=>(0,build_module.zb)(nameOrType,"typography.fontSize"),layout:nameOrType=>(0,build_module.zb)(nameOrType,"__experimentalLayout"),style:nameOrType=>styleSupportKeys.some((key=>(0,build_module.zb)(nameOrType,key)))};function getStyleAttributes(sourceBlock,targetBlock){return Object.entries(STYLE_ATTRIBUTES).reduce(((attributes,_ref)=>{let[attributeKey,hasSupport]=_ref;return hasSupport(sourceBlock.name)&&hasSupport(targetBlock.name)&&(attributes[attributeKey]=sourceBlock.attributes[attributeKey]),attributes}),{})}function recursivelyUpdateBlockAttributes(targetBlocks,sourceBlocks,updateBlockAttributes){for(let index=0;index<Math.min(sourceBlocks.length,targetBlocks.length);index+=1)updateBlockAttributes(targetBlocks[index].clientId,getStyleAttributes(sourceBlocks[index],targetBlocks[index])),recursivelyUpdateBlockAttributes(targetBlocks[index].innerBlocks,sourceBlocks[index].innerBlocks,updateBlockAttributes)}function usePasteStyles(){const registry=(0,use_registry.Z)(),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),{createSuccessNotice:createSuccessNotice,createWarningNotice:createWarningNotice,createErrorNotice:createErrorNotice}=(0,use_dispatch.Z)(notices_build_module.h);return(0,react.useCallback)((async targetBlocks=>{let html="";try{if(!window.navigator.clipboard)return void createErrorNotice((0,i18n_build_module.__)("Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers."),{type:"snackbar"});html=await window.navigator.clipboard.readText()}catch(error){return void createErrorNotice((0,i18n_build_module.__)("Unable to paste styles. Please allow browser clipboard permissions before continuing."),{type:"snackbar"})}if(!html||!function hasSerializedBlocks(text){try{const blocks=(0,build_module.Qc)(text,{__unstableSkipMigrationLogs:!0,__unstableSkipAutop:!0});return 1!==blocks.length||"core/freeform"!==blocks[0].name}catch(err){return!1}}(html))return void createWarningNotice((0,i18n_build_module.__)("Unable to paste styles. Block styles couldn't be found within the copied content."),{type:"snackbar"});const copiedBlocks=(0,build_module.Qc)(html);if(1===copiedBlocks.length?registry.batch((()=>{recursivelyUpdateBlockAttributes(targetBlocks,targetBlocks.map((()=>copiedBlocks[0])),updateBlockAttributes)})):registry.batch((()=>{recursivelyUpdateBlockAttributes(targetBlocks,copiedBlocks,updateBlockAttributes)})),1===targetBlocks.length){var _getBlockType;const title=null===(_getBlockType=(0,build_module.ck)(targetBlocks[0].name))||void 0===_getBlockType?void 0:_getBlockType.title;createSuccessNotice((0,i18n_build_module.gB)((0,i18n_build_module.__)("Pasted styles to %s."),title),{type:"snackbar"})}else createSuccessNotice((0,i18n_build_module.gB)((0,i18n_build_module.__)("Pasted styles to %d blocks."),targetBlocks.length),{type:"snackbar"})}),[registry.batch,updateBlockAttributes,createSuccessNotice,createWarningNotice,createErrorNotice])}function BlockActions(_ref){let{clientIds:clientIds,children:children,__experimentalUpdateSelection:updateSelection}=_ref;const{canInsertBlockType:canInsertBlockType,getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canMoveBlocks:canMoveBlocks,canRemoveBlocks:canRemoveBlocks}=(0,use_select.Z)(store.h),{getDefaultBlockName:getDefaultBlockName,getGroupingBlockName:getGroupingBlockName}=(0,use_select.Z)(build_module.h),blocks=getBlocksByClientId(clientIds),rootClientId=getBlockRootClientId(clientIds[0]),canDuplicate=blocks.every((block=>!!block&&(0,build_module.zb)(block.name,"multiple",!0)&&canInsertBlockType(block.name,rootClientId))),canInsertDefaultBlock=canInsertBlockType(getDefaultBlockName(),rootClientId),canMove=canMoveBlocks(clientIds,rootClientId),canRemove=canRemoveBlocks(clientIds,rootClientId),{removeBlocks:removeBlocks,replaceBlocks:replaceBlocks,duplicateBlocks:duplicateBlocks,insertAfterBlock:insertAfterBlock,insertBeforeBlock:insertBeforeBlock,flashBlock:flashBlock,setBlockMovingClientId:setBlockMovingClientId,setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),notifyCopy=useNotifyCopy(),pasteStyles=usePasteStyles();return children({canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,rootClientId:rootClientId,blocks:blocks,onDuplicate:()=>duplicateBlocks(clientIds,updateSelection),onRemove:()=>removeBlocks(clientIds,updateSelection),onInsertBefore(){const clientId=Array.isArray(clientIds)?clientIds[0]:clientId;insertBeforeBlock(clientId)},onInsertAfter(){const clientId=Array.isArray(clientIds)?clientIds[clientIds.length-1]:clientId;insertAfterBlock(clientId)},onMoveTo(){setNavigationMode(!0),selectBlock(clientIds[0]),setBlockMovingClientId(clientIds[0])},onGroup(){if(!blocks.length)return;const groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.m4)(blocks,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)},onUngroup(){if(!blocks.length)return;const innerBlocks=blocks[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)},onCopy(){const selectedBlockClientIds=blocks.map((_ref2=>{let{clientId:clientId}=_ref2;return clientId}));1===blocks.length&&flashBlock(selectedBlockClientIds[0]),notifyCopy("copy",selectedBlockClientIds)},async onPasteStyles(){await pasteStyles(blocks)}})}var block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js");const noop=()=>{};function BlockModeToggle(_ref){let{blockType:blockType,mode:mode,onToggleMode:onToggleMode,small:small=!1,isCodeEditingEnabled:isCodeEditingEnabled=!0}=_ref;if(!blockType||!(0,build_module.zb)(blockType,"html",!0)||!isCodeEditingEnabled)return null;const label="visual"===mode?(0,i18n_build_module.__)("Edit as HTML"):(0,i18n_build_module.__)("Edit visually");return(0,jsx_runtime.jsx)(menu_item.Z,{onClick:onToggleMode,children:!small&&label})}BlockModeToggle.displayName="BlockModeToggle",BlockModeToggle.__docgenInfo={description:"",methods:[],displayName:"BlockModeToggle",props:{small:{defaultValue:{value:"false",computed:!1},required:!1},isCodeEditingEnabled:{defaultValue:{value:"true",computed:!1},required:!1}}};var block_mode_toggle=(0,compose.Z)([(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlock:getBlock,getBlockMode:getBlockMode,getSettings:getSettings}=select(store.h),block=getBlock(clientId),isCodeEditingEnabled=getSettings().codeEditingEnabled;return{mode:getBlockMode(clientId),blockType:block?(0,build_module.ck)(block.name):null,isCodeEditingEnabled:isCodeEditingEnabled}})),(0,with_dispatch.Z)(((dispatch,_ref3)=>{let{onToggle:onToggle=noop,clientId:clientId}=_ref3;return{onToggleMode(){dispatch(store.h).toggleBlockMode(clientId),onToggle()}}}))])(BlockModeToggle);function BlockConvertButton(_ref){let{shouldRender:shouldRender,onClick:onClick,small:small}=_ref;if(!shouldRender)return null;const label=(0,i18n_build_module.__)("Convert to Blocks");return(0,jsx_runtime.jsx)(menu_item.Z,{onClick:onClick,children:!small&&label})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js"]={name:"BlockModeToggle",docgenInfo:BlockModeToggle.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js"}),BlockConvertButton.displayName="BlockConvertButton",BlockConvertButton.__docgenInfo={description:"",methods:[],displayName:"BlockConvertButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-convert-button.js"]={name:"BlockConvertButton",docgenInfo:BlockConvertButton.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-convert-button.js"});var block_html_convert_button=(0,compose.Z)((0,with_select.Z)(((select,_ref)=>{let{clientId:clientId}=_ref;const block=select(store.h).getBlock(clientId);return{block:block,shouldRender:block&&"core/html"===block.name}})),(0,with_dispatch.Z)(((dispatch,_ref2)=>{let{block:block}=_ref2;return{onClick:()=>dispatch(store.h).replaceBlocks(block.clientId,(0,build_module.AF)({HTML:(0,build_module.Jo)(block)}))}})))(BlockConvertButton),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const{Fill:__unstableBlockSettingsMenuFirstItem,Slot:Slot}=(0,slot_fill.up)("__unstableBlockSettingsMenuFirstItem");__unstableBlockSettingsMenuFirstItem.Slot=Slot;var block_settings_menu_first_item=__unstableBlockSettingsMenuFirstItem,style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js");function ConvertToGroupButton(_ref){let{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName,onClose:onClose=(()=>{})}=_ref;const{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store.h);return isGroupable||isUngroupable?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isGroupable&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:()=>{(()=>{const newBlocks=(0,build_module.m4)(blocksSelection,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)})(),onClose()},children:(0,i18n_build_module._x)("Group","verb")}),isUngroupable&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:()=>{(()=>{const innerBlocks=blocksSelection[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)})(),onClose()},children:(0,i18n_build_module._x)("Ungroup","Ungrouping blocks from within a Group block back into individual blocks within the Editor ")})]}):null}ConvertToGroupButton.__docgenInfo={description:"",methods:[],displayName:"ConvertToGroupButton",props:{onClose:{defaultValue:{value:"() => {}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/convert-to-group-buttons/index.js"]={name:"ConvertToGroupButton",docgenInfo:ConvertToGroupButton.__docgenInfo,path:"packages/block-editor/src/components/convert-to-group-buttons/index.js"});var use_convert_to_group_button_props=__webpack_require__("./packages/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js"),use_block_lock=__webpack_require__("./packages/block-editor/src/components/block-lock/use-block-lock.js"),unlock=__webpack_require__("./packages/icons/build-module/library/unlock.js"),lock_outline=__webpack_require__("./packages/icons/build-module/library/lock-outline.js"),modal=__webpack_require__("./packages/block-editor/src/components/block-lock/modal.js");function BlockLockMenuItem(_ref){let{clientId:clientId}=_ref;const{canLock:canLock,isLocked:isLocked}=(0,use_block_lock.Z)(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);if(!canLock)return null;const label=isLocked?(0,i18n_build_module.__)("Unlock"):(0,i18n_build_module.__)("Lock");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.Z,{icon:isLocked?unlock.Z:lock_outline.Z,onClick:toggleModal,children:label}),isModalOpen&&(0,jsx_runtime.jsx)(modal.Z,{clientId:clientId,onClose:toggleModal})]})}BlockLockMenuItem.__docgenInfo={description:"",methods:[],displayName:"BlockLockMenuItem"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/menu-item.js"]={name:"BlockLockMenuItem",docgenInfo:BlockLockMenuItem.__docgenInfo,path:"packages/block-editor/src/components/block-lock/menu-item.js"});const{Fill:Fill,Slot:block_settings_menu_controls_Slot}=(0,slot_fill.up)("BlockSettingsMenuControls"),BlockSettingsMenuControlsSlot=_ref=>{let{fillProps:fillProps,clientIds:clientIds=null,__unstableDisplayLocation:__unstableDisplayLocation}=_ref;const{selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds,canRemove:canRemove}=(0,use_select.Z)((select=>{const{getBlockNamesByClientId:getBlockNamesByClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,canRemoveBlocks:canRemoveBlocks}=select(store.h),ids=null!==clientIds?clientIds:getSelectedBlockClientIds();return{selectedBlocks:getBlockNamesByClientId(ids),selectedClientIds:ids,canRemove:canRemoveBlocks(ids)}}),[clientIds]),{canLock:canLock}=(0,use_block_lock.Z)(selectedClientIds[0]),showLockButton=1===selectedClientIds.length&&canLock,convertToGroupButtonProps=(0,use_convert_to_group_button_props.Z)(),{isGroupable:isGroupable,isUngroupable:isUngroupable}=convertToGroupButtonProps,showConvertToGroupButton=(isGroupable||isUngroupable)&&canRemove;return(0,jsx_runtime.jsx)(block_settings_menu_controls_Slot,{fillProps:{...fillProps,__unstableDisplayLocation:__unstableDisplayLocation,selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds},children:fills=>!(null!=fills&&fills.length)>0&&!showConvertToGroupButton&&!showLockButton?null:(0,jsx_runtime.jsxs)(menu_group.Z,{children:[showLockButton&&(0,jsx_runtime.jsx)(BlockLockMenuItem,{clientId:selectedClientIds[0]}),fills,showConvertToGroupButton&&(0,jsx_runtime.jsx)(ConvertToGroupButton,{...convertToGroupButtonProps,onClose:null==fillProps?void 0:fillProps.onClose})]})})};function BlockSettingsMenuControls(_ref2){let{...props}=_ref2;return(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{...props})})}BlockSettingsMenuControlsSlot.displayName="BlockSettingsMenuControlsSlot",BlockSettingsMenuControls.displayName="BlockSettingsMenuControls",BlockSettingsMenuControls.Slot=BlockSettingsMenuControlsSlot,BlockSettingsMenuControls.__docgenInfo={description:"@see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-settings-menu-controls/README.md\n\n@param {Object} props Fill props.\n@return {WPElement} Element.",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"{\n\tfillProps,\n\tclientIds = null,\n\t__unstableDisplayLocation,\n}",type:null}],returns:null}],displayName:"BlockSettingsMenuControls"};var block_settings_menu_controls=BlockSettingsMenuControls;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu-controls/index.js"]={name:"BlockSettingsMenuControls",docgenInfo:BlockSettingsMenuControls.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu-controls/index.js"});var use_block_display_title=__webpack_require__("./packages/block-editor/src/components/block-title/use-block-display-title.js"),utils=__webpack_require__("./packages/block-editor/src/components/block-toolbar/utils.js");const block_settings_dropdown_noop=()=>{},POPOVER_PROPS={className:"block-editor-block-settings-menu__popover",position:"bottom right",variant:"toolbar"};function CopyMenuItem(_ref){let{blocks:blocks,onCopy:onCopy,label:label}=_ref;const ref=(0,use_copy_to_clipboard.Z)((()=>(0,build_module.qC)(blocks)),onCopy),copyMenuItemBlocksLabel=blocks.length>1?(0,i18n_build_module.__)("Copy blocks"):(0,i18n_build_module.__)("Copy block"),copyMenuItemLabel=label||copyMenuItemBlocksLabel;return(0,jsx_runtime.jsx)(menu_item.Z,{ref:ref,children:copyMenuItemLabel})}function BlockSettingsDropdown(_ref2){let{clientIds:clientIds,__experimentalSelectBlock:__experimentalSelectBlock,children:children,__unstableDisplayLocation:__unstableDisplayLocation,...props}=_ref2;const blockClientIds=Array.isArray(clientIds)?clientIds:[clientIds],count=blockClientIds.length,firstBlockClientId=blockClientIds[0],{firstParentClientId:firstParentClientId,isDistractionFree:isDistractionFree,onlyBlock:onlyBlock,parentBlockType:parentBlockType,previousBlockClientId:previousBlockClientId,nextBlockClientId:nextBlockClientId,selectedBlockClientIds:selectedBlockClientIds}=(0,use_select.Z)((select=>{const{getBlockCount:getBlockCount,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,getSettings:getSettings,getBlockAttributes:getBlockAttributes}=select(store.h),{getActiveBlockVariation:getActiveBlockVariation}=select(build_module.h),_firstParentClientId=getBlockRootClientId(firstBlockClientId),parentBlockName=_firstParentClientId&&getBlockName(_firstParentClientId);return{firstParentClientId:_firstParentClientId,isDistractionFree:getSettings().isDistractionFree,onlyBlock:1===getBlockCount(_firstParentClientId),parentBlockType:_firstParentClientId&&(getActiveBlockVariation(parentBlockName,getBlockAttributes(_firstParentClientId))||(0,build_module.ck)(parentBlockName)),previousBlockClientId:getPreviousBlockClientId(firstBlockClientId),nextBlockClientId:getNextBlockClientId(firstBlockClientId),selectedBlockClientIds:getSelectedBlockClientIds()}}),[firstBlockClientId]),shortcuts=(0,use_select.Z)((select=>{const{getShortcutRepresentation:getShortcutRepresentation}=select(keyboard_shortcuts_build_module.h);return{duplicate:getShortcutRepresentation("core/block-editor/duplicate"),remove:getShortcutRepresentation("core/block-editor/remove"),insertAfter:getShortcutRepresentation("core/block-editor/insert-after"),insertBefore:getShortcutRepresentation("core/block-editor/insert-before")}}),[]),{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),updateSelectionAfterDuplicate=(0,react.useCallback)(__experimentalSelectBlock?async clientIdsPromise=>{const ids=await clientIdsPromise;ids&&ids[0]&&__experimentalSelectBlock(ids[0])}:block_settings_dropdown_noop,[__experimentalSelectBlock]),blockTitle=(0,use_block_display_title.Z)({clientId:firstBlockClientId,maximumLength:25}),updateSelectionAfterRemove=(0,react.useCallback)(__experimentalSelectBlock?()=>{const blockToSelect=previousBlockClientId||nextBlockClientId;blockToSelect&&selectedBlockClientIds.includes(firstBlockClientId)&&!selectedBlockClientIds.includes(blockToSelect)&&__experimentalSelectBlock(blockToSelect)}:block_settings_dropdown_noop,[__experimentalSelectBlock,previousBlockClientId,nextBlockClientId,selectedBlockClientIds]),label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Remove %s"),blockTitle),removeBlockLabel=1===count?label:(0,i18n_build_module.__)("Remove blocks"),selectParentButtonRef=(0,react.useRef)(),{gestures:showParentOutlineGestures}=(0,utils.o)({ref:selectParentButtonRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}}),parentBlockIsSelected=null==selectedBlockClientIds?void 0:selectedBlockClientIds.includes(firstParentClientId);return(0,jsx_runtime.jsx)(BlockActions,{clientIds:clientIds,__experimentalUpdateSelection:!__experimentalSelectBlock,children:_ref3=>{let{canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,onDuplicate:onDuplicate,onInsertAfter:onInsertAfter,onInsertBefore:onInsertBefore,onRemove:onRemove,onCopy:onCopy,onPasteStyles:onPasteStyles,onMoveTo:onMoveTo,blocks:blocks}=_ref3;return(0,jsx_runtime.jsx)(dropdown_menu.Z,{icon:more_vertical.Z,label:(0,i18n_build_module.__)("Options"),className:"block-editor-block-settings-menu",popoverProps:POPOVER_PROPS,noIcons:!0,...props,children:_ref4=>{let{onClose:onClose}=_ref4;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.Z,{children:[(0,jsx_runtime.jsx)(block_settings_menu_first_item.Slot,{fillProps:{onClose:onClose}}),!parentBlockIsSelected&&!!firstParentClientId&&(0,jsx_runtime.jsx)(menu_item.Z,{...showParentOutlineGestures,ref:selectParentButtonRef,icon:(0,jsx_runtime.jsx)(block_icon.Z,{icon:parentBlockType.icon}),onClick:()=>selectBlock(firstParentClientId),children:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Select parent block (%s)"),parentBlockType.title)}),1===count&&(0,jsx_runtime.jsx)(block_html_convert_button,{clientId:firstBlockClientId}),(0,jsx_runtime.jsx)(CopyMenuItem,{blocks:blocks,onCopy:onCopy}),canDuplicate&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onDuplicate,updateSelectionAfterDuplicate),shortcut:shortcuts.duplicate,children:(0,i18n_build_module.__)("Duplicate")}),canInsertDefaultBlock&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertBefore),shortcut:shortcuts.insertBefore,children:(0,i18n_build_module.__)("Insert before")}),(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertAfter),shortcut:shortcuts.insertAfter,children:(0,i18n_build_module.__)("Insert after")})]}),canMove&&!onlyBlock&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onMoveTo),children:(0,i18n_build_module.__)("Move to")}),1===count&&(0,jsx_runtime.jsx)(block_mode_toggle,{clientId:firstBlockClientId,onToggle:onClose})]}),(0,jsx_runtime.jsxs)(menu_group.Z,{children:[(0,jsx_runtime.jsx)(CopyMenuItem,{blocks:blocks,onCopy:onCopy,label:(0,i18n_build_module.__)("Copy styles")}),(0,jsx_runtime.jsx)(menu_item.Z,{onClick:onPasteStyles,children:(0,i18n_build_module.__)("Paste styles")})]}),(0,jsx_runtime.jsx)(block_settings_menu_controls.Slot,{fillProps:{onClose:onClose},clientIds:clientIds,__unstableDisplayLocation:__unstableDisplayLocation}),"function"==typeof children?children({onClose:onClose}):react.Children.map((child=>(0,react.cloneElement)(child,{onClose:onClose}))),canRemove&&(0,jsx_runtime.jsx)(menu_group.Z,{children:(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onRemove,updateSelectionAfterRemove),shortcut:shortcuts.remove,children:removeBlockLabel})})]})}})}})}CopyMenuItem.displayName="CopyMenuItem",BlockSettingsDropdown.displayName="BlockSettingsDropdown",BlockSettingsDropdown.__docgenInfo={description:"",methods:[],displayName:"BlockSettingsDropdown"};var block_settings_dropdown=BlockSettingsDropdown;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"]={name:"BlockSettingsDropdown",docgenInfo:BlockSettingsDropdown.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"})},"./packages/block-editor/src/components/block-title/use-block-display-title.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useBlockDisplayTitle}});var _wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_use_block_display_information__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/components/use-block-display-information/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");function useBlockDisplayTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;const{attributes:attributes,name:name,reusableBlockTitle:reusableBlockTitle}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes,__experimentalGetReusableBlockTitle:__experimentalGetReusableBlockTitle}=select(_store__WEBPACK_IMPORTED_MODULE_1__.h),blockName=getBlockName(clientId);if(!blockName)return{};const isReusable=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.vr)((0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.ck)(blockName));return{attributes:getBlockAttributes(clientId),name:blockName,reusableBlockTitle:isReusable&&__experimentalGetReusableBlockTitle(getBlockAttributes(clientId).ref)}}),[clientId]),blockInformation=(0,_use_block_display_information__WEBPACK_IMPORTED_MODULE_3__.Z)(clientId);if(!name||!blockInformation)return null;const blockType=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.ck)(name),blockLabel=blockType?(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Iu)(blockType,attributes,context):null,label=reusableBlockTitle||blockLabel,blockTitle=label&&label!==blockType.title?label:blockInformation.title;if(maximumLength&&maximumLength>0&&blockTitle.length>maximumLength){const omission="...";return blockTitle.slice(0,maximumLength-omission.length)+omission}return blockTitle}},"./packages/block-editor/src/components/block-toolbar/utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{o:function(){return useShowMoversGestures}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const{clearTimeout:clearTimeout,setTimeout:setTimeout}=window,noop=()=>{},DEBOUNCE_TIMEOUT=200;function useDebouncedShowMovers(_ref){let{ref:ref,isFocused:isFocused,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=noop}=_ref;const[showMovers,setShowMovers]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),timeoutRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),handleOnChange=nextIsFocused=>{null!=ref&&ref.current&&setShowMovers(nextIsFocused),onChange(nextIsFocused)},shouldHideMovers=()=>{const isHovered=(null==ref?void 0:ref.current)&&ref.current.matches(":hover");return!isFocused&&!isHovered},clearTimeoutRef=()=>{const timeout=timeoutRef.current;timeout&&clearTimeout&&clearTimeout(timeout)};return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{handleOnChange(!1),clearTimeoutRef()}),[]),{showMovers:showMovers,debouncedShowMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),showMovers||handleOnChange(!0)},debouncedHideMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),timeoutRef.current=setTimeout((()=>{shouldHideMovers()&&handleOnChange(!1)}),debounceTimeout)}}}function useShowMoversGestures(_ref2){let{ref:ref,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=noop}=_ref2;const[isFocused,setIsFocused]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{showMovers:showMovers,debouncedShowMovers:debouncedShowMovers,debouncedHideMovers:debouncedHideMovers}=useDebouncedShowMovers({ref:ref,debounceTimeout:debounceTimeout,isFocused:isFocused,onChange:onChange}),registerRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),isFocusedWithin=()=>(null==ref?void 0:ref.current)&&ref.current.contains(ref.current.ownerDocument.activeElement);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const node=ref.current,handleOnFocus=()=>{isFocusedWithin()&&(setIsFocused(!0),debouncedShowMovers())},handleOnBlur=()=>{isFocusedWithin()||(setIsFocused(!1),debouncedHideMovers())};return node&&!registerRef.current&&(node.addEventListener("focus",handleOnFocus,!0),node.addEventListener("blur",handleOnBlur,!0),registerRef.current=!0),()=>{node&&(node.removeEventListener("focus",handleOnFocus),node.removeEventListener("blur",handleOnBlur))}}),[ref,registerRef,setIsFocused,debouncedShowMovers,debouncedHideMovers]),{showMovers:showMovers,gestures:{onMouseMove:debouncedShowMovers,onMouseLeave:debouncedHideMovers}}}},"./packages/block-editor/src/components/block-types-list/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return block_types_list}});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/build-module/truncate/component.js"),keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js"),platform=__webpack_require__("./packages/keycodes/build-module/platform.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),CompositeItem=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),context=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/context.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterListboxItem(_ref,ref){let{isFirst:isFirst,as:Component,children:children,...props}=_ref;const state=(0,react.useContext)(context.Z);return(0,jsx_runtime.jsx)(CompositeItem.A,{ref:ref,state:state,role:"option",focusable:!0,...props,children:htmlProps=>{const propsWithTabIndex={...htmlProps,tabIndex:isFirst?0:htmlProps.tabIndex};return Component?(0,jsx_runtime.jsx)(Component,{...propsWithTabIndex,children:children}):"function"==typeof children?children(propsWithTabIndex):(0,jsx_runtime.jsx)(build_module_button.ZP,{...propsWithTabIndex,children:children})}})}InserterListboxItem.displayName="InserterListboxItem",InserterListboxItem.__docgenInfo={description:"",methods:[],displayName:"InserterListboxItem"};var inserter_listbox_item=(0,react.forwardRef)(InserterListboxItem);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/item.js"]={name:"InserterListboxItem",docgenInfo:InserterListboxItem.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/item.js"});var inserter_draggable_blocks=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js");function InserterListItem(_ref){let{className:className,isFirst:isFirst,item:item,onSelect:onSelect,onHover:onHover,isDraggable:isDraggable,...props}=_ref;const isDragging=(0,react.useRef)(!1),itemIconStyle=item.icon?{backgroundColor:item.icon.background,color:item.icon.foreground}:{},blocks=(0,react.useMemo)((()=>[(0,build_module.j4)(item.name,item.initialAttributes,(0,build_module.ne)(item.innerBlocks))]),[item.name,item.initialAttributes,item.initialAttributes]),isSynced=(0,build_module.vr)(item)||(0,build_module.zQ)(item);return(0,jsx_runtime.jsx)(inserter_draggable_blocks.Z,{isEnabled:isDraggable&&!item.disabled,blocks:blocks,icon:item.icon,children:_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,jsx_runtime.jsx)("div",{className:classnames_default()("block-editor-block-types-list__list-item",{"is-synced":isSynced}),draggable:draggable,onDragStart:event=>{isDragging.current=!0,onDragStart&&(onHover(null),onDragStart(event))},onDragEnd:event=>{isDragging.current=!1,onDragEnd&&onDragEnd(event)},children:(0,jsx_runtime.jsxs)(inserter_listbox_item,{isFirst:isFirst,className:classnames_default()("block-editor-block-types-list__item",className),disabled:item.isDisabled,onClick:event=>{event.preventDefault(),onSelect(item,(0,platform.R)()?event.metaKey:event.ctrlKey),onHover(null)},onKeyDown:event=>{const{keyCode:keyCode}=event;keyCode===keycodes_build_module.K5&&(event.preventDefault(),onSelect(item,(0,platform.R)()?event.metaKey:event.ctrlKey),onHover(null))},onMouseEnter:()=>{isDragging.current||onHover(item)},onMouseLeave:()=>onHover(null),...props,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-icon",style:itemIconStyle,children:(0,jsx_runtime.jsx)(block_icon.Z,{icon:item.icon,showColors:!0})}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,jsx_runtime.jsx)(component.Z,{numberOfLines:3,children:item.title})})]})})}})}InserterListItem.displayName="InserterListItem",InserterListItem.__docgenInfo={description:"",methods:[],displayName:"InserterListItem"};var inserter_list_item=(0,react.memo)(InserterListItem);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-list-item/index.js"]={name:"InserterListItem",docgenInfo:InserterListItem.__docgenInfo,path:"packages/block-editor/src/components/inserter-list-item/index.js"});var i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");function InserterListboxGroup(props,ref){const[shouldSpeak,setShouldSpeak]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{shouldSpeak&&(0,a11y_build_module.D)((0,i18n_build_module.__)("Use left and right arrow keys to move through blocks"))}),[shouldSpeak]),(0,jsx_runtime.jsx)("div",{ref:ref,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{setShouldSpeak(!0)},onBlur:event=>{!event.currentTarget.contains(event.relatedTarget)&&setShouldSpeak(!1)},...props})}InserterListboxGroup.displayName="InserterListboxGroup",InserterListboxGroup.__docgenInfo={description:"",methods:[],displayName:"InserterListboxGroup"};var group=(0,react.forwardRef)(InserterListboxGroup);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/group.js"]={name:"InserterListboxGroup",docgenInfo:InserterListboxGroup.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/group.js"});var CompositeGroup=__webpack_require__("./node_modules/reakit/es/Composite/CompositeGroup.js");function InserterListboxRow(props,ref){const state=(0,react.useContext)(context.Z);return(0,jsx_runtime.jsx)(CompositeGroup.E,{state:state,role:"presentation",ref:ref,...props})}InserterListboxRow.displayName="InserterListboxRow",InserterListboxRow.__docgenInfo={description:"",methods:[],displayName:"InserterListboxRow"};var inserter_listbox_row=(0,react.forwardRef)(InserterListboxRow);function chunk(array,size){const chunks=[];for(let i=0,j=array.length;i<j;i+=size)chunks.push(array.slice(i,i+size));return chunks}function BlockTypesList(_ref){let{items:items=[],onSelect:onSelect,onHover:onHover=(()=>{}),children:children,label:label,isDraggable:isDraggable=!0}=_ref;return(0,jsx_runtime.jsxs)(group,{className:"block-editor-block-types-list","aria-label":label,children:[chunk(items,3).map(((row,i)=>(0,jsx_runtime.jsx)(inserter_listbox_row,{children:row.map(((item,j)=>(0,jsx_runtime.jsx)(inserter_list_item,{item:item,className:(0,build_module.hq)(item.id),onSelect:onSelect,onHover:onHover,isDraggable:isDraggable&&!item.isDisabled,isFirst:0===i&&0===j},item.id)))},i))),children]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/row.js"]={name:"InserterListboxRow",docgenInfo:InserterListboxRow.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/row.js"}),BlockTypesList.displayName="BlockTypesList",BlockTypesList.__docgenInfo={description:"",methods:[],displayName:"BlockTypesList",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},onHover:{defaultValue:{value:"() => {}",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1}}};var block_types_list=BlockTypesList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-types-list/index.js"]={name:"BlockTypesList",docgenInfo:BlockTypesList.__docgenInfo,path:"packages/block-editor/src/components/block-types-list/index.js"})},"./packages/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useConvertToGroupButtonProps}});var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");function useConvertToGroupButtonProps(){const{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>{var _blocksSelection$;const{getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canInsertBlockType:canInsertBlockType,getSelectedBlockClientIds:getSelectedBlockClientIds}=select(_store__WEBPACK_IMPORTED_MODULE_1__.h),{getGroupingBlockName:getGroupingBlockName}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.h),_clientIds=getSelectedBlockClientIds(),_groupingBlockName=getGroupingBlockName(),groupingBlockAvailable=canInsertBlockType(_groupingBlockName,null!=_clientIds&&_clientIds.length?getBlockRootClientId(_clientIds[0]):void 0),_blocksSelection=getBlocksByClientId(_clientIds),isSingleGroupingBlock=1===_blocksSelection.length&&(null===(_blocksSelection$=_blocksSelection[0])||void 0===_blocksSelection$?void 0:_blocksSelection$.name)===_groupingBlockName;return{clientIds:_clientIds,isGroupable:groupingBlockAvailable&&_blocksSelection.length,isUngroupable:isSingleGroupingBlock&&!!_blocksSelection[0].innerBlocks.length,blocksSelection:_blocksSelection,groupingBlockName:_groupingBlockName}}),[]);return{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}}},"./packages/block-editor/src/components/duotone/components.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{DY:function(){return PresetDuotoneFilter}});var svg=__webpack_require__("./packages/primitives/build-module/svg/index.js"),colord=__webpack_require__("./node_modules/colord/index.mjs");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function DuotoneStylesheet(_ref){let{selector:selector,id:id}=_ref;const css=`\n${selector} {\n\tfilter: url( #${id} );\n}\n`;return(0,jsx_runtime.jsx)("style",{children:css})}function DuotoneUnsetStylesheet(_ref2){let{selector:selector}=_ref2;const css=`\n${selector} {\n\tfilter: none;\n}\n`;return(0,jsx_runtime.jsx)("style",{children:css})}function DuotoneFilter(_ref3){let{id:id,colors:colors}=_ref3;const values=function getValuesFromColors(){const values={r:[],g:[],b:[],a:[]};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((color=>{const rgbColor=(0,colord.Vi)(color).toRgb();values.r.push(rgbColor.r/255),values.g.push(rgbColor.g/255),values.b.push(rgbColor.b/255),values.a.push(rgbColor.a)})),values}(colors);return(0,jsx_runtime.jsx)(svg.Wj,{xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 0 0",width:"0",height:"0",focusable:"false",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"},children:(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsxs)("filter",{id:id,children:[(0,jsx_runtime.jsx)("feColorMatrix",{colorInterpolationFilters:"sRGB",type:"matrix",values:" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "}),(0,jsx_runtime.jsxs)("feComponentTransfer",{colorInterpolationFilters:"sRGB",children:[(0,jsx_runtime.jsx)("feFuncR",{type:"table",tableValues:values.r.join(" ")}),(0,jsx_runtime.jsx)("feFuncG",{type:"table",tableValues:values.g.join(" ")}),(0,jsx_runtime.jsx)("feFuncB",{type:"table",tableValues:values.b.join(" ")}),(0,jsx_runtime.jsx)("feFuncA",{type:"table",tableValues:values.a.join(" ")})]}),(0,jsx_runtime.jsx)("feComposite",{in2:"SourceGraphic",operator:"in"})]})})})}function PresetDuotoneFilter(_ref4){let{preset:preset}=_ref4;return(0,jsx_runtime.jsx)(DuotoneFilter,{id:`wp-duotone-${preset.slug}`,colors:preset.colors})}DuotoneStylesheet.displayName="DuotoneStylesheet",DuotoneUnsetStylesheet.displayName="DuotoneUnsetStylesheet",DuotoneFilter.displayName="DuotoneFilter",PresetDuotoneFilter.displayName="PresetDuotoneFilter",DuotoneStylesheet.__docgenInfo={description:"SVG and stylesheet needed for rendering the duotone filter.\n\n@param {Object} props          Duotone props.\n@param {string} props.selector Selector to apply the filter to.\n@param {string} props.id       Unique id for this duotone filter.\n\n@return {WPElement} Duotone element.",methods:[],displayName:"DuotoneStylesheet"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneStylesheet",docgenInfo:DuotoneStylesheet.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),DuotoneUnsetStylesheet.__docgenInfo={description:"Stylesheet for disabling a global styles duotone filter.\n\n@param {Object} props          Duotone props.\n@param {string} props.selector Selector to disable the filter for.\n\n@return {WPElement} Filter none style element.",methods:[],displayName:"DuotoneUnsetStylesheet"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneUnsetStylesheet",docgenInfo:DuotoneUnsetStylesheet.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),DuotoneFilter.__docgenInfo={description:"The SVG part of the duotone filter.\n\n@param {Object}   props        Duotone props.\n@param {string}   props.id     Unique id for this duotone filter.\n@param {string[]} props.colors Color strings from dark to light.\n\n@return {WPElement} Duotone SVG.",methods:[],displayName:"DuotoneFilter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneFilter",docgenInfo:DuotoneFilter.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),PresetDuotoneFilter.__docgenInfo={description:"SVG from a duotone preset\n\n@param {Object} props        Duotone props.\n@param {Object} props.preset Duotone preset settings.\n\n@return {WPElement} Duotone element.",methods:[],displayName:"PresetDuotoneFilter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"PresetDuotoneFilter",docgenInfo:PresetDuotoneFilter.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"})},"./packages/block-editor/src/components/height-control/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return HeightControl}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/base-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/unit-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/components/build-module/spacer/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/components/build-module/range-control/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_use_setting__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/components/use-setting/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const RANGE_CONTROL_CUSTOM_SETTINGS={px:{max:1e3,step:1},"%":{max:100,step:1},vw:{max:100,step:1},vh:{max:100,step:1},em:{max:50,step:.1},rem:{max:50,step:.1}};function HeightControl(_ref){var _units$,_RANGE_CONTROL_CUSTOM,_RANGE_CONTROL_CUSTOM2,_RANGE_CONTROL_CUSTOM3,_RANGE_CONTROL_CUSTOM4;let{onChange:onChange,label:label=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Height"),value:value}=_ref;const customRangeValue=parseFloat(value),units=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.nj)({availableUnits:(0,_use_setting__WEBPACK_IMPORTED_MODULE_3__.Z)("spacing.units")||["%","px","em","rem","vh","vw"]}),selectedUnit=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.YX)(value)),[value])[1]||(null===(_units$=units[0])||void 0===_units$?void 0:_units$.value)||"px";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("fieldset",{className:"block-editor-height-control",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.ZP.VisualLabel,{as:"legend",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_6__.Z,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_7__.Z,{isBlock:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_8__.ZP,{value:value,units:units,onChange:onChange,onUnitChange:newUnit=>{const[currentValue,currentUnit]=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.YX)(value);["em","rem"].includes(newUnit)&&"px"===currentUnit?onChange((currentValue/16).toFixed(2)+newUnit):["em","rem"].includes(currentUnit)&&"px"===newUnit?onChange(Math.round(16*currentValue)+newUnit):["vh","vw","%"].includes(newUnit)&&currentValue>100&&onChange(100+newUnit)},min:0,size:"__unstable-large"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_7__.Z,{isBlock:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_9__.Z,{marginX:2,marginBottom:0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_10__.Z,{value:customRangeValue,min:0,max:null!==(_RANGE_CONTROL_CUSTOM=null===(_RANGE_CONTROL_CUSTOM2=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM2?void 0:_RANGE_CONTROL_CUSTOM2.max)&&void 0!==_RANGE_CONTROL_CUSTOM?_RANGE_CONTROL_CUSTOM:100,step:null!==(_RANGE_CONTROL_CUSTOM3=null===(_RANGE_CONTROL_CUSTOM4=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM4?void 0:_RANGE_CONTROL_CUSTOM4.step)&&void 0!==_RANGE_CONTROL_CUSTOM3?_RANGE_CONTROL_CUSTOM3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},__nextHasNoMarginBottom:!0})})})]})]})}HeightControl.displayName="HeightControl",HeightControl.__docgenInfo={description:"",methods:[],displayName:"HeightControl",props:{label:{defaultValue:{value:"__( 'Height' )",computed:!0},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/height-control/index.js"]={name:"HeightControl",docgenInfo:HeightControl.__docgenInfo,path:"packages/block-editor/src/components/height-control/index.js"})},"./packages/block-editor/src/components/inserter-draggable-blocks/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/draggable/index.js"),_block_draggable_draggable_chip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/components/block-draggable/draggable-chip.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InserterDraggableBlocks=_ref=>{let{isEnabled:isEnabled,blocks:blocks,icon:icon,children:children,isPattern:isPattern}=_ref;const transferData={type:"inserter",blocks:blocks};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Z,{__experimentalTransferDataType:"wp-blocks",transferData:transferData,__experimentalDragComponent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_block_draggable_draggable_chip__WEBPACK_IMPORTED_MODULE_2__.Z,{count:blocks.length,icon:icon,isPattern:isPattern}),children:_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:isEnabled,onDragStart:isEnabled?onDraggableStart:void 0,onDragEnd:isEnabled?onDraggableEnd:void 0})}})};InserterDraggableBlocks.displayName="InserterDraggableBlocks",InserterDraggableBlocks.__docgenInfo={description:"",methods:[],displayName:"InserterDraggableBlocks"},__webpack_exports__.Z=InserterDraggableBlocks,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-draggable-blocks/index.js"]={name:"InserterDraggableBlocks",docgenInfo:InserterDraggableBlocks.__docgenInfo,path:"packages/block-editor/src/components/inserter-draggable-blocks/index.js"})},"./packages/block-editor/src/components/inserter-listbox/context.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){const InserterListboxContext=(0,__webpack_require__("./node_modules/react/index.js").createContext)();__webpack_exports__.Z=InserterListboxContext},"./packages/block-editor/src/components/inserter-listbox/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js"),_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/context.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterListbox(_ref){let{children:children}=_ref;const compositeState=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.u)({shift:!0,wrap:"horizontal"});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_context__WEBPACK_IMPORTED_MODULE_2__.Z.Provider,{value:compositeState,children:children})}InserterListbox.displayName="InserterListbox",InserterListbox.__docgenInfo={description:"",methods:[],displayName:"InserterListbox"},__webpack_exports__.ZP=InserterListbox,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/index.js"]={name:"InserterListbox",docgenInfo:InserterListbox.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/index.js"})},"./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");__webpack_exports__.Z=(rootClientId,onInsert)=>{const{categories:categories,collections:collections,items:items}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>{const{getInserterItems:getInserterItems}=select(_store__WEBPACK_IMPORTED_MODULE_1__.h),{getCategories:getCategories,getCollections:getCollections}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.h);return{categories:getCategories(),collections:getCollections(),items:getInserterItems(rootClientId)}}),[rootClientId]);return[items,categories,collections,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.useCallback)(((_ref,shouldFocusBlock)=>{let{name:name,initialAttributes:initialAttributes,innerBlocks:innerBlocks}=_ref;const insertedBlock=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.j4)(name,initialAttributes,(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.ne)(innerBlocks));onInsert(insertedBlock,void 0,shouldFocusBlock)}),[onInsert])]}},"./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/a11y/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/index.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js");__webpack_exports__.Z=function useInsertionPoint(_ref){let{rootClientId:rootClientId="",insertionIndex:insertionIndex,clientId:clientId,isAppender:isAppender,onSelect:onSelect,shouldFocusBlock:shouldFocusBlock=!0,selectBlockOnInsert:selectBlockOnInsert=!0}=_ref;const{getSelectedBlock:getSelectedBlock}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.Z)(_store__WEBPACK_IMPORTED_MODULE_3__.h),{destinationRootClientId:destinationRootClientId,destinationIndex:destinationIndex}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,getBlockOrder:getBlockOrder}=select(_store__WEBPACK_IMPORTED_MODULE_3__.h),selectedBlockClientId=getSelectedBlockClientId();let _destinationIndex,_destinationRootClientId=rootClientId;return void 0!==insertionIndex?_destinationIndex=insertionIndex:clientId?_destinationIndex=getBlockIndex(clientId):!isAppender&&selectedBlockClientId?(_destinationRootClientId=getBlockRootClientId(selectedBlockClientId),_destinationIndex=getBlockIndex(selectedBlockClientId)+1):_destinationIndex=getBlockOrder(_destinationRootClientId).length,{destinationRootClientId:_destinationRootClientId,destinationIndex:_destinationIndex}}),[rootClientId,insertionIndex,clientId,isAppender]),{replaceBlocks:replaceBlocks,insertBlocks:insertBlocks,showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.Z)(_store__WEBPACK_IMPORTED_MODULE_3__.h),onInsertBlocks=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_6__.useCallback)((function(blocks,meta){let shouldForceFocusBlock=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const selectedBlock=getSelectedBlock();!isAppender&&selectedBlock&&(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.ZP)(selectedBlock)?replaceBlocks(selectedBlock.clientId,blocks,null,shouldFocusBlock||shouldForceFocusBlock?0:null,meta):insertBlocks(blocks,destinationIndex,destinationRootClientId,selectBlockOnInsert,shouldFocusBlock||shouldForceFocusBlock?0:null,meta);const blockLength=Array.isArray(blocks)?blocks.length:1,message=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__._n)("%d block added.","%d blocks added.",blockLength),blockLength);(0,_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__.D)(message),onSelect&&onSelect(blocks)}),[isAppender,getSelectedBlock,replaceBlocks,insertBlocks,destinationRootClientId,destinationIndex,onSelect,shouldFocusBlock]),onToggleInsertionPoint=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_6__.useCallback)((show=>{show?showInsertionPoint(destinationRootClientId,destinationIndex):hideInsertionPoint()}),[showInsertionPoint,hideInsertionPoint,destinationRootClientId,destinationIndex]);return[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]}},"./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_notices__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/notices/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js");__webpack_exports__.Z=(onInsert,rootClientId)=>{const{patternCategories:patternCategories,patterns:patterns}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.Z)((select=>{const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getSettings:getSettings}=select(_store__WEBPACK_IMPORTED_MODULE_3__.h);return{patterns:__experimentalGetAllowedPatterns(rootClientId),patternCategories:getSettings().__experimentalBlockPatternCategories}}),[rootClientId]),{createSuccessNotice:createSuccessNotice}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.Z)(_wordpress_notices__WEBPACK_IMPORTED_MODULE_2__.h);return[patterns,patternCategories,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_6__.useCallback)(((pattern,blocks)=>{onInsert((null!=blocks?blocks:[]).map((block=>(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wm)(block))),pattern.name),createSuccessNotice((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Block pattern "%s" inserted.'),pattern.title),{type:"snackbar"})}),[])]}},"./packages/block-editor/src/components/inserter/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return inserter}});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),build_module=__webpack_require__("./packages/a11y/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),react=__webpack_require__("./node_modules/react/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),menu=__webpack_require__("./packages/block-editor/src/components/inserter/menu.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),search_results=__webpack_require__("./packages/block-editor/src/components/inserter/search-results.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function QuickInserter(_ref){let{onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.Z)({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes]=(0,use_block_types_state.Z)(destinationRootClientId,onInsertBlocks),[patterns]=(0,use_patterns_state.Z)(onInsertBlocks,destinationRootClientId),{setInserterIsOpened:setInserterIsOpened,insertionIndex:insertionIndex}=(0,use_select.Z)((select=>{const{getSettings:getSettings,getBlockIndex:getBlockIndex,getBlockCount:getBlockCount}=select(store.h),settings=getSettings(),index=getBlockIndex(clientId),blockCount=getBlockCount();return{setInserterIsOpened:settings.__experimentalSetIsInserterOpened,insertionIndex:-1===index?blockCount:index}}),[clientId]),showPatterns=patterns.length&&(!!filterValue||prioritizePatterns),showSearch=showPatterns&&patterns.length>6||blockTypes.length>6;(0,react.useEffect)((()=>{setInserterIsOpened&&setInserterIsOpened(!1)}),[setInserterIsOpened]);let maxBlockPatterns=0;return showPatterns&&(maxBlockPatterns=prioritizePatterns?4:2),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-inserter__quick-inserter",{"has-search":showSearch,"has-expand":setInserterIsOpened}),children:[showSearch&&(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:filterValue,onChange:value=>{setFilterValue(value)},label:(0,i18n_build_module.__)("Search for blocks and patterns"),placeholder:(0,i18n_build_module.__)("Search")}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-results",children:(0,jsx_runtime.jsx)(search_results.Z,{filterValue:filterValue,onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:6,isDraggable:!1,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert})}),setInserterIsOpened&&(0,jsx_runtime.jsx)(build_module_button.ZP,{className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{setInserterIsOpened({rootClientId:rootClientId,insertionIndex:insertionIndex,filterValue:filterValue})},"aria-label":(0,i18n_build_module.__)("Browse all. This will open the main inserter panel in the editor toolbar."),children:(0,i18n_build_module.__)("Browse all")})]})}QuickInserter.displayName="QuickInserter",QuickInserter.__docgenInfo={description:"",methods:[],displayName:"QuickInserter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/quick-inserter.js"]={name:"QuickInserter",docgenInfo:QuickInserter.__docgenInfo,path:"packages/block-editor/src/components/inserter/quick-inserter.js"});const defaultRenderToggle=_ref=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,toggleProps:toggleProps={},prioritizePatterns:prioritizePatterns}=_ref;label=hasSingleBlockType?(0,i18n_build_module.gB)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):prioritizePatterns?(0,i18n_build_module.__)("Add pattern"):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");const{onClick:onClick,...rest}=toggleProps;return(0,jsx_runtime.jsx)(build_module_button.ZP,{icon:plus.Z,label:label,tooltipPosition:"bottom",onClick:function handleClick(event){onToggle&&onToggle(event),onClick&&onClick(event)},className:"block-editor-inserter__toggle","aria-haspopup":!hasSingleBlockType&&"true","aria-expanded":!hasSingleBlockType&&isOpen,disabled:disabled,...rest})};defaultRenderToggle.displayName="defaultRenderToggle";class Inserter extends react.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(isOpen){const{onToggle:onToggle}=this.props;onToggle&&onToggle(isOpen)}renderToggle(_ref2){let{onToggle:onToggle,isOpen:isOpen}=_ref2;const{disabled:disabled,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,hasItems:hasItems,renderToggle:renderToggle=defaultRenderToggle,prioritizePatterns:prioritizePatterns}=this.props;return renderToggle({onToggle:onToggle,isOpen:isOpen,disabled:disabled||!hasItems,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,prioritizePatterns:prioritizePatterns})}renderContent(_ref3){let{onClose:onClose}=_ref3;const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,__experimentalIsQuick:isQuick,prioritizePatterns:prioritizePatterns,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=this.props;return isQuick?(0,jsx_runtime.jsx)(QuickInserter,{onSelect:blocks=>{const firstBlock=Array.isArray(blocks)&&null!=blocks&&blocks.length?blocks[0]:blocks;onSelectOrClose&&"function"==typeof onSelectOrClose&&onSelectOrClose(firstBlock),onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}):(0,jsx_runtime.jsx)(menu.Z,{onSelect:()=>{onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,prioritizePatterns:prioritizePatterns})}render(){const{position:position,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,insertOnlyAllowedBlock:insertOnlyAllowedBlock,__experimentalIsQuick:isQuick,onSelectOrClose:onSelectOrClose}=this.props;return hasSingleBlockType||directInsertBlock?this.renderToggle({onToggle:insertOnlyAllowedBlock}):(0,jsx_runtime.jsx)(dropdown.Z,{className:"block-editor-inserter",contentClassName:classnames_default()("block-editor-inserter__popover",{"is-quick":isQuick}),popoverProps:{position:position},onToggle:this.onToggle,expandOnMobile:!0,headerTitle:(0,i18n_build_module.__)("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:onSelectOrClose})}}Inserter.displayName="Inserter",Inserter.__docgenInfo={description:"",methods:[{name:"onToggle",docblock:null,modifiers:[],params:[{name:"isOpen",type:null}],returns:null},{name:"renderToggle",docblock:"Render callback to display Dropdown toggle element.\n\n@param {Object}   options\n@param {Function} options.onToggle Callback to invoke when toggle is\n                                   pressed.\n@param {boolean}  options.isOpen   Whether dropdown is currently open.\n\n@return {WPElement} Dropdown toggle element.",modifiers:[],params:[{name:"{ onToggle, isOpen }"}],returns:{description:"Dropdown toggle element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown toggle element."},{name:"renderContent",docblock:"Render callback to display Dropdown content element.\n\n@param {Object}   options\n@param {Function} options.onClose Callback to invoke when dropdown is\n                                  closed.\n\n@return {WPElement} Dropdown content element.",modifiers:[],params:[{name:"{ onClose }"}],returns:{description:"Dropdown content element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown content element."}],displayName:"Inserter"};var inserter=(0,compose.Z)([(0,with_select.Z)(((select,_ref4)=>{var _getBlockVariations;let{clientId:clientId,rootClientId:rootClientId,shouldDirectInsert:shouldDirectInsert=!0}=_ref4;const{getBlockRootClientId:getBlockRootClientId,hasInserterItems:hasInserterItems,getAllowedBlocks:getAllowedBlocks,__experimentalGetDirectInsertBlock:__experimentalGetDirectInsertBlock,getSettings:getSettings}=select(store.h),{getBlockVariations:getBlockVariations}=select(blocks_build_module.h);rootClientId=rootClientId||getBlockRootClientId(clientId)||void 0;const allowedBlocks=getAllowedBlocks(rootClientId),directInsertBlock=shouldDirectInsert&&__experimentalGetDirectInsertBlock(rootClientId),settings=getSettings(),hasSingleBlockType=1===(null==allowedBlocks?void 0:allowedBlocks.length)&&0===(null===(_getBlockVariations=getBlockVariations(allowedBlocks[0].name,"inserter"))||void 0===_getBlockVariations?void 0:_getBlockVariations.length);let allowedBlockType=!1;return hasSingleBlockType&&(allowedBlockType=allowedBlocks[0]),{hasItems:hasInserterItems(rootClientId),hasSingleBlockType:hasSingleBlockType,blockTitle:allowedBlockType?allowedBlockType.title:"",allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,rootClientId:rootClientId,prioritizePatterns:settings.__experimentalPreferPatternsOnRoot&&!rootClientId}})),(0,with_dispatch.Z)(((dispatch,ownProps,_ref5)=>{let{select:select}=_ref5;return{insertOnlyAllowedBlock(){const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,hasSingleBlockType:hasSingleBlockType,allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=ownProps;if(!hasSingleBlockType&&!directInsertBlock)return;const{insertBlock:insertBlock}=dispatch(store.h);let blockToInsert;if(directInsertBlock){const newAttributes=function getAdjacentBlockAttributes(attributesToCopy){const{getBlock:getBlock,getPreviousBlockClientId:getPreviousBlockClientId}=select(store.h);if(!attributesToCopy||!clientId&&!rootClientId)return{};const result={};let adjacentAttributes={};if(clientId){const currentBlock=getBlock(clientId),previousBlock=getBlock(getPreviousBlockClientId(clientId));(null==currentBlock?void 0:currentBlock.name)===(null==previousBlock?void 0:previousBlock.name)&&(adjacentAttributes=(null==previousBlock?void 0:previousBlock.attributes)||{})}else{var _parentBlock$innerBlo;const parentBlock=getBlock(rootClientId);if(null!=parentBlock&&null!==(_parentBlock$innerBlo=parentBlock.innerBlocks)&&void 0!==_parentBlock$innerBlo&&_parentBlock$innerBlo.length){const lastInnerBlock=parentBlock.innerBlocks[parentBlock.innerBlocks.length-1];directInsertBlock&&(null==directInsertBlock?void 0:directInsertBlock.name)===lastInnerBlock.name&&(adjacentAttributes=lastInnerBlock.attributes)}}return attributesToCopy.forEach((attribute=>{adjacentAttributes.hasOwnProperty(attribute)&&(result[attribute]=adjacentAttributes[attribute])})),result}(directInsertBlock.attributesToCopy);blockToInsert=(0,blocks_build_module.j4)(directInsertBlock.name,{...directInsertBlock.attributes||{},...newAttributes})}else blockToInsert=(0,blocks_build_module.j4)(allowedBlockType.name);var _blockToInsert;(insertBlock(blockToInsert,function getInsertionIndex(){const{getBlockIndex:getBlockIndex,getBlockSelectionEnd:getBlockSelectionEnd,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(store.h);if(clientId)return getBlockIndex(clientId);const end=getBlockSelectionEnd();return!isAppender&&end&&getBlockRootClientId(end)===rootClientId?getBlockIndex(end)+1:getBlockOrder(rootClientId).length}(),rootClientId,selectBlockOnInsert),onSelectOrClose)&&onSelectOrClose({clientId:null===(_blockToInsert=blockToInsert)||void 0===_blockToInsert?void 0:_blockToInsert.clientId});const message=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s block added"),allowedBlockType.title);(0,build_module.D)(message)}}})),(0,if_condition.Z)((_ref6=>{let{hasItems:hasItems,isAppender:isAppender,rootClientId:rootClientId,clientId:clientId}=_ref6;return hasItems||!isAppender&&!rootClientId&&!clientId}))])(Inserter);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/index.js"]={name:"Inserter",docgenInfo:Inserter.__docgenInfo,path:"packages/block-editor/src/components/inserter/index.js"})},"./packages/block-editor/src/components/inserter/menu.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return menu}});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),tip=__webpack_require__("./packages/components/build-module/tip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const globalTips=[(0,create_interpolate_element.Z)((0,build_module.__)("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.Z)((0,build_module.__)("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.Z)((0,build_module.__)("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,build_module.__)("Drag files into the editor to automatically insert media blocks."),(0,build_module.__)("Change a block's type by pressing the block icon on the toolbar.")];function Tips(){const[randomIndex]=(0,react.useState)(Math.floor(Math.random()*globalTips.length));return(0,jsx_runtime.jsx)(tip.Z,{children:globalTips[randomIndex]})}Tips.displayName="Tips",Tips.__docgenInfo={description:"",methods:[],displayName:"Tips"};var tips=Tips;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/tips.js"]={name:"Tips",docgenInfo:Tips.__docgenInfo,path:"packages/block-editor/src/components/inserter/tips.js"});var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js");function BlockCard(_ref){let{title:title,icon:icon,description:description,blockType:blockType,className:className}=_ref;blockType&&((0,deprecated_build_module.Z)("`blockType` property in `BlockCard component`",{since:"5.7",alternative:"`title, icon and description` properties"}),({title:title,icon:icon,description:description}=blockType));const{parentNavBlockClientId:parentNavBlockClientId}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockParentsByBlockName:getBlockParentsByBlockName}=select(store.h);return{parentNavBlockClientId:getBlockParentsByBlockName(getSelectedBlockClientId(),"core/navigation",!0)[0]}}),[]),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-block-card",className),children:[parentNavBlockClientId&&(0,jsx_runtime.jsx)(build_module_button.ZP,{onClick:()=>selectBlock(parentNavBlockClientId),label:(0,build_module.__)("Go to parent Navigation block"),style:{minWidth:24,padding:0},icon:(0,build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0}),(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-card__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-card__title",children:title}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-card__description",children:description})]})]})}BlockCard.displayName="BlockCard",BlockCard.__docgenInfo={description:"",methods:[],displayName:"BlockCard"};var block_card=BlockCard;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-card/index.js"]={name:"BlockCard",docgenInfo:BlockCard.__docgenInfo,path:"packages/block-editor/src/components/block-card/index.js"});var block_preview=__webpack_require__("./packages/block-editor/src/components/block-preview/index.js");function InserterPreviewPanel(_ref){var _example$viewportWidt;let{item:item}=_ref;const{name:name,title:title,icon:icon,description:description,initialAttributes:initialAttributes,example:example}=item,isReusable=(0,blocks_build_module.vr)(item);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__preview-container",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview",children:isReusable||example?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content",children:(0,jsx_runtime.jsx)(block_preview.ZP,{blocks:example?(0,blocks_build_module.Wf)(name,{attributes:{...example.attributes,...initialAttributes},innerBlocks:example.innerBlocks}):(0,blocks_build_module.j4)(name,initialAttributes),viewportWidth:null!==(_example$viewportWidt=null==example?void 0:example.viewportWidth)&&void 0!==_example$viewportWidt?_example$viewportWidt:500,additionalStyles:[{css:"body { padding: 16px; }"}]})}):(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content-missing",children:(0,build_module.__)("No Preview Available.")})}),!isReusable&&(0,jsx_runtime.jsx)(block_card,{title:title,icon:icon,description:description})]})}InserterPreviewPanel.displayName="InserterPreviewPanel",InserterPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPreviewPanel"};var preview_panel=InserterPreviewPanel;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/preview-panel.js"]={name:"InserterPreviewPanel",docgenInfo:InserterPreviewPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/preview-panel.js"});var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),block_types_list=__webpack_require__("./packages/block-editor/src/components/block-types-list/index.js"),panel=__webpack_require__("./packages/block-editor/src/components/inserter/panel.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),inserter_listbox=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/index.js"),sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js");const EMPTY_ARRAY=[];function BlockTypesTab(_ref){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks}=_ref;const[items,categories,collections,onSelectItem]=(0,use_block_types_state.Z)(rootClientId,onInsert),suggestedItems=(0,react.useMemo)((()=>(0,sorting.X)(items,"frecency","desc").slice(0,6)),[items]),uncategorizedItems=(0,react.useMemo)((()=>items.filter((item=>!item.category))),[items]),itemsPerCategory=(0,react.useMemo)((()=>(0,pipe.Z)((itemList=>itemList.filter((item=>item.category&&"reusable"!==item.category))),(itemList=>(0,lodash.groupBy)(itemList,"category")))(items)),[items]),itemsPerCollection=(0,react.useMemo)((()=>{const result={...collections};return Object.keys(collections).forEach((namespace=>{result[namespace]=items.filter((item=>(item=>item.name.split("/")[0])(item)===namespace)),0===result[namespace].length&&delete result[namespace]})),result}),[items,collections]);(0,react.useEffect)((()=>()=>onHover(null)),[]);const currentlyRenderedCategories=(0,use_async_list.Z)(categories),didRenderAllCategories=categories.length===currentlyRenderedCategories.length,collectionEntries=(0,react.useMemo)((()=>Object.entries(collections)),[collections]),currentlyRenderedCollections=(0,use_async_list.Z)(didRenderAllCategories?collectionEntries:EMPTY_ARRAY);return(0,jsx_runtime.jsx)(inserter_listbox.ZP,{children:(0,jsx_runtime.jsxs)("div",{children:[showMostUsedBlocks&&!!suggestedItems.length&&(0,jsx_runtime.jsx)(panel.Z,{title:(0,build_module._x)("Most used","blocks"),children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:suggestedItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module._x)("Most used","blocks")})}),currentlyRenderedCategories.map((category=>{const categoryItems=itemsPerCategory[category.slug];return categoryItems&&categoryItems.length?(0,jsx_runtime.jsx)(panel.Z,{title:category.title,icon:category.icon,children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:categoryItems,onSelect:onSelectItem,onHover:onHover,label:category.title})},category.slug):null})),didRenderAllCategories&&uncategorizedItems.length>0&&(0,jsx_runtime.jsx)(panel.Z,{className:"block-editor-inserter__uncategorized-blocks-panel",title:(0,build_module.__)("Uncategorized"),children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:uncategorizedItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module.__)("Uncategorized")})}),currentlyRenderedCollections.map((_ref2=>{let[namespace,collection]=_ref2;const collectionItems=itemsPerCollection[namespace];return collectionItems&&collectionItems.length?(0,jsx_runtime.jsx)(panel.Z,{title:collection.title,icon:collection.icon,children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:collectionItems,onSelect:onSelectItem,onHover:onHover,label:collection.title})},namespace):null}))]})})}BlockTypesTab.displayName="BlockTypesTab",BlockTypesTab.__docgenInfo={description:"",methods:[],displayName:"BlockTypesTab"};var block_types_tab=BlockTypesTab;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-types-tab.js"]={name:"BlockTypesTab",docgenInfo:BlockTypesTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-types-tab.js"});var use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),block_patterns_list=__webpack_require__("./packages/block-editor/src/components/block-patterns-list/index.js"),modal=__webpack_require__("./packages/components/build-module/modal/index.js");function PatternCategoriesList(_ref){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory}=_ref;const baseClassName="block-editor-block-patterns-explorer__sidebar";return(0,jsx_runtime.jsx)("div",{className:`${baseClassName}__categories-list`,children:patternCategories.map((_ref2=>{let{name:name,label:label}=_ref2;return(0,jsx_runtime.jsx)(build_module_button.ZP,{label:label,className:`${baseClassName}__categories-list__item`,isPressed:selectedCategory===name,onClick:()=>{onClickCategory(name)},children:label},name)}))})}function PatternsExplorerSearch(_ref3){let{filterValue:filterValue,setFilterValue:setFilterValue}=_ref3;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-explorer__search",children:(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,onChange:setFilterValue,value:filterValue,label:(0,build_module.__)("Search for patterns"),placeholder:(0,build_module.__)("Search")})})}function PatternExplorerSidebar(_ref4){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory,filterValue:filterValue,setFilterValue:setFilterValue}=_ref4;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[(0,jsx_runtime.jsx)(PatternsExplorerSearch,{filterValue:filterValue,setFilterValue:setFilterValue}),!filterValue&&(0,jsx_runtime.jsx)(PatternCategoriesList,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory})]})}PatternCategoriesList.displayName="PatternCategoriesList",PatternsExplorerSearch.displayName="PatternsExplorerSearch",PatternExplorerSidebar.displayName="PatternExplorerSidebar",PatternExplorerSidebar.__docgenInfo={description:"",methods:[],displayName:"PatternExplorerSidebar"};var sidebar=PatternExplorerSidebar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/sidebar.js"]={name:"PatternExplorerSidebar",docgenInfo:PatternExplorerSidebar.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/sidebar.js"});var use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),heading_component=__webpack_require__("./packages/components/build-module/heading/component.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),no_results=__webpack_require__("./packages/block-editor/src/components/inserter/no-results.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),search_items=__webpack_require__("./packages/block-editor/src/components/inserter/search-items.js");function PatternsListHeader(_ref){let{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatternsLength}=_ref;return filterValue?(0,jsx_runtime.jsx)(heading_component.Z,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:(0,build_module.gB)((0,build_module._n)('%1$d pattern found for "%2$s"','%1$d patterns found for "%2$s"',filteredBlockPatternsLength),filteredBlockPatternsLength,filterValue)}):null}function PatternList(_ref2){let{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories}=_ref2;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.Z)({shouldFocusBlock:!0}),[allPatterns,,onSelectBlockPattern]=(0,use_patterns_state.Z)(onInsertBlocks,destinationRootClientId),registeredPatternCategories=(0,react.useMemo)((()=>patternCategories.map((patternCategory=>patternCategory.name))),[patternCategories]),filteredBlockPatterns=(0,react.useMemo)((()=>filterValue?(0,search_items.KT)(allPatterns,filterValue):allPatterns.filter((pattern=>{var _pattern$categories,_pattern$categories2;return"uncategorized"===selectedCategory?!(null!==(_pattern$categories=pattern.categories)&&void 0!==_pattern$categories&&_pattern$categories.length)||pattern.categories.every((category=>!registeredPatternCategories.includes(category))):null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(selectedCategory)}))),[filterValue,selectedCategory,allPatterns]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.gB)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownPatterns=(0,use_async_list.Z)(filteredBlockPatterns,{step:2}),hasItems=!(null==filteredBlockPatterns||!filteredBlockPatterns.length);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__list",children:[hasItems&&(0,jsx_runtime.jsx)(PatternsListHeader,{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatterns.length}),(0,jsx_runtime.jsxs)(inserter_listbox.ZP,{children:[!hasItems&&(0,jsx_runtime.jsx)(no_results.Z,{}),hasItems&&(0,jsx_runtime.jsx)(block_patterns_list.Z,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,isDraggable:!1})]})]})}PatternsListHeader.displayName="PatternsListHeader",PatternList.displayName="PatternList",PatternList.__docgenInfo={description:"",methods:[],displayName:"PatternList"};var patterns_list=PatternList;function PatternsExplorer(_ref){let{initialCategory:initialCategory,patternCategories:patternCategories}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)(null==initialCategory?void 0:initialCategory.name);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer",children:[(0,jsx_runtime.jsx)(sidebar,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:setSelectedCategory,filterValue:filterValue,setFilterValue:setFilterValue}),(0,jsx_runtime.jsx)(patterns_list,{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories})]})}function PatternsExplorerModal(_ref2){let{onModalClose:onModalClose,...restProps}=_ref2;return(0,jsx_runtime.jsx)(modal.Z,{title:(0,build_module.__)("Patterns"),closeLabel:(0,build_module.__)("Close"),onRequestClose:onModalClose,isFullScreen:!0,children:(0,jsx_runtime.jsx)(PatternsExplorer,{...restProps})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js"]={name:"PatternList",docgenInfo:PatternList.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js"}),PatternsExplorer.displayName="PatternsExplorer",PatternsExplorerModal.displayName="PatternsExplorerModal",PatternsExplorerModal.__docgenInfo={description:"",methods:[],displayName:"PatternsExplorerModal"};var explorer=PatternsExplorerModal;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/explorer.js"]={name:"PatternsExplorerModal",docgenInfo:PatternsExplorerModal.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/explorer.js"});var v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),view_component=__webpack_require__("./packages/components/build-module/view/component.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js"),navigator_back_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-back-button/component.js"),navigator_provider_component=__webpack_require__("./packages/components/build-module/navigator/navigator-provider/component.js"),navigator_screen_component=__webpack_require__("./packages/components/build-module/navigator/navigator-screen/component.js"),navigator_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-button/component.js");function ScreenHeader(_ref){let{title:title}=_ref;return(0,jsx_runtime.jsx)(v_stack_component.Z,{spacing:0,children:(0,jsx_runtime.jsx)(view_component.Z,{children:(0,jsx_runtime.jsx)(spacer_component.Z,{marginBottom:0,paddingX:4,paddingY:3,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{spacing:2,children:[(0,jsx_runtime.jsx)(navigator_back_button_component.Z,{style:{minWidth:24,padding:0},icon:(0,build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0,"aria-label":(0,build_module.__)("Navigate to the previous view")}),(0,jsx_runtime.jsx)(spacer_component.Z,{children:(0,jsx_runtime.jsx)(heading_component.Z,{level:5,children:title})})]})})})})}function MobileTabNavigation(_ref2){let{categories:categories,children:children}=_ref2;return(0,jsx_runtime.jsxs)(navigator_provider_component.Z,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[(0,jsx_runtime.jsx)(navigator_screen_component.Z,{path:"/",children:(0,jsx_runtime.jsx)(item_group_component.Z,{children:categories.map((category=>(0,jsx_runtime.jsx)(navigator_button_component.Z,{path:`/category/${category.name}`,as:item_component.Z,isAction:!0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:category.label}),(0,jsx_runtime.jsx)(icon.Z,{icon:(0,build_module.dZ)()?chevron_left.Z:chevron_right.Z})]})},category.name)))})}),categories.map((category=>(0,jsx_runtime.jsxs)(navigator_screen_component.Z,{path:`/category/${category.name}`,children:[(0,jsx_runtime.jsx)(ScreenHeader,{title:(0,build_module.__)("Back")}),children(category)]},category.name)))]})}function usePatternsCategories(rootClientId){const[allPatterns,allCategories]=(0,use_patterns_state.Z)(void 0,rootClientId),hasRegisteredCategory=(0,react.useCallback)((pattern=>!(!pattern.categories||!pattern.categories.length)&&pattern.categories.some((cat=>allCategories.some((category=>category.name===cat))))),[allCategories]);return(0,react.useMemo)((()=>{const categories=allCategories.filter((category=>allPatterns.some((pattern=>{var _pattern$categories;return null===(_pattern$categories=pattern.categories)||void 0===_pattern$categories?void 0:_pattern$categories.includes(category.name)})))).sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return[currentName,nextName].some((categoryName=>["featured","text"].includes(categoryName)))?"featured"===currentName||"text"===nextName?-1:1:0}));return allPatterns.some((pattern=>!hasRegisteredCategory(pattern)))&&!categories.find((category=>"uncategorized"===category.name))&&categories.push({name:"uncategorized",label:(0,build_module._x)("Uncategorized")}),categories}),[allPatterns,allCategories])}function BlockPatternsCategoryDialog(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref3;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,jsx_runtime.jsx)("div",{ref:container,className:"block-editor-inserter__patterns-category-dialog",children:(0,jsx_runtime.jsx)(BlockPatternsCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,category:category,showTitlesAsTooltip:showTitlesAsTooltip})})}function BlockPatternsCategoryPanel(_ref4){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const[allPatterns,,onClick]=(0,use_patterns_state.Z)(onInsert,rootClientId),availableCategories=usePatternsCategories(rootClientId),currentCategoryPatterns=(0,react.useMemo)((()=>allPatterns.filter((pattern=>{var _pattern$categories$f,_pattern$categories3,_pattern$categories2;if("uncategorized"!==category.name)return null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(category.name);return 0===(null!==(_pattern$categories$f=null===(_pattern$categories3=pattern.categories)||void 0===_pattern$categories3?void 0:_pattern$categories3.filter((cat=>availableCategories.find((availableCategory=>availableCategory.name===cat)))))&&void 0!==_pattern$categories$f?_pattern$categories$f:[]).length}))),[allPatterns,category]),currentShownPatterns=(0,use_async_list.Z)(currentCategoryPatterns);return(0,react.useEffect)((()=>()=>onHover(null)),[]),currentCategoryPatterns.length?(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__patterns-category-panel",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__patterns-category-panel-title",children:category.label}),(0,jsx_runtime.jsx)("p",{children:category.description}),(0,jsx_runtime.jsx)(block_patterns_list.Z,{shownPatterns:currentShownPatterns,blockPatterns:currentCategoryPatterns,onClickPattern:onClick,onHover:onHover,label:category.label,orientation:"vertical",category:category.label,isDraggable:!0,showTitlesAsTooltip:showTitlesAsTooltip})]}):null}function BlockPatternsTabs(_ref5){let{onSelectCategory:onSelectCategory,selectedCategory:selectedCategory,onInsert:onInsert,rootClientId:rootClientId}=_ref5;const[showPatternsExplorer,setShowPatternsExplorer]=(0,react.useState)(!1),categories=usePatternsCategories(rootClientId),isMobile=(0,use_viewport_match.Z)("medium","<");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:(0,jsx_runtime.jsx)("nav",{"aria-label":(0,build_module.__)("Block pattern categories"),children:(0,jsx_runtime.jsxs)(item_group_component.Z,{role:"list",className:"block-editor-inserter__block-patterns-tabs",children:[categories.map((category=>(0,jsx_runtime.jsx)(item_component.Z,{role:"listitem",onClick:()=>onSelectCategory(category),className:category===selectedCategory?"block-editor-inserter__patterns-category block-editor-inserter__patterns-selected-category":"block-editor-inserter__patterns-category","aria-label":category.label,"aria-current":category===selectedCategory?"true":void 0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:category.label}),(0,jsx_runtime.jsx)(icon.Z,{icon:chevron_right.Z})]})},category.name))),(0,jsx_runtime.jsx)("div",{role:"listitem",children:(0,jsx_runtime.jsx)(build_module_button.ZP,{className:"block-editor-inserter__patterns-explore-button",onClick:()=>setShowPatternsExplorer(!0),variant:"secondary",children:(0,build_module.__)("Explore all patterns")})})]})})}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories:categories,children:category=>(0,jsx_runtime.jsx)(BlockPatternsCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category,showTitlesAsTooltip:!1})}),showPatternsExplorer&&(0,jsx_runtime.jsx)(explorer,{initialCategory:selectedCategory,patternCategories:categories,onModalClose:()=>setShowPatternsExplorer(!1)})]})}ScreenHeader.displayName="ScreenHeader",MobileTabNavigation.displayName="MobileTabNavigation",MobileTabNavigation.__docgenInfo={description:"",methods:[],displayName:"MobileTabNavigation"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/mobile-tab-navigation.js"]={name:"MobileTabNavigation",docgenInfo:MobileTabNavigation.__docgenInfo,path:"packages/block-editor/src/components/inserter/mobile-tab-navigation.js"}),BlockPatternsCategoryDialog.displayName="BlockPatternsCategoryDialog",BlockPatternsCategoryPanel.displayName="BlockPatternsCategoryPanel",BlockPatternsTabs.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsTabs"};var block_patterns_tab=BlockPatternsTabs;BlockPatternsCategoryDialog.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsCategoryDialog"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsCategoryDialog",docgenInfo:BlockPatternsCategoryDialog.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"}),BlockPatternsCategoryPanel.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsCategoryPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsCategoryPanel",docgenInfo:BlockPatternsCategoryPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsTabs",docgenInfo:BlockPatternsTabs.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"});var add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");function ReusableBlocksList(_ref){let{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}=_ref;const[items,,,onSelectItem]=(0,use_block_types_state.Z)(rootClientId,onInsert),filteredItems=(0,react.useMemo)((()=>items.filter((_ref2=>{let{category:category}=_ref2;return"reusable"===category}))),[items]);return 0===filteredItems.length?(0,jsx_runtime.jsx)(no_results.Z,{}):(0,jsx_runtime.jsx)(panel.Z,{title:(0,build_module.__)("Reusable blocks"),children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:filteredItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module.__)("Reusable blocks")})})}function ReusableBlocksTab(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover}=_ref3;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ReusableBlocksList,{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__manage-reusable-blocks-container",children:(0,jsx_runtime.jsx)(build_module_button.ZP,{className:"block-editor-inserter__manage-reusable-blocks",variant:"secondary",href:(0,add_query_args.f)("edit.php",{post_type:"wp_block"}),children:(0,build_module.__)("Manage Reusable blocks")})})]})}ReusableBlocksList.displayName="ReusableBlocksList",ReusableBlocksTab.__docgenInfo={description:'List of reusable blocks shown in the "Reusable" tab of the inserter.\n\n@param {Object}   props              Component props.\n@param {?string}  props.rootClientId Client id of block to insert into.\n@param {Function} props.onInsert     Callback to run when item is inserted.\n@param {Function} props.onHover      Callback to run when item is hovered.\n\n@return {WPComponent} The component.',methods:[],displayName:"ReusableBlocksTab"};var reusable_blocks_tab=ReusableBlocksTab;function useMediaCategories(rootClientId){const[categories,setCategories]=(0,react.useState)([]),{canInsertImage:canInsertImage,canInsertVideo:canInsertVideo,canInsertAudio:canInsertAudio}=(0,use_select.Z)((select=>{const{canInsertBlockType:canInsertBlockType}=select(store.h);return{canInsertImage:canInsertBlockType("core/image",rootClientId),canInsertVideo:canInsertBlockType("core/video",rootClientId),canInsertAudio:canInsertBlockType("core/audio",rootClientId)}}),[rootClientId]),inserterMediaCategories=function useInserterMediaCategories(){const{inserterMediaCategories:inserterMediaCategories,allowedMimeTypes:allowedMimeTypes,enableOpenverseMediaCategory:enableOpenverseMediaCategory}=(0,use_select.Z)((select=>{const settings=select(store.h).getSettings();return{inserterMediaCategories:settings.inserterMediaCategories,allowedMimeTypes:settings.allowedMimeTypes,enableOpenverseMediaCategory:settings.enableOpenverseMediaCategory}}),[]);return(0,react.useMemo)((()=>{if(inserterMediaCategories&&allowedMimeTypes)return inserterMediaCategories.filter((category=>!(!enableOpenverseMediaCategory&&"openverse"===category.name)&&(!!category.isExternalResource||Object.values(allowedMimeTypes).some((mimeType=>mimeType.startsWith(`${category.mediaType}/`))))))}),[inserterMediaCategories,allowedMimeTypes,enableOpenverseMediaCategory])}();return(0,react.useEffect)((()=>{(async()=>{const _categories=[];if(!inserterMediaCategories)return;const categoriesHaveMedia=new Map(await Promise.all(inserterMediaCategories.map((async category=>{if(category.isExternalResource)return[category.name,!0];const results=await category.fetch({per_page:1});return[category.name,!!results.length]})))),canInsertMediaType={image:canInsertImage,video:canInsertVideo,audio:canInsertAudio};inserterMediaCategories.forEach((category=>{canInsertMediaType[category.mediaType]&&categoriesHaveMedia.get(category.name)&&_categories.push(category)})),_categories.length&&setCategories(_categories)})()}),[canInsertImage,canInsertVideo,canInsertAudio,inserterMediaCategories]),categories}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/reusable-blocks-tab.js"]={name:"ReusableBlocksTab",docgenInfo:ReusableBlocksTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/reusable-blocks-tab.js"});var spinner=__webpack_require__("./packages/components/build-module/spinner/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),CompositeItem=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js"),CompositeState=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js"),Composite=__webpack_require__("./node_modules/reakit/es/Composite/Composite.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),external=__webpack_require__("./packages/icons/build-module/library/external.js"),inserter_draggable_blocks=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js");const mediaTypeTag={image:"img",video:"video",audio:"audio"};function getBlockAndPreviewFromMedia(media,mediaType){const attributes={id:media.id||void 0,caption:media.caption||void 0},mediaSrc=media.url,alt=media.alt||void 0;"image"===mediaType?(attributes.url=mediaSrc,attributes.alt=alt):["video","audio"].includes(mediaType)&&(attributes.src=mediaSrc);const PreviewTag=mediaTypeTag[mediaType],preview=(0,jsx_runtime.jsx)(PreviewTag,{src:media.previewUrl||mediaSrc,alt:alt,controls:"audio"===mediaType||void 0,inert:"true",onError:_ref=>{let{currentTarget:currentTarget}=_ref;currentTarget.src===media.previewUrl&&(currentTarget.src=mediaSrc)}});return[(0,blocks_build_module.j4)(`core/${mediaType}`,attributes),preview]}const MEDIA_OPTIONS_POPOVER_PROPS={position:"bottom left",className:"block-editor-inserter__media-list__item-preview-options__popover"};function MediaPreviewOptions(_ref){let{category:category,media:media}=_ref;if(!category.getReportUrl)return null;const reportUrl=category.getReportUrl(media);return(0,jsx_runtime.jsx)(dropdown_menu.Z,{className:"block-editor-inserter__media-list__item-preview-options",label:(0,build_module.__)("Options"),popoverProps:MEDIA_OPTIONS_POPOVER_PROPS,icon:more_vertical.Z,children:()=>(0,jsx_runtime.jsx)(menu_group.Z,{children:(0,jsx_runtime.jsx)(menu_item.Z,{onClick:()=>window.open(reportUrl,"_blank").focus(),icon:external.Z,children:(0,build_module.gB)((0,build_module.__)("Report %s"),category.mediaType)})})})}function MediaPreview(_ref2){var _media$title;let{media:media,onClick:onClick,composite:composite,category:category}=_ref2;const[isHovered,setIsHovered]=(0,react.useState)(!1),[block,preview]=(0,react.useMemo)((()=>getBlockAndPreviewFromMedia(media,category.mediaType)),[media,category.mediaType]),title=(null===(_media$title=media.title)||void 0===_media$title?void 0:_media$title.rendered)||media.title;let truncatedTitle;if(title.length>25){const omission="...";truncatedTitle=title.slice(0,25-omission.length)+omission}const onMouseEnter=(0,react.useCallback)((()=>setIsHovered(!0)),[]),onMouseLeave=(0,react.useCallback)((()=>setIsHovered(!1)),[]);return(0,jsx_runtime.jsx)(inserter_draggable_blocks.Z,{isEnabled:!0,blocks:[block],children:_ref3=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref3;return(0,jsx_runtime.jsx)("div",{className:classnames_default()("block-editor-inserter__media-list__list-item",{"is-hovered":isHovered}),draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd,children:(0,jsx_runtime.jsx)(tooltip.Z,{text:truncatedTitle||title,children:(0,jsx_runtime.jsxs)("div",{onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,children:[(0,jsx_runtime.jsx)(CompositeItem.A,{role:"option",as:"div",...composite,className:"block-editor-inserter__media-list__item",onClick:()=>onClick(block),"aria-label":title,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__media-list__item-preview",children:preview})}),(0,jsx_runtime.jsx)(MediaPreviewOptions,{category:category,media:media})]})})})}})}function MediaList(_ref4){let{mediaList:mediaList,category:category,onClick:onClick,label:label=(0,build_module.__)("Media List")}=_ref4;const composite=(0,CompositeState.u)(),onPreviewClick=(0,react.useCallback)((block=>{onClick((0,blocks_build_module.Wm)(block))}),[onClick]);return(0,jsx_runtime.jsx)(Composite.b,{...composite,role:"listbox",className:"block-editor-inserter__media-list","aria-label":label,children:mediaList.map(((media,index)=>(0,jsx_runtime.jsx)(MediaPreview,{media:media,category:category,onClick:onPreviewClick,composite:composite},media.id||media.sourceId||index)))})}MediaPreviewOptions.displayName="MediaPreviewOptions",MediaPreview.displayName="MediaPreview",MediaList.displayName="MediaList",MediaList.__docgenInfo={description:"",methods:[],displayName:"MediaList",props:{label:{defaultValue:{value:"__( 'Media List' )",computed:!0},required:!1}}};var media_list=MediaList;function useDebouncedInput(){let defaultValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[input,setInput]=(0,react.useState)(defaultValue),[debounced,setter]=(0,react.useState)(defaultValue),setDebounced=(0,use_debounce.Z)(setter,250);return(0,react.useEffect)((()=>{debounced!==input&&setDebounced(input)}),[debounced,input]),[input,setInput,debounced]}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-list.js"]={name:"MediaList",docgenInfo:MediaList.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-list.js"});function MediaCategoryDialog(_ref){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,jsx_runtime.jsx)("div",{ref:container,className:"block-editor-inserter__media-dialog",children:(0,jsx_runtime.jsx)(MediaCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,category:category})})}function MediaCategoryPanel(_ref2){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref2;const[search,setSearch,debouncedSearch]=useDebouncedInput(),{mediaList:mediaList,isLoading:isLoading}=function useMediaResults(category){let query=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[mediaList,setMediaList]=(0,react.useState)(),[isLoading,setIsLoading]=(0,react.useState)(!1),lastRequest=(0,react.useRef)();return(0,react.useEffect)((()=>{(async()=>{var _category$fetch;const key=JSON.stringify({category:category.name,...query});lastRequest.current=key,setIsLoading(!0),setMediaList([]);const _media=await(null===(_category$fetch=category.fetch)||void 0===_category$fetch?void 0:_category$fetch.call(category,query));key===lastRequest.current&&(setMediaList(_media),setIsLoading(!1))})()}),[category.name,...Object.values(query)]),{mediaList:mediaList,isLoading:isLoading}}(category,{per_page:debouncedSearch?20:10,search:debouncedSearch}),baseCssClass="block-editor-inserter__media-panel",searchLabel=category.labels.search_items||(0,build_module.__)("Search");return(0,jsx_runtime.jsxs)("div",{className:baseCssClass,children:[(0,jsx_runtime.jsx)(search_control.Z,{className:`${baseCssClass}-search`,onChange:setSearch,value:search,label:searchLabel,placeholder:searchLabel}),isLoading&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-spinner`,children:(0,jsx_runtime.jsx)(spinner.ZP,{})}),!isLoading&&!(null!=mediaList&&mediaList.length)&&(0,jsx_runtime.jsx)(no_results.Z,{}),!isLoading&&!(null==mediaList||!mediaList.length)&&(0,jsx_runtime.jsx)(media_list,{rootClientId:rootClientId,onClick:onInsert,mediaList:mediaList,category:category})]})}MediaCategoryDialog.displayName="MediaCategoryDialog",MediaCategoryPanel.displayName="MediaCategoryPanel",MediaCategoryDialog.__docgenInfo={description:"",methods:[],displayName:"MediaCategoryDialog"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-panel.js"]={name:"MediaCategoryDialog",docgenInfo:MediaCategoryDialog.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-panel.js"}),MediaCategoryPanel.__docgenInfo={description:"",methods:[],displayName:"MediaCategoryPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-panel.js"]={name:"MediaCategoryPanel",docgenInfo:MediaCategoryPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-panel.js"});var check=function MediaUploadCheck(_ref){let{fallback:fallback=null,children:children}=_ref;return(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return!!getSettings().mediaUpload}),[])?children:fallback};var media_upload=(0,__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js").Z)("editor.MediaUpload")((()=>null));const ALLOWED_MEDIA_TYPES=["image","video","audio"];function MediaTab(_ref){let{rootClientId:rootClientId,selectedCategory:selectedCategory,onSelectCategory:onSelectCategory,onInsert:onInsert}=_ref;const mediaCategories=useMediaCategories(rootClientId),isMobile=(0,use_viewport_match.Z)("medium","<"),baseCssClass="block-editor-inserter__media-tabs",onSelectMedia=(0,react.useCallback)((media=>{if(null==media||!media.url)return;const[block]=getBlockAndPreviewFromMedia(media,media.type);onInsert(block)}),[onInsert]),mobileMediaCategories=(0,react.useMemo)((()=>mediaCategories.map((mediaCategory=>({...mediaCategory,label:mediaCategory.labels.name})))),[mediaCategories]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-container`,children:(0,jsx_runtime.jsx)("nav",{"aria-label":(0,build_module.__)("Media categories"),children:(0,jsx_runtime.jsxs)(item_group_component.Z,{role:"list",className:baseCssClass,children:[mediaCategories.map((mediaCategory=>(0,jsx_runtime.jsx)(item_component.Z,{role:"listitem",onClick:()=>onSelectCategory(mediaCategory),className:classnames_default()(`${baseCssClass}__media-category`,{"is-selected":selectedCategory===mediaCategory}),"aria-label":mediaCategory.labels.name,"aria-current":mediaCategory===selectedCategory?"true":void 0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:mediaCategory.labels.name}),(0,jsx_runtime.jsx)(icon.Z,{icon:chevron_right.Z})]})},mediaCategory.name))),(0,jsx_runtime.jsx)("div",{role:"listitem",children:(0,jsx_runtime.jsx)(check,{children:(0,jsx_runtime.jsx)(media_upload,{multiple:!1,onSelect:onSelectMedia,allowedTypes:ALLOWED_MEDIA_TYPES,render:_ref2=>{let{open:open}=_ref2;return(0,jsx_runtime.jsx)(build_module_button.ZP,{onClick:event=>{event.target.focus(),open()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:(0,build_module.__)("Open Media Library")})}})})})]})})}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories:mobileMediaCategories,children:category=>(0,jsx_runtime.jsx)(MediaCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category})})]})}MediaTab.__docgenInfo={description:"",methods:[],displayName:"MediaTab"};var media_tab=MediaTab;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-tab.js"]={name:"MediaTab",docgenInfo:MediaTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-tab.js"});var search_results=__webpack_require__("./packages/block-editor/src/components/inserter/search-results.js"),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),tab_panel=__webpack_require__("./packages/components/build-module/tab-panel/index.js");const blocksTab={name:"blocks",title:(0,build_module.__)("Blocks")},patternsTab={name:"patterns",title:(0,build_module.__)("Patterns")},reusableBlocksTab={name:"reusable",title:(0,build_module.__)("Reusable"),icon:symbol.Z},mediaTab={name:"media",title:(0,build_module.__)("Media")};function InserterTabs(_ref){let{children:children,showPatterns:showPatterns=!1,showReusableBlocks:showReusableBlocks=!1,showMedia:showMedia=!1,onSelect:onSelect,prioritizePatterns:prioritizePatterns}=_ref;const tabs=(0,react.useMemo)((()=>{const tempTabs=[];return prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),tempTabs.push(blocksTab),!prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),showMedia&&tempTabs.push(mediaTab),showReusableBlocks&&tempTabs.push(reusableBlocksTab),tempTabs}),[prioritizePatterns,blocksTab,showPatterns,patternsTab,showReusableBlocks,showMedia,reusableBlocksTab]);return(0,jsx_runtime.jsx)(tab_panel.Z,{className:"block-editor-inserter__tabs",tabs:tabs,onSelect:onSelect,children:children})}InserterTabs.displayName="InserterTabs",InserterTabs.__docgenInfo={description:"",methods:[],displayName:"InserterTabs",props:{showPatterns:{defaultValue:{value:"false",computed:!1},required:!1},showReusableBlocks:{defaultValue:{value:"false",computed:!1},required:!1},showMedia:{defaultValue:{value:"false",computed:!1},required:!1}}};var tabs=InserterTabs;function InserterMenu(_ref,ref){let{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,onSelect:onSelect,showInserterHelpPanel:showInserterHelpPanel,showMostUsedBlocks:showMostUsedBlocks,__experimentalFilterValue:__experimentalFilterValue="",shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns}=_ref;const[filterValue,setFilterValue,delayedFilterValue]=useDebouncedInput(__experimentalFilterValue),[hoveredItem,setHoveredItem]=(0,react.useState)(null),[selectedPatternCategory,setSelectedPatternCategory]=(0,react.useState)(null),[selectedMediaCategory,setSelectedMediaCategory]=(0,react.useState)(null),[selectedTab,setSelectedTab]=(0,react.useState)(null),[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]=(0,use_insertion_point.Z)({rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock}),{showPatterns:showPatterns,inserterItems:inserterItems}=(0,use_select.Z)((select=>{const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getInserterItems:getInserterItems}=select(store.h);return{showPatterns:!!__experimentalGetAllowedPatterns(destinationRootClientId).length,inserterItems:getInserterItems(destinationRootClientId)}}),[destinationRootClientId]),hasReusableBlocks=(0,react.useMemo)((()=>inserterItems.some((_ref2=>{let{category:category}=_ref2;return"reusable"===category}))),[inserterItems]),showMedia=!!useMediaCategories(destinationRootClientId).length,onInsert=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock)=>{onInsertBlocks(blocks,meta,shouldForceFocusBlock),onSelect()}),[onInsertBlocks,onSelect]),onInsertPattern=(0,react.useCallback)(((blocks,patternName)=>{onInsertBlocks(blocks,{patternName:patternName}),onSelect()}),[onInsertBlocks,onSelect]),onHover=(0,react.useCallback)((item=>{onToggleInsertionPoint(!!item),setHoveredItem(item)}),[onToggleInsertionPoint,setHoveredItem]),onClickPatternCategory=(0,react.useCallback)((patternCategory=>{setSelectedPatternCategory(patternCategory)}),[setSelectedPatternCategory]),blocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,jsx_runtime.jsx)(block_types_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks})}),showInserterHelpPanel&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__tips",children:[(0,jsx_runtime.jsx)(component.Z,{as:"h2",children:(0,build_module.__)("A tip for using the block editor")}),(0,jsx_runtime.jsx)(tips,{})]})]})),[destinationRootClientId,onInsert,onHover,delayedFilterValue,showMostUsedBlocks,showInserterHelpPanel]),patternsTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(block_patterns_tab,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onSelectCategory:onClickPatternCategory,selectedCategory:selectedPatternCategory})),[destinationRootClientId,onInsertPattern,onClickPatternCategory,selectedPatternCategory]),reusableBlocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(reusable_blocks_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover})),[destinationRootClientId,onInsert,onHover]),mediaTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(media_tab,{rootClientId:destinationRootClientId,selectedCategory:selectedMediaCategory,onSelectCategory:setSelectedMediaCategory,onInsert:onInsert})),[destinationRootClientId,onInsert,selectedMediaCategory,setSelectedMediaCategory]),getCurrentTab=(0,react.useCallback)((tab=>"blocks"===tab.name?blocksTab:"patterns"===tab.name?patternsTab:"reusable"===tab.name?reusableBlocksTab:"media"===tab.name?mediaTab:void 0),[blocksTab,patternsTab,reusableBlocksTab,mediaTab]),searchRef=(0,react.useRef)();(0,react.useImperativeHandle)(ref,(()=>({focusSearch:()=>{searchRef.current.focus()}})));const showPatternPanel="patterns"===selectedTab&&!delayedFilterValue&&selectedPatternCategory,showAsTabs=!delayedFilterValue&&(showPatterns||hasReusableBlocks||showMedia),showMediaPanel="media"===selectedTab&&!delayedFilterValue&&selectedMediaCategory;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__menu",children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-inserter__main-area",{"show-as-tabs":showAsTabs}),children:[(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:value=>{hoveredItem&&setHoveredItem(null),setFilterValue(value)},value:filterValue,label:(0,build_module.__)("Search for blocks and patterns"),placeholder:(0,build_module.__)("Search"),ref:searchRef}),!!delayedFilterValue&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__no-tab-container",children:(0,jsx_runtime.jsx)(search_results.Z,{filterValue:delayedFilterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,showBlockDirectory:!0,shouldFocusBlock:shouldFocusBlock})}),showAsTabs&&(0,jsx_runtime.jsx)(tabs,{showPatterns:showPatterns,showReusableBlocks:hasReusableBlocks,showMedia:showMedia,prioritizePatterns:prioritizePatterns,onSelect:setSelectedTab,children:getCurrentTab}),!delayedFilterValue&&!showAsTabs&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__no-tab-container",children:blocksTab})]}),showMediaPanel&&(0,jsx_runtime.jsx)(MediaCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsert,category:selectedMediaCategory}),showInserterHelpPanel&&hoveredItem&&(0,jsx_runtime.jsx)(preview_panel,{item:hoveredItem}),showPatternPanel&&(0,jsx_runtime.jsx)(BlockPatternsCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onHover:onHover,category:selectedPatternCategory,showTitlesAsTooltip:!0})]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/tabs.js"]={name:"InserterTabs",docgenInfo:InserterTabs.__docgenInfo,path:"packages/block-editor/src/components/inserter/tabs.js"}),InserterMenu.displayName="InserterMenu",InserterMenu.__docgenInfo={description:"",methods:[],displayName:"InserterMenu",props:{__experimentalFilterValue:{defaultValue:{value:"''",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}};var menu=(0,react.forwardRef)(InserterMenu);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/menu.js"]={name:"InserterMenu",docgenInfo:InserterMenu.__docgenInfo,path:"packages/block-editor/src/components/inserter/menu.js"})},"./packages/block-editor/src/components/inserter/no-results.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/icons/build-module/library/block-default.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterNoResults(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z,{className:"block-editor-inserter__no-results-icon",icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_3__.Z}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("No results found.")})]})}InserterNoResults.displayName="InserterNoResults",InserterNoResults.__docgenInfo={description:"",methods:[],displayName:"InserterNoResults"},__webpack_exports__.Z=InserterNoResults,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/no-results.js"]={name:"InserterNoResults",docgenInfo:InserterNoResults.__docgenInfo,path:"packages/block-editor/src/components/inserter/no-results.js"})},"./packages/block-editor/src/components/inserter/panel.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/icon/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterPanel(_ref){let{title:title,icon:icon,children:children}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"block-editor-inserter__panel-header",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"block-editor-inserter__panel-title",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Z,{icon:icon})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"block-editor-inserter__panel-content",children:children})]})}InserterPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPanel"},__webpack_exports__.Z=InserterPanel,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/panel.js"]={name:"InserterPanel",docgenInfo:InserterPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/panel.js"})},"./packages/block-editor/src/components/inserter/search-items.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{z9:function(){return searchBlockItems},KT:function(){return searchItems}});var remove_accents__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(remove_accents__WEBPACK_IMPORTED_MODULE_0__),change_case__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");const defaultGetName=item=>item.name||"",defaultGetTitle=item=>item.title,defaultGetDescription=item=>item.description||"",defaultGetKeywords=item=>item.keywords||[],defaultGetCategory=item=>item.category,defaultGetCollection=()=>null;function extractWords(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,change_case__WEBPACK_IMPORTED_MODULE_1__.B)(input,{splitRegexp:[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],stripRegexp:/(\p{C}|\p{P}|\p{S})+/giu}).split(" ").filter(Boolean)}function normalizeSearchInput(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return input=remove_accents__WEBPACK_IMPORTED_MODULE_0___default()(input),input=input.replace(/^\//,""),input=input.toLowerCase(),input}const getNormalizedSearchTerms=function(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return extractWords(normalizeSearchInput(input))},removeMatchingTerms=(unmatchedTerms,unprocessedTerms)=>unmatchedTerms.filter((term=>!getNormalizedSearchTerms(unprocessedTerms).some((unprocessedTerm=>unprocessedTerm.includes(term))))),searchBlockItems=(items,categories,collections,searchInput)=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;return searchItems(items,searchInput,{getCategory:item=>{var _categories$find;return null===(_categories$find=categories.find((_ref=>{let{slug:slug}=_ref;return slug===item.category})))||void 0===_categories$find?void 0:_categories$find.title},getCollection:item=>{var _collections$item$nam;return null===(_collections$item$nam=collections[item.name.split("/")[0]])||void 0===_collections$item$nam?void 0:_collections$item$nam.title}})},searchItems=function(){let items=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],searchInput=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const normalizedSearchTerms=getNormalizedSearchTerms(searchInput);if(0===normalizedSearchTerms.length)return items;const rankedItems=items.map((item=>[item,getItemSearchRank(item,searchInput,config)])).filter((_ref2=>{let[,rank]=_ref2;return rank>0}));return rankedItems.sort(((_ref3,_ref4)=>{let[,rank1]=_ref3,[,rank2]=_ref4;return rank2-rank1})),rankedItems.map((_ref5=>{let[item]=_ref5;return item}))};function getItemSearchRank(item,searchTerm){let config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{getName:getName=defaultGetName,getTitle:getTitle=defaultGetTitle,getDescription:getDescription=defaultGetDescription,getKeywords:getKeywords=defaultGetKeywords,getCategory:getCategory=defaultGetCategory,getCollection:getCollection=defaultGetCollection}=config,name=getName(item),title=getTitle(item),description=getDescription(item),keywords=getKeywords(item),category=getCategory(item),collection=getCollection(item),normalizedSearchInput=normalizeSearchInput(searchTerm),normalizedTitle=normalizeSearchInput(title);let rank=0;if(normalizedSearchInput===normalizedTitle)rank+=30;else if(normalizedTitle.startsWith(normalizedSearchInput))rank+=20;else{const terms=[name,title,description,...keywords,category,collection].join(" "),normalizedSearchTerms=extractWords(normalizedSearchInput);0===removeMatchingTerms(normalizedSearchTerms,terms).length&&(rank+=10)}if(0!==rank&&name.startsWith("core/")){rank+=name!==item.id?1:2}return rank}},"./packages/block-editor/src/components/inserter/search-results.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return search_results}});var react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),block_types_list=__webpack_require__("./packages/block-editor/src/components/block-types-list/index.js"),block_patterns_list=__webpack_require__("./packages/block-editor/src/components/block-patterns-list/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const{Fill:__unstableInserterMenuExtension,Slot:Slot}=(0,slot_fill.up)("__unstableInserterMenuExtension");__unstableInserterMenuExtension.Slot=Slot;var inserter_menu_extension=__unstableInserterMenuExtension,panel=__webpack_require__("./packages/block-editor/src/components/inserter/panel.js"),no_results=__webpack_require__("./packages/block-editor/src/components/inserter/no-results.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),search_items=__webpack_require__("./packages/block-editor/src/components/inserter/search-items.js"),inserter_listbox=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/index.js"),sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const EMPTY_ARRAY=[];function InserterSearchResults(_ref){let{filterValue:filterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:maxBlockTypes,showBlockDirectory:showBlockDirectory=!1,isDraggable:isDraggable=!0,shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.Z)({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes,blockTypeCategories,blockTypeCollections,onSelectBlockType]=(0,use_block_types_state.Z)(destinationRootClientId,onInsertBlocks),[patterns,,onSelectBlockPattern]=(0,use_patterns_state.Z)(onInsertBlocks,destinationRootClientId),filteredBlockPatterns=(0,react.useMemo)((()=>{if(0===maxBlockPatterns)return[];const results=(0,search_items.KT)(patterns,filterValue);return void 0!==maxBlockPatterns?results.slice(0,maxBlockPatterns):results}),[filterValue,patterns,maxBlockPatterns]);let maxBlockTypesToShow=maxBlockTypes;prioritizePatterns&&filteredBlockPatterns.length>2&&(maxBlockTypesToShow=0);const filteredBlockTypes=(0,react.useMemo)((()=>{if(0===maxBlockTypesToShow)return[];const results=(0,search_items.z9)((0,sorting.X)(blockTypes,"frecency","desc"),blockTypeCategories,blockTypeCollections,filterValue);return void 0!==maxBlockTypesToShow?results.slice(0,maxBlockTypesToShow):results}),[filterValue,blockTypes,blockTypeCategories,blockTypeCollections,maxBlockTypes]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockTypes.length+filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.gB)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownBlockTypes=(0,use_async_list.Z)(filteredBlockTypes,{step:9}),currentShownPatterns=(0,use_async_list.Z)(currentShownBlockTypes.length===filteredBlockTypes.length?filteredBlockPatterns:EMPTY_ARRAY),hasItems=filteredBlockTypes.length>0||filteredBlockPatterns.length>0,blocksUI=!!filteredBlockTypes.length&&(0,jsx_runtime.jsx)(panel.Z,{title:(0,jsx_runtime.jsx)(component.Z,{children:(0,build_module.__)("Blocks")}),children:(0,jsx_runtime.jsx)(block_types_list.Z,{items:currentShownBlockTypes,onSelect:onSelectBlockType,onHover:onHover,label:(0,build_module.__)("Blocks"),isDraggable:isDraggable})}),patternsUI=!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)(panel.Z,{title:(0,jsx_runtime.jsx)(component.Z,{children:(0,build_module.__)("Block Patterns")}),children:(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-patterns",children:(0,jsx_runtime.jsx)(block_patterns_list.Z,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,onHover:onHover,isDraggable:isDraggable})})});return(0,jsx_runtime.jsxs)(inserter_listbox.ZP,{children:[!showBlockDirectory&&!hasItems&&(0,jsx_runtime.jsx)(no_results.Z,{}),prioritizePatterns?patternsUI:blocksUI,!!filteredBlockTypes.length&&!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-separator"}),prioritizePatterns?blocksUI:patternsUI,showBlockDirectory&&(0,jsx_runtime.jsx)(inserter_menu_extension.Slot,{fillProps:{onSelect:onSelectBlockType,onHover:onHover,filterValue:filterValue,hasItems:hasItems,rootClientId:destinationRootClientId},children:fills=>fills.length?fills:hasItems?null:(0,jsx_runtime.jsx)(no_results.Z,{})})]})}InserterSearchResults.displayName="InserterSearchResults",InserterSearchResults.__docgenInfo={description:"",methods:[],displayName:"InserterSearchResults",props:{showBlockDirectory:{defaultValue:{value:"false",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}};var search_results=InserterSearchResults;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/search-results.js"]={name:"InserterSearchResults",docgenInfo:InserterSearchResults.__docgenInfo,path:"packages/block-editor/src/components/inserter/search-results.js"})},"./packages/block-editor/src/components/inspector-controls/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return inspector_controls}});var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),context=__webpack_require__("./packages/components/build-module/tools-panel/context.js"),use_display_block_controls=__webpack_require__("./packages/block-editor/src/components/use-display-block-controls/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const InspectorControlsDefault=(0,slot_fill.up)("InspectorControls"),InspectorControlsAdvanced=(0,slot_fill.up)("InspectorAdvancedControls"),InspectorControlsBorder=(0,slot_fill.up)("InspectorControlsBorder"),InspectorControlsColor=(0,slot_fill.up)("InspectorControlsColor"),InspectorControlsDimensions=(0,slot_fill.up)("InspectorControlsDimensions"),InspectorControlsPosition=(0,slot_fill.up)("InspectorControlsPosition"),InspectorControlsTypography=(0,slot_fill.up)("InspectorControlsTypography");var inspector_controls_groups={default:InspectorControlsDefault,advanced:InspectorControlsAdvanced,border:InspectorControlsBorder,color:InspectorControlsColor,dimensions:InspectorControlsDimensions,list:(0,slot_fill.up)("InspectorControlsListView"),typography:InspectorControlsTypography,position:InspectorControlsPosition},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsFill(_ref){var _groups$group;let{__experimentalGroup:group="default",children:children}=_ref;const isDisplayed=(0,use_display_block_controls.Z)(),Fill=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill;return Fill?isDisplayed?(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,jsx_runtime.jsx)(context.h.Provider,{value:value,children:children})}})}):null:(void 0!==process&&process.env,null)}InspectorControlsFill.displayName="InspectorControlsFill",InspectorControlsFill.__docgenInfo={description:"",methods:[],displayName:"InspectorControlsFill",props:{__experimentalGroup:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/fill.js"]={name:"InspectorControlsFill",docgenInfo:InspectorControlsFill.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/fill.js"});var use_slot=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot.js"),use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js"),component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel/component.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),react=__webpack_require__("./node_modules/react/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),utils=__webpack_require__("./packages/block-editor/src/hooks/utils.js");function BlockSupportToolsPanel(_ref){let{children:children,group:group,label:label}=_ref;const{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),{getBlockAttributes:getBlockAttributes,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,getSelectedBlockClientId:getSelectedBlockClientId,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),panelId=getSelectedBlockClientId(),resetAll=(0,react.useCallback)((function(){let resetFilters=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const newAttributes={},clientIds=hasMultiSelection()?getMultiSelectedBlockClientIds():[panelId];clientIds.forEach((clientId=>{const{style:style}=getBlockAttributes(clientId);let newBlockAttributes={style:style};resetFilters.forEach((resetFilter=>{newBlockAttributes={...newBlockAttributes,...resetFilter(newBlockAttributes)}})),newBlockAttributes={...newBlockAttributes,style:(0,utils.QU)(newBlockAttributes.style)},newAttributes[clientId]=newBlockAttributes})),updateBlockAttributes(clientIds,newAttributes,!0)}),[utils.QU,getBlockAttributes,getMultiSelectedBlockClientIds,hasMultiSelection,panelId,updateBlockAttributes]);return(0,jsx_runtime.jsx)(component.Z,{className:`${group}-block-support-panel`,label:label,resetAll:resetAll,panelId:panelId,hasInnerWrapper:!0,shouldRenderPlaceholderItems:!0,__experimentalFirstVisibleItemClass:"first",__experimentalLastVisibleItemClass:"last",children:children},panelId)}function BlockSupportSlotContainer(_ref){let{Slot:Slot,...props}=_ref;const toolsPanelContext=(0,react.useContext)(context.h);return(0,jsx_runtime.jsx)(Slot,{...props,fillProps:toolsPanelContext,bubblesVirtually:!0})}BlockSupportToolsPanel.displayName="BlockSupportToolsPanel",BlockSupportToolsPanel.__docgenInfo={description:"",methods:[],displayName:"BlockSupportToolsPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js"]={name:"BlockSupportToolsPanel",docgenInfo:BlockSupportToolsPanel.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js"}),BlockSupportSlotContainer.displayName="BlockSupportSlotContainer",BlockSupportSlotContainer.__docgenInfo={description:"",methods:[],displayName:"BlockSupportSlotContainer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/block-support-slot-container.js"]={name:"BlockSupportSlotContainer",docgenInfo:BlockSupportSlotContainer.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/block-support-slot-container.js"});var slot_process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsSlot(_ref){var _groups$group;let{__experimentalGroup:group="default",label:label,...props}=_ref;const Slot=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Slot,slot=(0,use_slot.Z)(null==Slot?void 0:Slot.__unstableName),fills=(0,use_slot_fills.Z)(null==Slot?void 0:Slot.__unstableName);if(!Slot||!slot)return void 0!==slot_process&&slot_process.env,null;return Boolean(fills&&fills.length)?label?(0,jsx_runtime.jsx)(BlockSupportToolsPanel,{group:group,label:label,children:(0,jsx_runtime.jsx)(BlockSupportSlotContainer,{...props,Slot:Slot})}):(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0}):null}InspectorControlsSlot.displayName="InspectorControlsSlot",InspectorControlsSlot.__docgenInfo={description:"",methods:[],displayName:"InspectorControlsSlot",props:{__experimentalGroup:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/slot.js"]={name:"InspectorControlsSlot",docgenInfo:InspectorControlsSlot.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/slot.js"});const InspectorControls=InspectorControlsFill;InspectorControls.Slot=InspectorControlsSlot;const InspectorAdvancedControls=props=>(0,jsx_runtime.jsx)(InspectorControlsFill,{...props,__experimentalGroup:"advanced"});InspectorAdvancedControls.displayName="InspectorAdvancedControls",InspectorAdvancedControls.Slot=props=>(0,jsx_runtime.jsx)(InspectorControlsSlot,{...props,__experimentalGroup:"advanced"}),InspectorAdvancedControls.slotName="InspectorAdvancedControls";var inspector_controls=InspectorControls;InspectorAdvancedControls.__docgenInfo={description:"",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"InspectorAdvancedControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/index.js"]={name:"InspectorAdvancedControls",docgenInfo:InspectorAdvancedControls.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/index.js"})},"./packages/block-editor/src/components/provider/block-refs-provider.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{N:function(){return BlockRefs},m:function(){return BlockRefsProvider}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BlockRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createContext)({refs:new Map,callbacks:new Map});function BlockRefsProvider(_ref){let{children:children}=_ref;const value=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({refs:new Map,callbacks:new Map})),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BlockRefs.Provider,{value:value,children:children})}BlockRefsProvider.displayName="BlockRefsProvider",BlockRefsProvider.__docgenInfo={description:"",methods:[],displayName:"BlockRefsProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/provider/block-refs-provider.js"]={name:"BlockRefsProvider",docgenInfo:BlockRefsProvider.__docgenInfo,path:"packages/block-editor/src/components/provider/block-refs-provider.js"})},"./packages/block-editor/src/components/provider/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{jC:function(){return ExperimentalBlockEditorProvider}});var use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),with_registry=__webpack_require__("./packages/data/build-module/components/with-registry/index.js"),build_module_registry=__webpack_require__("./packages/data/build-module/registry.js"),context=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),constants=__webpack_require__("./packages/block-editor/src/store/constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var with_registry_provider=(0,create_higher_order_component.o)((WrappedComponent=>(0,with_registry.Z)((_ref=>{let{useSubRegistry:useSubRegistry=!0,registry:registry,...props}=_ref;if(!useSubRegistry)return(0,jsx_runtime.jsx)(WrappedComponent,{registry:registry,...props});const[subRegistry,setSubRegistry]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const newRegistry=(0,build_module_registry.p)({},registry);newRegistry.registerStore(constants.G,store.i),setSubRegistry(newRegistry)}),[registry]),subRegistry?(0,jsx_runtime.jsx)(context.ZP,{value:subRegistry,children:(0,jsx_runtime.jsx)(WrappedComponent,{registry:subRegistry,...props})}):null}))),"withRegistryProvider"),use_block_sync=__webpack_require__("./packages/block-editor/src/components/provider/use-block-sync.js"),block_refs_provider=__webpack_require__("./packages/block-editor/src/components/provider/block-refs-provider.js"),experiments=__webpack_require__("./packages/block-editor/src/experiments.js");const ExperimentalBlockEditorProvider=with_registry_provider((props=>{const{children:children,settings:settings,stripExperimentalSettings:stripExperimentalSettings=!1}=props,{__experimentalUpdateSettings:__experimentalUpdateSettings}=(0,experiments.Un)((0,use_dispatch.Z)(store.h));return(0,react.useEffect)((()=>{__experimentalUpdateSettings({...settings,__internalIsInitialized:!0},stripExperimentalSettings)}),[settings]),(0,use_block_sync.Z)(props),(0,jsx_runtime.jsx)(block_refs_provider.m,{children:children})})),BlockEditorProvider=props=>(0,jsx_runtime.jsx)(ExperimentalBlockEditorProvider,{...props,stripExperimentalSettings:!0,children:props.children});BlockEditorProvider.displayName="BlockEditorProvider",BlockEditorProvider.__docgenInfo={description:"",methods:[],displayName:"BlockEditorProvider"};"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/provider/index.js"]={name:"BlockEditorProvider",docgenInfo:BlockEditorProvider.__docgenInfo,path:"packages/block-editor/src/components/provider/index.js"})},"./packages/block-editor/src/components/provider/use-block-sync.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useBlockSync}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");const noop=()=>{};function useBlockSync(_ref){let{clientId:clientId=null,value:controlledBlocks,selection:controlledSelection,onChange:onChange=noop,onInput:onInput=noop}=_ref;const registry=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)(),{resetBlocks:resetBlocks,resetSelection:resetSelection,replaceInnerBlocks:replaceInnerBlocks,setHasControlledInnerBlocks:setHasControlledInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=registry.dispatch(_store__WEBPACK_IMPORTED_MODULE_1__.h),{getBlockName:getBlockName,getBlocks:getBlocks}=registry.select(_store__WEBPACK_IMPORTED_MODULE_1__.h),isControlled=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_3__.Z)((select=>!clientId||select(_store__WEBPACK_IMPORTED_MODULE_1__.h).areInnerBlocksControlled(clientId)),[clientId]),pendingChanges=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)({incoming:null,outgoing:[]}),subscribed=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(!1),setControlledBlocks=()=>{controlledBlocks&&(__unstableMarkNextChangeAsNotPersistent(),clientId?registry.batch((()=>{setHasControlledInnerBlocks(clientId,!0);const storeBlocks=controlledBlocks.map((block=>(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wm)(block)));subscribed.current&&(pendingChanges.current.incoming=storeBlocks),__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,storeBlocks)})):(subscribed.current&&(pendingChanges.current.incoming=controlledBlocks),resetBlocks(controlledBlocks)))},onInputRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(onInput),onChangeRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(onChange);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{onInputRef.current=onInput,onChangeRef.current=onChange}),[onInput,onChange]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{pendingChanges.current.outgoing.includes(controlledBlocks)?pendingChanges.current.outgoing[pendingChanges.current.outgoing.length-1]===controlledBlocks&&(pendingChanges.current.outgoing=[]):getBlocks(clientId)!==controlledBlocks&&(pendingChanges.current.outgoing=[],setControlledBlocks(),controlledSelection&&resetSelection(controlledSelection.selectionStart,controlledSelection.selectionEnd,controlledSelection.initialPosition))}),[controlledBlocks,clientId]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{isControlled||(pendingChanges.current.outgoing=[],setControlledBlocks())}),[isControlled]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{const{getSelectionStart:getSelectionStart,getSelectionEnd:getSelectionEnd,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isLastBlockChangePersistent:isLastBlockChangePersistent,__unstableIsLastBlockChangeIgnored:__unstableIsLastBlockChangeIgnored,areInnerBlocksControlled:areInnerBlocksControlled}=registry.select(_store__WEBPACK_IMPORTED_MODULE_1__.h);let blocks=getBlocks(clientId),isPersistent=isLastBlockChangePersistent(),previousAreBlocksDifferent=!1;subscribed.current=!0;const unsubscribe=registry.subscribe((()=>{if(null!==clientId&&null===getBlockName(clientId))return;if(!(!clientId||areInnerBlocksControlled(clientId)))return;const newIsPersistent=isLastBlockChangePersistent(),newBlocks=getBlocks(clientId),areBlocksDifferent=newBlocks!==blocks;if(blocks=newBlocks,areBlocksDifferent&&(pendingChanges.current.incoming||__unstableIsLastBlockChangeIgnored()))return pendingChanges.current.incoming=null,void(isPersistent=newIsPersistent);if(areBlocksDifferent||previousAreBlocksDifferent&&!areBlocksDifferent&&newIsPersistent&&!isPersistent){isPersistent=newIsPersistent,pendingChanges.current.outgoing.push(blocks);(isPersistent?onChangeRef.current:onInputRef.current)(blocks,{selection:{selectionStart:getSelectionStart(),selectionEnd:getSelectionEnd(),initialPosition:getSelectedBlocksInitialCaretPosition()}})}previousAreBlocksDifferent=areBlocksDifferent}));return()=>unsubscribe()}),[registry,clientId])}},"./packages/block-editor/src/components/url-input/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/dom-scroll-into-view/lib/index.js"),dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_1__),_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/deprecated/build-module/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/i18n/build-module/index.js"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/keycodes/build-module/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/components/build-module/base-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/components/build-module/spinner/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/components/build-module/popover/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/components/build-module/button/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/components/build-module/higher-order/with-spoken-messages/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/compose/build-module/higher-order/with-safe-timeout/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./packages/compose/build-module/higher-order/with-instance-id/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),_wordpress_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/url/build-module/is-url.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function isFunction(maybeFunc){return"function"==typeof maybeFunc}class URLInput extends react__WEBPACK_IMPORTED_MODULE_5__.Component{constructor(props){super(props),this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.selectLink=this.selectLink.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.bindSuggestionNode=this.bindSuggestionNode.bind(this),this.autocompleteRef=props.autocompleteRef||(0,react__WEBPACK_IMPORTED_MODULE_5__.createRef)(),this.inputRef=(0,react__WEBPACK_IMPORTED_MODULE_5__.createRef)(),this.updateSuggestions=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_6__.D)(this.updateSuggestions.bind(this),200),this.suggestionNodes=[],this.suggestionsRequest=null,this.state={suggestions:[],showSuggestions:!1,isUpdatingSuggestions:!1,suggestionsValue:null,selectedSuggestion:null,suggestionsListboxId:"",suggestionOptionIdPrefix:""}}componentDidUpdate(prevProps){const{showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion}=this.state,{value:value,__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1}=this.props;showSuggestions&&null!==selectedSuggestion&&this.suggestionNodes[selectedSuggestion]&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_1___default()(this.suggestionNodes[selectedSuggestion],this.autocompleteRef.current,{onlyScrollIfNeeded:!0}),this.props.setTimeout((()=>{this.scrollingIntoView=!1}),100)),prevProps.value===value||this.props.disableSuggestions||this.state.isUpdatingSuggestions||(null!=value&&value.length?this.updateSuggestions(value):__experimentalShowInitialSuggestions&&this.updateSuggestions())}componentDidMount(){this.shouldShowInitialSuggestions()&&this.updateSuggestions()}componentWillUnmount(){var _this$suggestionsRequ,_this$suggestionsRequ2;null===(_this$suggestionsRequ=this.suggestionsRequest)||void 0===_this$suggestionsRequ||null===(_this$suggestionsRequ2=_this$suggestionsRequ.cancel)||void 0===_this$suggestionsRequ2||_this$suggestionsRequ2.call(_this$suggestionsRequ),this.suggestionsRequest=null}bindSuggestionNode(index){return ref=>{this.suggestionNodes[index]=ref}}shouldShowInitialSuggestions(){const{__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1,value:value}=this.props;return __experimentalShowInitialSuggestions&&!(value&&value.length)}updateSuggestions(){var _value;let value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{__experimentalFetchLinkSuggestions:fetchLinkSuggestions,__experimentalHandleURLSuggestions:handleURLSuggestions}=this.props;if(!fetchLinkSuggestions)return;const isInitialSuggestions=!(null!==(_value=value)&&void 0!==_value&&_value.length);var _this$suggestionsRequ3,_this$suggestionsRequ4;if(value=value.trim(),!isInitialSuggestions&&(value.length<2||!handleURLSuggestions&&(0,_wordpress_url__WEBPACK_IMPORTED_MODULE_7__.P)(value)))return null===(_this$suggestionsRequ3=this.suggestionsRequest)||void 0===_this$suggestionsRequ3||null===(_this$suggestionsRequ4=_this$suggestionsRequ3.cancel)||void 0===_this$suggestionsRequ4||_this$suggestionsRequ4.call(_this$suggestionsRequ3),this.suggestionsRequest=null,void this.setState({suggestions:[],showSuggestions:!1,suggestionsValue:value,selectedSuggestion:null,loading:!1});this.setState({isUpdatingSuggestions:!0,selectedSuggestion:null,loading:!0});const request=fetchLinkSuggestions(value,{isInitialSuggestions:isInitialSuggestions});request.then((suggestions=>{this.suggestionsRequest===request&&(this.setState({suggestions:suggestions,isUpdatingSuggestions:!1,suggestionsValue:value,loading:!1,showSuggestions:!!suggestions.length}),suggestions.length?this.props.debouncedSpeak((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",suggestions.length),suggestions.length),"assertive"):this.props.debouncedSpeak((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.__)("No results."),"assertive"))})).catch((()=>{this.suggestionsRequest===request&&this.setState({isUpdatingSuggestions:!1,loading:!1})})),this.suggestionsRequest=request}onChange(event){this.props.onChange(event.target.value)}onFocus(){const{suggestions:suggestions}=this.state,{disableSuggestions:disableSuggestions,value:value}=this.props;!value||disableSuggestions||this.state.isUpdatingSuggestions||suggestions&&suggestions.length||this.updateSuggestions(value)}onKeyDown(event){const{showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion,suggestions:suggestions,loading:loading}=this.state;if(!showSuggestions||!suggestions.length||loading){switch(event.keyCode){case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.UP:0!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(0,0));break;case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.WV:this.props.value.length!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(this.props.value.length,this.props.value.length));break;case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.K5:event.preventDefault(),this.props.onSubmit&&this.props.onSubmit(null,event)}return}const suggestion=this.state.suggestions[this.state.selectedSuggestion];switch(event.keyCode){case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.UP:{event.preventDefault();const previousIndex=selectedSuggestion?selectedSuggestion-1:suggestions.length-1;this.setState({selectedSuggestion:previousIndex});break}case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.WV:{event.preventDefault();const nextIndex=null===selectedSuggestion||selectedSuggestion===suggestions.length-1?0:selectedSuggestion+1;this.setState({selectedSuggestion:nextIndex});break}case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.Mf:null!==this.state.selectedSuggestion&&(this.selectLink(suggestion),this.props.speak((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.__)("Link selected.")));break;case _wordpress_keycodes__WEBPACK_IMPORTED_MODULE_8__.K5:event.preventDefault(),null!==this.state.selectedSuggestion?(this.selectLink(suggestion),this.props.onSubmit&&this.props.onSubmit(suggestion,event)):this.props.onSubmit&&this.props.onSubmit(null,event)}}selectLink(suggestion){this.props.onChange(suggestion.url,suggestion),this.setState({selectedSuggestion:null,showSuggestions:!1})}handleOnClick(suggestion){this.selectLink(suggestion),this.inputRef.current.focus()}static getDerivedStateFromProps(_ref,_ref2){let{value:value,instanceId:instanceId,disableSuggestions:disableSuggestions,__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1}=_ref,{showSuggestions:showSuggestions}=_ref2,shouldShowSuggestions=showSuggestions;const hasValue=value&&value.length;return __experimentalShowInitialSuggestions||hasValue||(shouldShowSuggestions=!1),!0===disableSuggestions&&(shouldShowSuggestions=!1),{showSuggestions:shouldShowSuggestions,suggestionsListboxId:`block-editor-url-input-suggestions-${instanceId}`,suggestionOptionIdPrefix:`block-editor-url-input-suggestion-${instanceId}`}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:[this.renderControl(),this.renderSuggestions()]})}renderControl(){const{__nextHasNoMarginBottom:__nextHasNoMarginBottom=!1,label:label=null,className:className,isFullWidth:isFullWidth,instanceId:instanceId,placeholder:placeholder=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.__)("Paste URL or type to search"),__experimentalRenderControl:renderControl,value:value=""}=this.props,{loading:loading,showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion,suggestionsListboxId:suggestionsListboxId,suggestionOptionIdPrefix:suggestionOptionIdPrefix}=this.state,inputId=`url-input-control-${instanceId}`,controlProps={id:inputId,label:label,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-url-input",className,{"is-full-width":isFullWidth})},inputProps={id:inputId,value:value,required:!0,className:"block-editor-url-input__input",type:"text",onChange:this.onChange,onFocus:this.onFocus,placeholder:placeholder,onKeyDown:this.onKeyDown,role:"combobox","aria-label":label?void 0:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.__)("URL"),"aria-expanded":showSuggestions,"aria-autocomplete":"list","aria-controls":suggestionsListboxId,"aria-activedescendant":null!==selectedSuggestion?`${suggestionOptionIdPrefix}-${selectedSuggestion}`:void 0,ref:this.inputRef};return renderControl?renderControl(controlProps,inputProps,loading):(__nextHasNoMarginBottom||(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_9__.Z)("Bottom margin styles for wp.blockEditor.URLInput",{since:"6.2",version:"6.5",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_10__.ZP,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,...controlProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("input",{...inputProps}),loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.ZP,{})]}))}renderSuggestions(){const{className:className,__experimentalRenderSuggestions:renderSuggestions}=this.props,{showSuggestions:showSuggestions,suggestions:suggestions,suggestionsValue:suggestionsValue,selectedSuggestion:selectedSuggestion,suggestionsListboxId:suggestionsListboxId,suggestionOptionIdPrefix:suggestionOptionIdPrefix,loading:loading}=this.state;if(!showSuggestions||0===suggestions.length)return null;const suggestionsListProps={id:suggestionsListboxId,ref:this.autocompleteRef,role:"listbox"},buildSuggestionItemProps=(suggestion,index)=>({role:"option",tabIndex:"-1",id:`${suggestionOptionIdPrefix}-${index}`,ref:this.bindSuggestionNode(index),"aria-selected":index===selectedSuggestion});return isFunction(renderSuggestions)?renderSuggestions({suggestions:suggestions,selectedSuggestion:selectedSuggestion,suggestionsListProps:suggestionsListProps,buildSuggestionItemProps:buildSuggestionItemProps,isLoading:loading,handleSuggestionClick:this.handleOnClick,isInitialSuggestions:!(null!=suggestionsValue&&suggestionsValue.length),currentInputValue:suggestionsValue}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_12__.Z,{placement:"bottom",focusOnMount:!1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{...suggestionsListProps,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-url-input__suggestions",`${className}__suggestions`),children:suggestions.map(((suggestion,index)=>(0,react__WEBPACK_IMPORTED_MODULE_5__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_13__.ZP,{...buildSuggestionItemProps(0,index),key:suggestion.id,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-url-input__suggestion",{"is-selected":index===selectedSuggestion}),onClick:()=>this.handleOnClick(suggestion)},suggestion.title)))})})}}URLInput.displayName="URLInput",URLInput.__docgenInfo={description:"",methods:[{name:"bindSuggestionNode",docblock:null,modifiers:[],params:[{name:"index",type:null}],returns:null},{name:"shouldShowInitialSuggestions",docblock:null,modifiers:[],params:[],returns:null},{name:"updateSuggestions",docblock:null,modifiers:[],params:[{name:"value",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"onFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"selectLink",docblock:null,modifiers:[],params:[{name:"suggestion",type:null}],returns:null},{name:"handleOnClick",docblock:null,modifiers:[],params:[{name:"suggestion",type:null}],returns:null},{name:"renderControl",docblock:null,modifiers:[],params:[],returns:null},{name:"renderSuggestions",docblock:null,modifiers:[],params:[],returns:null}],displayName:"URLInput"},__webpack_exports__.Z=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_14__.Z)(_wordpress_compose__WEBPACK_IMPORTED_MODULE_15__.Z,_wordpress_components__WEBPACK_IMPORTED_MODULE_16__.Z,_wordpress_compose__WEBPACK_IMPORTED_MODULE_17__.Z,(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_18__.Z)(((select,props)=>{if(isFunction(props.__experimentalFetchLinkSuggestions))return;const{getSettings:getSettings}=select(_store__WEBPACK_IMPORTED_MODULE_3__.h);return{__experimentalFetchLinkSuggestions:getSettings().__experimentalFetchLinkSuggestions}})))(URLInput),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/url-input/index.js"]={name:"URLInput",docgenInfo:URLInput.__docgenInfo,path:"packages/block-editor/src/components/url-input/index.js"})},"./packages/block-editor/src/components/use-block-display-information/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useBlockDisplayInformation}});var _wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");function useBlockDisplayInformation(clientId){return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>{if(!clientId)return null;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(_store__WEBPACK_IMPORTED_MODULE_1__.h),{getBlockType:getBlockType,getActiveBlockVariation:getActiveBlockVariation}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.h),blockName=getBlockName(clientId),blockType=getBlockType(blockName);if(!blockType)return null;const attributes=getBlockAttributes(clientId),match=getActiveBlockVariation(blockName,attributes),isSynced=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.vr)(blockType)||(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.zQ)(blockType),blockTypeInfo={isSynced:isSynced,title:blockType.title,icon:blockType.icon,description:blockType.description,anchor:null==attributes?void 0:attributes.anchor};return match?{isSynced:isSynced,title:match.title||blockType.title,icon:match.icon||blockType.icon,description:match.description||blockType.description,anchor:null==attributes?void 0:attributes.anchor}:blockTypeInfo}),[clientId])}},"./packages/block-editor/src/components/use-display-block-controls/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useDisplayBlockControls}});var _wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_block_edit_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js"),_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/block-editor/src/store/index.js");function useDisplayBlockControls(){const{isSelected:isSelected,clientId:clientId,name:name}=(0,_block_edit_context__WEBPACK_IMPORTED_MODULE_1__.Z8)();return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>{if(isSelected)return!0;const{getBlockName:getBlockName,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=select(_store__WEBPACK_IMPORTED_MODULE_0__.h);return!!isFirstMultiSelectedBlock(clientId)&&getMultiSelectedBlockClientIds().every((id=>getBlockName(id)===name))}),[clientId,isSelected,name])}},"./packages/block-editor/src/components/use-moving-animation/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _react_spring_web__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");const counterReducer=state=>state+1,getAbsolutePosition=element=>({top:element.offsetTop,left:element.offsetLeft});__webpack_exports__.Z=function useMovingAnimation(_ref){let{isSelected:isSelected,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:triggerAnimationOnChange}=_ref;const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useRef)(),prefersReducedMotion=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.Z)()||!enableAnimation,[triggeredAnimation,triggerAnimation]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useReducer)(counterReducer,0),[finishedAnimation,endAnimation]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useReducer)(counterReducer,0),[transform,setTransform]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useState)({x:0,y:0}),previous=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>ref.current?getAbsolutePosition(ref.current):null),[triggerAnimationOnChange]),preserveScrollPosition=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>{if(!adjustScrolling||!ref.current)return()=>{};const scrollContainer=(0,_wordpress_dom__WEBPACK_IMPORTED_MODULE_3__.Z)(ref.current);if(!scrollContainer)return()=>{};const prevRect=ref.current.getBoundingClientRect();return()=>{const diff=ref.current.getBoundingClientRect().top-prevRect.top;diff&&(scrollContainer.scrollTop+=diff)}}),[triggerAnimationOnChange,adjustScrolling]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)((()=>{triggeredAnimation&&endAnimation()}),[triggeredAnimation]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)((()=>{if(!previous)return;if(prefersReducedMotion)return void preserveScrollPosition();ref.current.style.transform=void 0;const destination=getAbsolutePosition(ref.current);triggerAnimation(),setTransform({x:Math.round(previous.left-destination.left),y:Math.round(previous.top-destination.top)})}),[triggerAnimationOnChange]),(0,_react_spring_web__WEBPACK_IMPORTED_MODULE_0__.useSpring)({from:{x:transform.x,y:transform.y},to:{x:0,y:0},reset:triggeredAnimation!==finishedAnimation,config:{mass:5,tension:2e3,friction:200},immediate:prefersReducedMotion,onChange:function onChange(_ref2){let{value:value}=_ref2;if(!ref.current)return;let{x:x,y:y}=value;x=Math.round(x),y=Math.round(y);const finishedMoving=0===x&&0===y;ref.current.style.transformOrigin="center center",ref.current.style.transform=finishedMoving?void 0:`translate3d(${x}px,${y}px,0)`,ref.current.style.zIndex=isSelected?"1":"",preserveScrollPosition()}}),ref}},"./packages/block-editor/src/components/use-on-block-drop/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{ZP:function(){return useOnBlockDrop}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/dom/build-module/data-transfer.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");function onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock){return event=>{const{srcRootClientId:sourceRootClientId,srcClientIds:sourceClientIds,type:dropType,blocks:blocks}=function parseDropEvent(event){let result={srcRootClientId:null,srcClientIds:null,srcIndex:null,type:null,blocks:null};if(!event.dataTransfer)return result;try{result=Object.assign(result,JSON.parse(event.dataTransfer.getData("wp-blocks")))}catch(err){return result}return result}(event);if("inserter"===dropType){clearSelectedBlock();const blocksToInsert=blocks.map((block=>(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wm)(block)));insertOrReplaceBlocks(blocksToInsert,!0,null)}if("block"===dropType){const sourceBlockIndex=getBlockIndex(sourceClientIds[0]);if(sourceRootClientId===targetRootClientId&&sourceBlockIndex===targetBlockIndex)return;if(sourceClientIds.includes(targetRootClientId)||getClientIdsOfDescendants(sourceClientIds).some((id=>id===targetRootClientId)))return;const isAtSameLevel=sourceRootClientId===targetRootClientId,draggedBlockCount=sourceClientIds.length;moveBlocks(sourceClientIds,sourceRootClientId,isAtSameLevel&&sourceBlockIndex<targetBlockIndex?targetBlockIndex-draggedBlockCount:targetBlockIndex)}}}function onFilesDrop(targetRootClientId,targetBlockIndex,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks){return files=>{if(!hasUploadPermissions)return;const transformation=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.MC)((0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Xn)("from"),(transform=>"files"===transform.type&&canInsertBlockType(transform.blockName,targetRootClientId)&&transform.isMatch(files)));if(transformation){const blocks=transformation.transform(files,updateBlockAttributes);insertOrReplaceBlocks(blocks)}}}function onHTMLDrop(targetRootClientId,targetBlockIndex,insertOrReplaceBlocks){return HTML=>{const blocks=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.ag)({HTML:HTML,mode:"BLOCKS"});blocks.length&&insertOrReplaceBlocks(blocks)}}function useOnBlockDrop(targetRootClientId,targetBlockIndex){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{operation:operation="insert"}=options,hasUploadPermissions=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)((select=>select(_store__WEBPACK_IMPORTED_MODULE_1__.h).getSettings().mediaUpload),[]),{canInsertBlockType:canInsertBlockType,getBlockIndex:getBlockIndex,getClientIdsOfDescendants:getClientIdsOfDescendants,getBlockOrder:getBlockOrder,getBlocksByClientId:getBlocksByClientId}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)(_store__WEBPACK_IMPORTED_MODULE_1__.h),{insertBlocks:insertBlocks,moveBlocksToPosition:moveBlocksToPosition,updateBlockAttributes:updateBlockAttributes,clearSelectedBlock:clearSelectedBlock,replaceBlocks:replaceBlocks,removeBlocks:removeBlocks}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_3__.Z)(_store__WEBPACK_IMPORTED_MODULE_1__.h),registry=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.Z)(),insertOrReplaceBlocks=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useCallback)((function(blocks){let updateSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],initialPosition=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("replace"===operation){const clientId=getBlockOrder(targetRootClientId)[targetBlockIndex];replaceBlocks(clientId,blocks,void 0,initialPosition)}else insertBlocks(blocks,targetBlockIndex,targetRootClientId,updateSelection,initialPosition)}),[operation,getBlockOrder,insertBlocks,replaceBlocks,targetBlockIndex,targetRootClientId]),moveBlocks=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useCallback)(((sourceClientIds,sourceRootClientId,insertIndex)=>{if("replace"===operation){const sourceBlocks=getBlocksByClientId(sourceClientIds),targetBlockClientId=getBlockOrder(targetRootClientId)[targetBlockIndex];registry.batch((()=>{removeBlocks(sourceClientIds,!1),replaceBlocks(targetBlockClientId,sourceBlocks,void 0,0)}))}else moveBlocksToPosition(sourceClientIds,sourceRootClientId,targetRootClientId,insertIndex)}),[operation,getBlockOrder,getBlocksByClientId,insertBlocks,moveBlocksToPosition,removeBlocks,targetBlockIndex,targetRootClientId]),_onDrop=onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock),_onFilesDrop=onFilesDrop(targetRootClientId,0,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks),_onHTMLDrop=onHTMLDrop(0,0,insertOrReplaceBlocks);return event=>{const files=(0,_wordpress_dom__WEBPACK_IMPORTED_MODULE_6__.f)(event.dataTransfer),html=event.dataTransfer.getData("text/html");html?_onHTMLDrop(html):files.length?_onFilesDrop(files):_onDrop(event)}}},"./packages/block-editor/src/components/use-setting/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useSetting}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/hooks/build-module/index.js"),_block_edit__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js");const blockedPaths=["color","border","dimensions","typography","spacing"],deprecatedFlags={"color.palette":settings=>settings.colors,"color.gradients":settings=>settings.gradients,"color.custom":settings=>void 0===settings.disableCustomColors?void 0:!settings.disableCustomColors,"color.customGradient":settings=>void 0===settings.disableCustomGradients?void 0:!settings.disableCustomGradients,"typography.fontSizes":settings=>settings.fontSizes,"typography.customFontSize":settings=>void 0===settings.disableCustomFontSizes?void 0:!settings.disableCustomFontSizes,"typography.lineHeight":settings=>settings.enableCustomLineHeight,"spacing.units":settings=>{if(void 0!==settings.enableCustomUnits)return!0===settings.enableCustomUnits?["px","em","rem","vh","vw","%"]:settings.enableCustomUnits},"spacing.padding":settings=>settings.enableCustomSpacing},prefixedFlags={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"};function useSetting(path){const{name:blockName,clientId:clientId}=(0,_block_edit__WEBPACK_IMPORTED_MODULE_4__.Z8)();return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.Z)((select=>{if(blockedPaths.includes(path))return void console.warn("Top level useSetting paths are disabled. Please use a subpath to query the information needed.");let result=(0,_wordpress_hooks__WEBPACK_IMPORTED_MODULE_2__.O)("blockEditor.useSetting.before",void 0,path,clientId,blockName);if(void 0!==result)return result;const normalizedPath=(path=>prefixedFlags[path]||path)(path),candidates=[clientId,...select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockParents(clientId,!0)];for(const candidateClientId of candidates){const candidateBlockName=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockName(candidateClientId);if((0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.zb)(candidateBlockName,"__experimentalSettings",!1)){var _get;const candidateAtts=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockAttributes(candidateClientId);if(result=null!==(_get=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(candidateAtts,`settings.blocks.${blockName}.${normalizedPath}`))&&void 0!==_get?_get:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(candidateAtts,`settings.${normalizedPath}`),void 0!==result)break}}const settings=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getSettings();if(void 0===result){var _get2;const defaultsPath=`__experimentalFeatures.${normalizedPath}`,blockPath=`__experimentalFeatures.blocks.${blockName}.${normalizedPath}`;result=null!==(_get2=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(settings,blockPath))&&void 0!==_get2?_get2:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(settings,defaultsPath)}var _ref,_result$custom;if(void 0!==result)return _wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.yg[normalizedPath]?null!==(_ref=null!==(_result$custom=result.custom)&&void 0!==_result$custom?_result$custom:result.theme)&&void 0!==_ref?_ref:result.default:result;const deprecatedSettingsValue=deprecatedFlags[normalizedPath]?deprecatedFlags[normalizedPath](settings):void 0;return void 0!==deprecatedSettingsValue?deprecatedSettingsValue:"typography.dropCap"===normalizedPath||void 0}),[blockName,clientId,path])}},"./packages/block-editor/src/experiments.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Un:function(){return unlock}});var global_styles_namespaceObject={};__webpack_require__.r(global_styles_namespaceObject),__webpack_require__.d(global_styles_namespaceObject,{GlobalStylesContext:function(){return GlobalStylesContext},useGlobalSetting:function(){return useGlobalSetting},useGlobalStyle:function(){return useGlobalStyle},useGlobalStylesOutput:function(){return useGlobalStylesOutput},useGlobalStylesReset:function(){return useGlobalStylesReset}});var implementation=__webpack_require__("./packages/experiments/build-module/implementation.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),react=__webpack_require__("./node_modules/react/index.js");const DEFAULT_MAXIMUM_VIEWPORT_WIDTH="1600px",DEFAULT_MINIMUM_VIEWPORT_WIDTH="768px",DEFAULT_SCALE_FACTOR=1,DEFAULT_MINIMUM_FONT_SIZE_FACTOR=.75;function getTypographyValueAndUnit(rawValue){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof rawValue&&"number"!=typeof rawValue)return null;isFinite(rawValue)&&(rawValue=`${rawValue}px`);const{coerceTo:coerceTo,rootSizeValue:rootSizeValue,acceptableUnits:acceptableUnits}={coerceTo:"",rootSizeValue:16,acceptableUnits:["rem","px","em"],...options},acceptableUnitsGroup=null==acceptableUnits?void 0:acceptableUnits.join("|"),regexUnits=new RegExp(`^(\\d*\\.?\\d+)(${acceptableUnitsGroup}){1,1}$`),matches=rawValue.match(regexUnits);if(!matches||matches.length<3)return null;let[,value,unit]=matches,returnValue=parseFloat(value);return"px"!==coerceTo||"em"!==unit&&"rem"!==unit||(returnValue*=rootSizeValue,unit=coerceTo),"px"!==unit||"em"!==coerceTo&&"rem"!==coerceTo||(returnValue/=rootSizeValue,unit=coerceTo),"em"!==coerceTo&&"rem"!==coerceTo||"em"!==unit&&"rem"!==unit||(unit=coerceTo),{value:roundToPrecision(returnValue,3),unit:unit}}function roundToPrecision(value){let digits=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const base=Math.pow(10,digits);return Number.isFinite(value)?parseFloat(Math.round(value*base)/base):void 0}function getTypographyFontSizeValue(preset,typographySettings){var _preset$fluid,_preset$fluid2;const{size:defaultSize}=preset;if(!defaultSize||"0"===defaultSize)return defaultSize;if(null==typographySettings||!typographySettings.fluid||"object"==typeof(null==typographySettings?void 0:typographySettings.fluid)&&0===Object.keys(typographySettings.fluid).length)return defaultSize;if(!1===(null==preset?void 0:preset.fluid))return defaultSize;const fluidTypographySettings="object"==typeof(null==typographySettings?void 0:typographySettings.fluid)?null==typographySettings?void 0:typographySettings.fluid:{},fluidFontSizeValue=function getComputedFluidTypographyValue(_ref){let{minimumFontSize:minimumFontSize,maximumFontSize:maximumFontSize,fontSize:fontSize,minimumViewPortWidth:minimumViewPortWidth=DEFAULT_MINIMUM_VIEWPORT_WIDTH,maximumViewPortWidth:maximumViewPortWidth=DEFAULT_MAXIMUM_VIEWPORT_WIDTH,scaleFactor:scaleFactor=DEFAULT_SCALE_FACTOR,minimumFontSizeFactor:minimumFontSizeFactor=DEFAULT_MINIMUM_FONT_SIZE_FACTOR,minimumFontSizeLimit:minimumFontSizeLimit}=_ref;if(minimumFontSizeLimit=getTypographyValueAndUnit(minimumFontSizeLimit)?minimumFontSizeLimit:"14px",fontSize){const fontSizeParsed=getTypographyValueAndUnit(fontSize);if(null==fontSizeParsed||!fontSizeParsed.unit)return null;const minimumFontSizeLimitParsed=getTypographyValueAndUnit(minimumFontSizeLimit,{coerceTo:fontSizeParsed.unit});if(null!=minimumFontSizeLimitParsed&&minimumFontSizeLimitParsed.value&&!minimumFontSize&&!maximumFontSize&&(null==fontSizeParsed?void 0:fontSizeParsed.value)<=(null==minimumFontSizeLimitParsed?void 0:minimumFontSizeLimitParsed.value))return null;if(maximumFontSize||(maximumFontSize=`${fontSizeParsed.value}${fontSizeParsed.unit}`),!minimumFontSize){const calculatedMinimumFontSize=roundToPrecision(fontSizeParsed.value*minimumFontSizeFactor,3);minimumFontSize=null!=minimumFontSizeLimitParsed&&minimumFontSizeLimitParsed.value&&calculatedMinimumFontSize<(null==minimumFontSizeLimitParsed?void 0:minimumFontSizeLimitParsed.value)?`${minimumFontSizeLimitParsed.value}${minimumFontSizeLimitParsed.unit}`:`${calculatedMinimumFontSize}${fontSizeParsed.unit}`}}const minimumFontSizeParsed=getTypographyValueAndUnit(minimumFontSize),fontSizeUnit=(null==minimumFontSizeParsed?void 0:minimumFontSizeParsed.unit)||"rem",maximumFontSizeParsed=getTypographyValueAndUnit(maximumFontSize,{coerceTo:fontSizeUnit});if(!minimumFontSizeParsed||!maximumFontSizeParsed)return null;const minimumFontSizeRem=getTypographyValueAndUnit(minimumFontSize,{coerceTo:"rem"}),maximumViewPortWidthParsed=getTypographyValueAndUnit(maximumViewPortWidth,{coerceTo:fontSizeUnit}),minumumViewPortWidthParsed=getTypographyValueAndUnit(minimumViewPortWidth,{coerceTo:fontSizeUnit});if(!maximumViewPortWidthParsed||!minumumViewPortWidthParsed||!minimumFontSizeRem)return null;const minViewPortWidthOffsetValue=roundToPrecision(minumumViewPortWidthParsed.value/100,3),viewPortWidthOffset=roundToPrecision(minViewPortWidthOffsetValue,3)+fontSizeUnit,linearFactorScaled=roundToPrecision(((maximumFontSizeParsed.value-minimumFontSizeParsed.value)/(maximumViewPortWidthParsed.value-minumumViewPortWidthParsed.value)*100||1)*scaleFactor,3);return`clamp(${minimumFontSize}, ${minimumFontSizeRem.value}${minimumFontSizeRem.unit} + ((1vw - ${viewPortWidthOffset}) * ${linearFactorScaled}), ${maximumFontSize})`}({minimumFontSize:null==preset||null===(_preset$fluid=preset.fluid)||void 0===_preset$fluid?void 0:_preset$fluid.min,maximumFontSize:null==preset||null===(_preset$fluid2=preset.fluid)||void 0===_preset$fluid2?void 0:_preset$fluid2.max,fontSize:defaultSize,minimumFontSizeLimit:null==fluidTypographySettings?void 0:fluidTypographySettings.minFontSize});return fluidFontSizeValue||defaultSize}const PRESET_METADATA=[{path:["color","palette"],valueKey:"color",cssVarInfix:"color",classes:[{classSuffix:"color",propertyName:"color"},{classSuffix:"background-color",propertyName:"background-color"},{classSuffix:"border-color",propertyName:"border-color"}]},{path:["color","gradients"],valueKey:"gradient",cssVarInfix:"gradient",classes:[{classSuffix:"gradient-background",propertyName:"background"}]},{path:["color","duotone"],cssVarInfix:"duotone",valueFunc:_ref=>{let{slug:slug}=_ref;return`url( '#wp-duotone-${slug}' )`},classes:[]},{path:["typography","fontSizes"],valueFunc:(preset,_ref2)=>{let{typography:typographySettings}=_ref2;return getTypographyFontSizeValue(preset,typographySettings)},valueKey:"size",cssVarInfix:"font-size",classes:[{classSuffix:"font-size",propertyName:"font-size"}]},{path:["typography","fontFamilies"],valueKey:"fontFamily",cssVarInfix:"font-family",classes:[{classSuffix:"font-family",propertyName:"font-family"}]},{path:["spacing","spacingSizes"],valueKey:"size",cssVarInfix:"spacing",valueFunc:_ref3=>{let{size:size}=_ref3;return size},classes:[]}],STYLE_PATH_TO_CSS_VAR_INFIX={"color.background":"color","color.text":"color","elements.link.color.text":"color","elements.link.:hover.color.text":"color","elements.link.typography.fontFamily":"font-family","elements.link.typography.fontSize":"font-size","elements.button.color.text":"color","elements.button.color.background":"color","elements.button.typography.fontFamily":"font-family","elements.button.typography.fontSize":"font-size","elements.heading.color":"color","elements.heading.color.background":"color","elements.heading.typography.fontFamily":"font-family","elements.heading.gradient":"gradient","elements.heading.color.gradient":"gradient","elements.h1.color":"color","elements.h1.color.background":"color","elements.h1.typography.fontFamily":"font-family","elements.h1.color.gradient":"gradient","elements.h2.color":"color","elements.h2.color.background":"color","elements.h2.typography.fontFamily":"font-family","elements.h2.color.gradient":"gradient","elements.h3.color":"color","elements.h3.color.background":"color","elements.h3.typography.fontFamily":"font-family","elements.h3.color.gradient":"gradient","elements.h4.color":"color","elements.h4.color.background":"color","elements.h4.typography.fontFamily":"font-family","elements.h4.color.gradient":"gradient","elements.h5.color":"color","elements.h5.color.background":"color","elements.h5.typography.fontFamily":"font-family","elements.h5.color.gradient":"gradient","elements.h6.color":"color","elements.h6.color.background":"color","elements.h6.typography.fontFamily":"font-family","elements.h6.color.gradient":"gradient","color.gradient":"gradient","typography.fontSize":"font-size","typography.fontFamily":"font-family"};function findInPresetsBy(features,blockName,presetPath,presetProperty,presetValueValue){const orderedPresetsByOrigin=[(0,lodash.get)(features,["blocks",blockName,...presetPath]),(0,lodash.get)(features,presetPath)];for(const presetByOrigin of orderedPresetsByOrigin)if(presetByOrigin){const origins=["custom","theme","default"];for(const origin of origins){const presets=presetByOrigin[origin];if(presets){const presetObject=presets.find((preset=>preset[presetProperty]===presetValueValue));if(presetObject){if("slug"===presetProperty)return presetObject;return findInPresetsBy(features,blockName,presetPath,"slug",presetObject.slug)[presetProperty]===presetObject[presetProperty]?presetObject:void 0}}}}}function getPresetVariableFromValue(features,blockName,variableStylePath,presetPropertyValue){if(!presetPropertyValue)return presetPropertyValue;const cssVarInfix=STYLE_PATH_TO_CSS_VAR_INFIX[variableStylePath],metadata=PRESET_METADATA.find((data=>data.cssVarInfix===cssVarInfix));if(!metadata)return presetPropertyValue;const{valueKey:valueKey,path:path}=metadata,presetObject=findInPresetsBy(features,blockName,path,valueKey,presetPropertyValue);return presetObject?`var:preset|${cssVarInfix}|${presetObject.slug}`:presetPropertyValue}function getValueFromVariable(features,blockName,variable){if(!variable||"string"!=typeof variable){var _variable,_variable2;if(null===(_variable=variable)||void 0===_variable||!_variable.ref||"string"!=typeof(null===(_variable2=variable)||void 0===_variable2?void 0:_variable2.ref))return variable;{var _variable3;const refPath=variable.ref.split(".");if(!(variable=(0,lodash.get)(features,refPath))||null!==(_variable3=variable)&&void 0!==_variable3&&_variable3.ref)return variable}}let parsedVar;if(variable.startsWith("var:"))parsedVar=variable.slice("var:".length).split("|");else{if(!variable.startsWith("var(--wp--")||!variable.endsWith(")"))return variable;parsedVar=variable.slice("var(--wp--".length,-")".length).split("--")}const[type,...path]=parsedVar;return"preset"===type?function getValueFromPresetVariable(features,blockName,variable,_ref4){let[presetType,slug]=_ref4;const metadata=PRESET_METADATA.find((data=>data.cssVarInfix===presetType));if(!metadata)return variable;const presetObject=findInPresetsBy(features.settings,blockName,metadata.path,"slug",slug);if(presetObject){const{valueKey:valueKey}=metadata;return getValueFromVariable(features,blockName,presetObject[valueKey])}return variable}(features,blockName,variable,path):"custom"===type?function getValueFromCustomVariable(features,blockName,variable,path){var _get;const result=null!==(_get=(0,lodash.get)(features.settings,["blocks",blockName,"custom",...path]))&&void 0!==_get?_get:(0,lodash.get)(features.settings,["custom",...path]);return result?getValueFromVariable(features,blockName,result):variable}(features,blockName,variable,path):variable}const GlobalStylesContext=(0,react.createContext)({user:{},base:{},merged:{},setUserConfig:()=>{}}),EMPTY_CONFIG={settings:{},styles:{}},useGlobalStylesReset=()=>{const{user:config,setUserConfig:setUserConfig}=(0,react.useContext)(GlobalStylesContext);return[!!config&&!es6_default()(config,EMPTY_CONFIG),(0,react.useCallback)((()=>setUserConfig((()=>EMPTY_CONFIG))),[setUserConfig])]};function useGlobalSetting(path,blockName){var _getSettingValueForCo;let source=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";const{merged:mergedConfig,base:baseConfig,user:userConfig,setUserConfig:setUserConfig}=(0,react.useContext)(GlobalStylesContext),fullPath=blockName?`settings.blocks.${blockName}.${path}`:`settings.${path}`,setSetting=newValue=>{setUserConfig((currentConfig=>{const newUserConfig=JSON.parse(JSON.stringify(currentConfig));return(0,lodash.set)(newUserConfig,fullPath,newValue),newUserConfig}))},getSettingValueForContext=name=>{const currentPath=name?`settings.blocks.${name}.${path}`:`settings.${path}`;let result;switch(source){case"all":result=(0,lodash.get)(mergedConfig,currentPath);break;case"user":result=(0,lodash.get)(userConfig,currentPath);break;case"base":result=(0,lodash.get)(baseConfig,currentPath);break;default:throw"Unsupported source"}return result},resultWithFallback=null!==(_getSettingValueForCo=getSettingValueForContext(blockName))&&void 0!==_getSettingValueForCo?_getSettingValueForCo:getSettingValueForContext();return[resultWithFallback,setSetting]}function useGlobalStyle(path,blockName){var _get;let source=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";const{merged:mergedConfig,base:baseConfig,user:userConfig,setUserConfig:setUserConfig}=(0,react.useContext)(GlobalStylesContext),finalPath=blockName?`styles.blocks.${blockName}.${path}`:`styles.${path}`,setStyle=newValue=>{setUserConfig((currentConfig=>{const newUserConfig=JSON.parse(JSON.stringify(currentConfig));return(0,lodash.set)(newUserConfig,finalPath,getPresetVariableFromValue(mergedConfig.settings,blockName,path,newValue)),newUserConfig}))};let result;switch(source){case"all":result=getValueFromVariable(mergedConfig,blockName,"styles.css"===finalPath?(0,lodash.get)(userConfig,finalPath):null!==(_get=(0,lodash.get)(userConfig,finalPath))&&void 0!==_get?_get:(0,lodash.get)(baseConfig,finalPath));break;case"user":result=getValueFromVariable(mergedConfig,blockName,(0,lodash.get)(userConfig,finalPath));break;case"base":result=getValueFromVariable(baseConfig,blockName,(0,lodash.get)(baseConfig,finalPath));break;default:throw"Unsupported source"}return[result,setStyle]}var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js"),components=__webpack_require__("./packages/block-editor/src/components/duotone/components.js"),gap=__webpack_require__("./packages/block-editor/src/hooks/gap.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS={__experimentalBorder:"border",color:"color",spacing:"spacing",typography:"typography"};function compileStyleValue(uncompiledValue){var _uncompiledValue$star;if(null!=uncompiledValue&&null!==(_uncompiledValue$star=uncompiledValue.startsWith)&&void 0!==_uncompiledValue$star&&_uncompiledValue$star.call(uncompiledValue,"var:")){return`var(--wp--${uncompiledValue.slice("var:".length).split("|").join("--")})`}return uncompiledValue}function getPresetsClasses(blockSelector){let blockPresets=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return PRESET_METADATA.reduce(((declarations,_ref2)=>{let{path:path,cssVarInfix:cssVarInfix,classes:classes}=_ref2;if(!classes)return declarations;const presetByOrigin=(0,lodash.get)(blockPresets,path,[]);return["default","theme","custom"].forEach((origin=>{presetByOrigin[origin]&&presetByOrigin[origin].forEach((_ref3=>{let{slug:slug}=_ref3;classes.forEach((_ref4=>{let{classSuffix:classSuffix,propertyName:propertyName}=_ref4;const classSelectorToUse=`.has-${(0,lodash.kebabCase)(slug)}-${classSuffix}`,selectorToUse=blockSelector.split(",").map((selector=>`${selector}${classSelectorToUse}`)).join(","),value=`var(--wp--preset--${cssVarInfix}--${(0,lodash.kebabCase)(slug)})`;declarations+=`${selectorToUse}{${propertyName}: ${value} !important;}`}))}))})),declarations}),"")}function flattenTree(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},prefix=arguments.length>1?arguments[1]:void 0,token=arguments.length>2?arguments[2]:void 0,result=[];return Object.keys(input).forEach((key=>{const newKey=prefix+(0,lodash.kebabCase)(key.replace("/","-")),newLeaf=input[key];if(newLeaf instanceof Object){const newPrefix=newKey+token;result=[...result,...flattenTree(newLeaf,newPrefix,token)]}else result.push(`${newKey}: ${newLeaf}`)})),result}function concatFeatureVariationSelectorString(featureSelector,styleVariationSelector){const featureSelectors=featureSelector.split(","),combinedSelectors=[];return featureSelectors.forEach((selector=>{combinedSelectors.push(`${styleVariationSelector.trim()}${selector.trim()}`)})),combinedSelectors.join(", ")}function getStylesDeclarations(){let blockStyles=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},selector=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",useRootPaddingAlign=arguments.length>2?arguments[2]:void 0,tree=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const isRoot="body"===selector,output=Object.entries(build_module.$L).reduce(((declarations,_ref5)=>{let[key,{value:value,properties:properties,useEngine:useEngine,rootOnly:rootOnly}]=_ref5;if(rootOnly&&!isRoot)return declarations;const pathToValue=value;if("elements"===pathToValue[0]||useEngine)return declarations;const styleValue=(0,lodash.get)(blockStyles,pathToValue);if("--wp--style--root--padding"===key&&("string"==typeof styleValue||!useRootPaddingAlign))return declarations;if(properties&&"string"!=typeof styleValue)Object.entries(properties).forEach((entry=>{const[name,prop]=entry;if(!(0,lodash.get)(styleValue,[prop],!1))return;const cssProperty=name.startsWith("--")?name:(0,lodash.kebabCase)(name);declarations.push(`${cssProperty}: ${compileStyleValue((0,lodash.get)(styleValue,[prop]))}`)}));else if((0,lodash.get)(blockStyles,pathToValue,!1)){const cssProperty=key.startsWith("--")?key:(0,lodash.kebabCase)(key);declarations.push(`${cssProperty}: ${compileStyleValue((0,lodash.get)(blockStyles,pathToValue))}`)}return declarations}),[]),extraRules=(0,style_engine_build_module.R)(blockStyles);return extraRules.forEach((rule=>{var _ruleValue;if(isRoot&&useRootPaddingAlign&&rule.key.startsWith("padding"))return;const cssProperty=rule.key.startsWith("--")?rule.key:(0,lodash.kebabCase)(rule.key);let ruleValue=rule.value;if("string"!=typeof ruleValue&&null!==(_ruleValue=ruleValue)&&void 0!==_ruleValue&&_ruleValue.ref){var _ruleValue2;const refPath=ruleValue.ref.split(".");if(ruleValue=(0,lodash.get)(tree,refPath),!ruleValue||null!==(_ruleValue2=ruleValue)&&void 0!==_ruleValue2&&_ruleValue2.ref)return}var _tree$settings;"font-size"===cssProperty&&(ruleValue=getTypographyFontSizeValue({size:ruleValue},null==tree||null===(_tree$settings=tree.settings)||void 0===_tree$settings?void 0:_tree$settings.typography));output.push(`${cssProperty}: ${ruleValue}`)})),output}function getLayoutStyles(_ref6){var _style$spacing,_tree$settings2,_tree$settings2$layou,_tree$settings3,_tree$settings3$layou;let{tree:tree,style:style,selector:selector,hasBlockGapSupport:hasBlockGapSupport,hasFallbackGapSupport:hasFallbackGapSupport,fallbackGapValue:fallbackGapValue}=_ref6,ruleset="",gapValue=hasBlockGapSupport?(0,gap.U$)(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap):"";if(hasFallbackGapSupport&&("body"===selector?gapValue=gapValue||"0.5em":!hasBlockGapSupport&&fallbackGapValue&&(gapValue=fallbackGapValue)),gapValue&&null!=tree&&null!==(_tree$settings2=tree.settings)&&void 0!==_tree$settings2&&null!==(_tree$settings2$layou=_tree$settings2.layout)&&void 0!==_tree$settings2$layou&&_tree$settings2$layou.definitions&&(Object.values(tree.settings.layout.definitions).forEach((_ref7=>{let{className:className,name:name,spacingStyles:spacingStyles}=_ref7;(hasBlockGapSupport||"flex"===name)&&null!=spacingStyles&&spacingStyles.length&&spacingStyles.forEach((spacingStyle=>{const declarations=[];if(spacingStyle.rules&&Object.entries(spacingStyle.rules).forEach((_ref8=>{let[cssProperty,cssValue]=_ref8;declarations.push(`${cssProperty}: ${cssValue||gapValue}`)})),declarations.length){let combinedSelector="";combinedSelector=hasBlockGapSupport?"body"===selector?`${selector} .${className}${(null==spacingStyle?void 0:spacingStyle.selector)||""}`:`${selector}.${className}${(null==spacingStyle?void 0:spacingStyle.selector)||""}`:"body"===selector?`:where(.${className}${(null==spacingStyle?void 0:spacingStyle.selector)||""})`:`:where(${selector}.${className}${(null==spacingStyle?void 0:spacingStyle.selector)||""})`,ruleset+=`${combinedSelector} { ${declarations.join("; ")}; }`}}))})),"body"===selector&&hasBlockGapSupport&&(ruleset+=`${selector} { --wp--style--block-gap: ${gapValue}; }`)),"body"===selector&&null!=tree&&null!==(_tree$settings3=tree.settings)&&void 0!==_tree$settings3&&null!==(_tree$settings3$layou=_tree$settings3.layout)&&void 0!==_tree$settings3$layou&&_tree$settings3$layou.definitions){const validDisplayModes=["block","flex","grid"];Object.values(tree.settings.layout.definitions).forEach((_ref9=>{let{className:className,displayMode:displayMode,baseStyles:baseStyles}=_ref9;displayMode&&validDisplayModes.includes(displayMode)&&(ruleset+=`${selector} .${className} { display:${displayMode}; }`),null!=baseStyles&&baseStyles.length&&baseStyles.forEach((baseStyle=>{const declarations=[];if(baseStyle.rules&&Object.entries(baseStyle.rules).forEach((_ref10=>{let[cssProperty,cssValue]=_ref10;declarations.push(`${cssProperty}: ${cssValue}`)})),declarations.length){const combinedSelector=`${selector} .${className}${(null==baseStyle?void 0:baseStyle.selector)||""}`;ruleset+=`${combinedSelector} { ${declarations.join("; ")}; }`}}))}))}return ruleset}const getNodesWithStyles=(tree,blockSelectors)=>{var _tree$styles$blocks,_tree$styles3;const nodes=[];if(null==tree||!tree.styles)return nodes;const pickStyleKeys=treeToPickFrom=>Object.fromEntries(Object.entries(null!=treeToPickFrom?treeToPickFrom:{}).filter((_ref11=>{let[key]=_ref11;return["border","color","dimensions","spacing","typography","filter","outline","shadow"].includes(key)}))),styles=pickStyleKeys(tree.styles);return styles&&nodes.push({styles:styles,selector:"body"}),Object.entries(build_module.qO).forEach((_ref12=>{var _tree$styles;let[name,selector]=_ref12;var _tree$styles2;null!==(_tree$styles=tree.styles)&&void 0!==_tree$styles&&_tree$styles.elements[name]&&nodes.push({styles:null===(_tree$styles2=tree.styles)||void 0===_tree$styles2?void 0:_tree$styles2.elements[name],selector:selector})})),Object.entries(null!==(_tree$styles$blocks=null===(_tree$styles3=tree.styles)||void 0===_tree$styles3?void 0:_tree$styles3.blocks)&&void 0!==_tree$styles$blocks?_tree$styles$blocks:{}).forEach((_ref13=>{var _blockSelectors$block,_node$elements;let[blockName,node]=_ref13;const blockStyles=pickStyleKeys(node);if(null!=node&&node.variations){const variations={};Object.keys(node.variations).forEach((variation=>{variations[variation]=pickStyleKeys(node.variations[variation])})),blockStyles.variations=variations}blockStyles&&null!=blockSelectors&&null!==(_blockSelectors$block=blockSelectors[blockName])&&void 0!==_blockSelectors$block&&_blockSelectors$block.selector&&nodes.push({duotoneSelector:blockSelectors[blockName].duotoneSelector,fallbackGapValue:blockSelectors[blockName].fallbackGapValue,hasLayoutSupport:blockSelectors[blockName].hasLayoutSupport,selector:blockSelectors[blockName].selector,styles:blockStyles,featureSelectors:blockSelectors[blockName].featureSelectors,styleVariationSelectors:blockSelectors[blockName].styleVariationSelectors}),Object.entries(null!==(_node$elements=null==node?void 0:node.elements)&&void 0!==_node$elements?_node$elements:{}).forEach((_ref14=>{let[elementName,value]=_ref14;value&&null!=blockSelectors&&blockSelectors[blockName]&&null!==build_module.qO&&void 0!==build_module.qO&&build_module.qO[elementName]&&nodes.push({styles:value,selector:blockSelectors[blockName].selector.split(",").map((sel=>build_module.qO[elementName].split(",").map((elementSelector=>sel+" "+elementSelector)))).join(",")})}))})),nodes},getNodesWithSettings=(tree,blockSelectors)=>{var _tree$settings4,_tree$settings$blocks,_tree$settings5;const nodes=[];if(null==tree||!tree.settings)return nodes;const pickPresets=treeToPickFrom=>{const presets={};return PRESET_METADATA.forEach((_ref15=>{let{path:path}=_ref15;const value=(0,lodash.get)(treeToPickFrom,path,!1);!1!==value&&(0,lodash.set)(presets,path,value)})),presets},presets=pickPresets(tree.settings),custom=null===(_tree$settings4=tree.settings)||void 0===_tree$settings4?void 0:_tree$settings4.custom;return(0,lodash.isEmpty)(presets)&&!custom||nodes.push({presets:presets,custom:custom,selector:"body"}),Object.entries(null!==(_tree$settings$blocks=null===(_tree$settings5=tree.settings)||void 0===_tree$settings5?void 0:_tree$settings5.blocks)&&void 0!==_tree$settings$blocks?_tree$settings$blocks:{}).forEach((_ref16=>{let[blockName,node]=_ref16;const blockPresets=pickPresets(node),blockCustom=node.custom;(0,lodash.isEmpty)(blockPresets)&&!blockCustom||nodes.push({presets:blockPresets,custom:blockCustom,selector:blockSelectors[blockName].selector})})),nodes},toCustomProperties=(tree,blockSelectors)=>{const settings=getNodesWithSettings(tree,blockSelectors);let ruleset="";return settings.forEach((_ref17=>{let{presets:presets,custom:custom,selector:selector}=_ref17;const declarations=function getPresetsDeclarations(){let blockPresets=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},mergedSettings=arguments.length>1?arguments[1]:void 0;return PRESET_METADATA.reduce(((declarations,_ref)=>{let{path:path,valueKey:valueKey,valueFunc:valueFunc,cssVarInfix:cssVarInfix}=_ref;const presetByOrigin=(0,lodash.get)(blockPresets,path,[]);return["default","theme","custom"].forEach((origin=>{presetByOrigin[origin]&&presetByOrigin[origin].forEach((value=>{valueKey&&!valueFunc?declarations.push(`--wp--preset--${cssVarInfix}--${(0,lodash.kebabCase)(value.slug)}: ${value[valueKey]}`):valueFunc&&"function"==typeof valueFunc&&declarations.push(`--wp--preset--${cssVarInfix}--${(0,lodash.kebabCase)(value.slug)}: ${valueFunc(value,mergedSettings)}`)}))})),declarations}),[])}(presets,null==tree?void 0:tree.settings),customProps=flattenTree(custom,"--wp--custom--","--");customProps.length>0&&declarations.push(...customProps),declarations.length>0&&(ruleset+=`${selector}{${declarations.join(";")};}`)})),ruleset};function toSvgFilters(tree,blockSelectors){return getNodesWithSettings(tree,blockSelectors).flatMap((_ref25=>{let{presets:presets}=_ref25;return function getPresetsSvgFilters(){let blockPresets=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PRESET_METADATA.filter((metadata=>"duotone"===metadata.path.at(-1))).flatMap((metadata=>{const presetByOrigin=(0,lodash.get)(blockPresets,metadata.path,{});return["default","theme"].filter((origin=>presetByOrigin[origin])).flatMap((origin=>presetByOrigin[origin].map((preset=>(0,jsx_runtime.jsx)(components.DY,{preset:preset},preset.slug)))))}))}(presets)}))}const processCSSNesting=(css,blockSelector)=>{let processedCSS="";return css.split("&").forEach((part=>{processedCSS+=part.includes("{")?blockSelector+part:blockSelector+"{"+part+"}"})),processedCSS};function useGlobalStylesOutput(){let{merged:mergedConfig}=(0,react.useContext)(GlobalStylesContext);const[blockGap]=useGlobalSetting("spacing.blockGap"),hasBlockGapSupport=null!==blockGap,hasFallbackGapSupport=!hasBlockGapSupport,disableLayoutStyles=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return!!getSettings().disableLayoutStyles})),getBlockStyles=(0,use_select.Z)((select=>select(build_module.h).getBlockStyles),[]);return(0,react.useMemo)((()=>{var _mergedConfig,_mergedConfig2,_mergedConfig$styles$;if(null===(_mergedConfig=mergedConfig)||void 0===_mergedConfig||!_mergedConfig.styles||null===(_mergedConfig2=mergedConfig)||void 0===_mergedConfig2||!_mergedConfig2.settings)return[];mergedConfig=function updateConfigWithSeparator(config){var _config$styles,_config$styles2,_config$styles2$block,_config$styles3,_config$styles3$block,_config$styles4,_config$styles4$block,_config$styles5;return!(null===(_config$styles=config.styles)||void 0===_config$styles?void 0:_config$styles.blocks["core/separator"])||!(null===(_config$styles2=config.styles)||void 0===_config$styles2||null===(_config$styles2$block=_config$styles2.blocks["core/separator"].color)||void 0===_config$styles2$block?void 0:_config$styles2$block.background)||null!==(_config$styles3=config.styles)&&void 0!==_config$styles3&&null!==(_config$styles3$block=_config$styles3.blocks["core/separator"].color)&&void 0!==_config$styles3$block&&_config$styles3$block.text||null!==(_config$styles4=config.styles)&&void 0!==_config$styles4&&null!==(_config$styles4$block=_config$styles4.blocks["core/separator"].border)&&void 0!==_config$styles4$block&&_config$styles4$block.color?config:{...config,styles:{...config.styles,blocks:{...config.styles.blocks,"core/separator":{...config.styles.blocks["core/separator"],color:{...config.styles.blocks["core/separator"].color,text:null===(_config$styles5=config.styles)||void 0===_config$styles5?void 0:_config$styles5.blocks["core/separator"].color.background}}}}}}(mergedConfig);const blockSelectors=((blockTypes,getBlockStyles)=>{const result={};return blockTypes.forEach((blockType=>{var _blockType$supports$_,_blockType$supports,_blockType$supports$c,_blockType$supports2,_blockType$supports2$,_blockType$supports3,_blockType$supports4,_blockType$supports4$,_blockType$supports4$2;const name=blockType.name,selector=null!==(_blockType$supports$_=null==blockType||null===(_blockType$supports=blockType.supports)||void 0===_blockType$supports?void 0:_blockType$supports.__experimentalSelector)&&void 0!==_blockType$supports$_?_blockType$supports$_:".wp-block-"+name.replace("core/","").replace("/","-"),duotoneSelector=null!==(_blockType$supports$c=null==blockType||null===(_blockType$supports2=blockType.supports)||void 0===_blockType$supports2||null===(_blockType$supports2$=_blockType$supports2.color)||void 0===_blockType$supports2$?void 0:_blockType$supports2$.__experimentalDuotone)&&void 0!==_blockType$supports$c?_blockType$supports$c:null,hasLayoutSupport=!(null==blockType||null===(_blockType$supports3=blockType.supports)||void 0===_blockType$supports3||!_blockType$supports3.__experimentalLayout),fallbackGapValue=null==blockType||null===(_blockType$supports4=blockType.supports)||void 0===_blockType$supports4||null===(_blockType$supports4$=_blockType$supports4.spacing)||void 0===_blockType$supports4$||null===(_blockType$supports4$2=_blockType$supports4$.blockGap)||void 0===_blockType$supports4$2?void 0:_blockType$supports4$2.__experimentalDefault,blockStyleVariations=getBlockStyles(name),styleVariationSelectors={};null!=blockStyleVariations&&blockStyleVariations.length&&blockStyleVariations.forEach((variation=>{const styleVariationSelector=`.is-style-${variation.name}${selector}`;styleVariationSelectors[variation.name]=styleVariationSelector}));const featureSelectors={};Object.entries(BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS).forEach((_ref26=>{var _blockType$supports5,_blockType$supports5$;let[featureKey,featureName]=_ref26;const featureSelector=null==blockType||null===(_blockType$supports5=blockType.supports)||void 0===_blockType$supports5||null===(_blockType$supports5$=_blockType$supports5[featureKey])||void 0===_blockType$supports5$?void 0:_blockType$supports5$.__experimentalSelector;featureSelector&&(featureSelectors[featureName]=function scopeSelector(scope,selector){const scopes=scope.split(","),selectors=selector.split(","),selectorsScoped=[];return scopes.forEach((outer=>{selectors.forEach((inner=>{selectorsScoped.push(`${outer.trim()} ${inner.trim()}`)}))})),selectorsScoped.join(", ")}(selector,featureSelector))})),result[name]={duotoneSelector:duotoneSelector,fallbackGapValue:fallbackGapValue,featureSelectors:Object.keys(featureSelectors).length?featureSelectors:void 0,hasLayoutSupport:hasLayoutSupport,name:name,selector:selector,styleVariationSelectors:Object.keys(styleVariationSelectors).length?styleVariationSelectors:void 0}})),result})((0,build_module.U8)(),getBlockStyles),customProperties=toCustomProperties(mergedConfig,blockSelectors),globalStyles=function(tree,blockSelectors,hasBlockGapSupport,hasFallbackGapSupport){var _tree$settings6,_tree$settings7;let disableLayoutStyles=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const nodesWithStyles=getNodesWithStyles(tree,blockSelectors),nodesWithSettings=getNodesWithSettings(tree,blockSelectors),useRootPaddingAlign=null==tree||null===(_tree$settings6=tree.settings)||void 0===_tree$settings6?void 0:_tree$settings6.useRootPaddingAwareAlignments,{contentSize:contentSize,wideSize:wideSize}=(null==tree||null===(_tree$settings7=tree.settings)||void 0===_tree$settings7?void 0:_tree$settings7.layout)||{};let ruleset="body {margin: 0;";if(contentSize&&(ruleset+=` --wp--style--global--content-size: ${contentSize};`),wideSize&&(ruleset+=` --wp--style--global--wide-size: ${wideSize};`),useRootPaddingAlign&&(ruleset+='padding-right: 0; padding-left: 0; padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom) }\n\t\t\t.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding) { padding-right: 0; padding-left: 0; }\n\t\t\t.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }\n\t\t\t.has-global-padding :where(.has-global-padding) > .alignfull { margin-right: 0; margin-left: 0; }\n\t\t\t.has-global-padding > .alignfull:where(:not(.has-global-padding)) > :where([class*="wp-block-"]:not(.alignfull):not([class*="__"]),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding) > .alignfull:where(:not(.has-global-padding)) > :where([class*="wp-block-"]:not(.alignfull):not([class*="__"]),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: 0; padding-left: 0;'),ruleset+="}",nodesWithStyles.forEach((_ref18=>{let{selector:selector,duotoneSelector:duotoneSelector,styles:styles,fallbackGapValue:fallbackGapValue,hasLayoutSupport:hasLayoutSupport,featureSelectors:featureSelectors,styleVariationSelectors:styleVariationSelectors}=_ref18;featureSelectors&&Object.entries(featureSelectors).forEach((_ref19=>{let[featureName,featureSelector]=_ref19;if(null!=styles&&styles[featureName]){const featureDeclarations=getStylesDeclarations({[featureName]:styles[featureName]});delete styles[featureName],featureDeclarations.length&&(ruleset+=`${featureSelector}{${featureDeclarations.join(";")} }`)}})),styleVariationSelectors&&Object.entries(styleVariationSelectors).forEach((_ref20=>{var _styles$variations;let[styleVariationName,styleVariationSelector]=_ref20;if(null!=styles&&null!==(_styles$variations=styles.variations)&&void 0!==_styles$variations&&_styles$variations[styleVariationName]){var _styles$variations3;featureSelectors&&Object.entries(featureSelectors).forEach((_ref21=>{var _styles$variations2,_styles$variations2$s;let[featureName,featureSelector]=_ref21;if(null!=styles&&null!==(_styles$variations2=styles.variations)&&void 0!==_styles$variations2&&null!==(_styles$variations2$s=_styles$variations2[styleVariationName])&&void 0!==_styles$variations2$s&&_styles$variations2$s[featureName]){const featureDeclarations=getStylesDeclarations({[featureName]:styles.variations[styleVariationName][featureName]});delete styles.variations[styleVariationName][featureName],featureDeclarations.length&&(ruleset+=`${concatFeatureVariationSelectorString(featureSelector,styleVariationSelector)}{${featureDeclarations.join(";")} }`)}}));const styleVariationDeclarations=getStylesDeclarations(null==styles||null===(_styles$variations3=styles.variations)||void 0===_styles$variations3?void 0:_styles$variations3[styleVariationName],styleVariationSelector,useRootPaddingAlign,tree);styleVariationDeclarations.length&&(ruleset+=`${styleVariationSelector}{${styleVariationDeclarations.join(";")}}`)}}));const duotoneStyles={};if(null!=styles&&styles.filter&&(duotoneStyles.filter=styles.filter,delete styles.filter),duotoneSelector){const duotoneDeclarations=getStylesDeclarations(duotoneStyles);duotoneDeclarations.length>0&&(ruleset+=`${duotoneSelector}{${duotoneDeclarations.join(";")};}`)}disableLayoutStyles||"body"!==selector&&!hasLayoutSupport||(ruleset+=getLayoutStyles({tree:tree,style:styles,selector:selector,hasBlockGapSupport:hasBlockGapSupport,hasFallbackGapSupport:hasFallbackGapSupport,fallbackGapValue:fallbackGapValue}));const declarations=getStylesDeclarations(styles,selector,useRootPaddingAlign,tree);null!=declarations&&declarations.length&&(ruleset+=`${selector}{${declarations.join(";")};}`);const pseudoSelectorStyles=Object.entries(styles).filter((_ref22=>{let[key]=_ref22;return key.startsWith(":")}));null!=pseudoSelectorStyles&&pseudoSelectorStyles.length&&pseudoSelectorStyles.forEach((_ref23=>{let[pseudoKey,pseudoStyle]=_ref23;const pseudoDeclarations=getStylesDeclarations(pseudoStyle);if(null==pseudoDeclarations||!pseudoDeclarations.length)return;const pseudoRule=`${selector.split(",").map((sel=>sel+pseudoKey)).join(",")}{${pseudoDeclarations.join(";")};}`;ruleset+=pseudoRule}))})),ruleset+=".wp-site-blocks > .alignleft { float: left; margin-right: 2em; }",ruleset+=".wp-site-blocks > .alignright { float: right; margin-left: 2em; }",ruleset+=".wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }",hasBlockGapSupport){var _tree$styles4,_tree$styles4$spacing;const gapValue=(0,gap.U$)(null==tree||null===(_tree$styles4=tree.styles)||void 0===_tree$styles4||null===(_tree$styles4$spacing=_tree$styles4.spacing)||void 0===_tree$styles4$spacing?void 0:_tree$styles4$spacing.blockGap)||"0.5em";ruleset+=".wp-site-blocks > * { margin-block-start: 0; margin-block-end: 0; }",ruleset+=`.wp-site-blocks > * + * { margin-block-start: ${gapValue}; }`}return nodesWithSettings.forEach((_ref24=>{let{selector:selector,presets:presets}=_ref24;"body"===selector&&(selector="");const classes=getPresetsClasses(selector,presets);(0,lodash.isEmpty)(classes)||(ruleset+=classes)})),ruleset}(mergedConfig,blockSelectors,hasBlockGapSupport,hasFallbackGapSupport,disableLayoutStyles),filters=toSvgFilters(mergedConfig,blockSelectors),stylesheets=[{css:customProperties,isGlobalStyles:!0},{css:globalStyles,isGlobalStyles:!0},{css:null!==(_mergedConfig$styles$=mergedConfig.styles.css)&&void 0!==_mergedConfig$styles$?_mergedConfig$styles$:"",isGlobalStyles:!0}];return(0,build_module.U8)().forEach((blockType=>{var _mergedConfig$styles$2;if(null!==(_mergedConfig$styles$2=mergedConfig.styles.blocks[blockType.name])&&void 0!==_mergedConfig$styles$2&&_mergedConfig$styles$2.css){var _mergedConfig$styles$3;const selector=blockSelectors[blockType.name].selector;stylesheets.push({css:processCSSNesting(null===(_mergedConfig$styles$3=mergedConfig.styles.blocks[blockType.name])||void 0===_mergedConfig$styles$3?void 0:_mergedConfig$styles$3.css,selector),isGlobalStyles:!0})}})),[stylesheets,mergedConfig.settings,filters]}),[hasBlockGapSupport,hasFallbackGapSupport,mergedConfig,disableLayoutStyles])}var provider=__webpack_require__("./packages/block-editor/src/components/provider/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),use_fixed_window_list=__webpack_require__("./packages/compose/build-module/hooks/use-fixed-window-list/index.js"),tree_grid=__webpack_require__("./packages/components/build-module/tree-grid/index.js"),row=__webpack_require__("./packages/components/build-module/tree-grid/row.js"),cell=__webpack_require__("./packages/components/build-module/tree-grid/cell.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),use_block_display_title=__webpack_require__("./packages/block-editor/src/components/block-title/use-block-display-title.js"),inserter=__webpack_require__("./packages/block-editor/src/components/inserter/index.js");const Appender=(0,react.forwardRef)(((_ref,ref)=>{let{nestingLevel:nestingLevel,blockCount:blockCount,...props}=_ref;const[insertedBlock,setInsertedBlock]=(0,react.useState)(null),instanceId=(0,use_instance_id.Z)(Appender),{hideInserter:hideInserter,clientId:clientId}=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,__unstableGetEditorMode:__unstableGetEditorMode,getSelectedBlockClientId:getSelectedBlockClientId}=select(store.h),_clientId=getSelectedBlockClientId();return{clientId:getSelectedBlockClientId(),hideInserter:!!getTemplateLock(_clientId)||"zoom-out"===__unstableGetEditorMode()}}),[]),blockTitle=(0,use_block_display_title.Z)({clientId:clientId,context:"list-view"}),insertedBlockTitle=(0,use_block_display_title.Z)({clientId:null==insertedBlock?void 0:insertedBlock.clientId,context:"list-view"});if((0,react.useEffect)((()=>{null!=insertedBlockTitle&&insertedBlockTitle.length&&(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s block inserted"),insertedBlockTitle),"assertive")}),[insertedBlockTitle]),hideInserter)return null;const descriptionId=`off-canvas-editor-appender__${instanceId}`,description=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Append to %1$s block at position %2$d, Level %3$d"),blockTitle,blockCount+1,nestingLevel);return(0,jsx_runtime.jsxs)("div",{className:"offcanvas-editor-appender",children:[(0,jsx_runtime.jsx)(inserter.Z,{ref:ref,rootClientId:clientId,position:"bottom right",isAppender:!0,selectBlockOnInsert:!1,shouldDirectInsert:!1,__experimentalIsQuick:!0,...props,toggleProps:{"aria-describedby":descriptionId},onSelectOrClose:maybeInsertedBlock=>{null!=maybeInsertedBlock&&maybeInsertedBlock.clientId&&setInsertedBlock(maybeInsertedBlock)}}),(0,jsx_runtime.jsx)("div",{className:"offcanvas-editor-appender__description",id:descriptionId,children:description})]})}));var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),item=__webpack_require__("./packages/components/build-module/tree-grid/item.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),use_moving_animation=__webpack_require__("./packages/block-editor/src/components/use-moving-animation/index.js");const AnimatedTreeGridRow=(0,react_spring_web_esm.q)(row.Z);function ListViewLeaf(_ref){let{isSelected:isSelected,position:position,level:level,rowCount:rowCount,children:children,className:className,path:path,...props}=_ref;const ref=(0,use_moving_animation.Z)({isSelected:isSelected,adjustScrolling:!1,enableAnimation:!0,triggerAnimationOnChange:path});return(0,jsx_runtime.jsx)(AnimatedTreeGridRow,{ref:ref,className:classnames_default()("block-editor-list-view-leaf","offcanvas-editor-list-view-leaf",className),level:level,positionInSet:position,setSize:rowCount,...props,children:children})}ListViewLeaf.displayName="ListViewLeaf",ListViewLeaf.__docgenInfo={description:"",methods:[],displayName:"ListViewLeaf"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/leaf.js"]={name:"ListViewLeaf",docgenInfo:ListViewLeaf.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/leaf.js"});var block_mover_button=__webpack_require__("./packages/block-editor/src/components/block-mover/button.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),truncate_component=__webpack_require__("./packages/components/build-module/truncate/component.js"),build_module_icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),lock_small=__webpack_require__("./packages/icons/build-module/library/lock-small.js"),keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),use_block_display_information=__webpack_require__("./packages/block-editor/src/components/use-block-display-information/index.js"),chevron_left_small=__webpack_require__("./packages/icons/build-module/library/chevron-left-small.js"),chevron_right_small=__webpack_require__("./packages/icons/build-module/library/chevron-right-small.js");function ListViewExpander(_ref){let{onClick:onClick}=_ref;return(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view__expander",onClick:event=>onClick(event,{forceToggle:!0}),"aria-hidden":"true",children:(0,jsx_runtime.jsx)(build_module_icon.Z,{icon:(0,i18n_build_module.dZ)()?chevron_left_small.Z:chevron_right_small.Z})})}ListViewExpander.displayName="ListViewExpander",ListViewExpander.__docgenInfo={description:"",methods:[],displayName:"ListViewExpander"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/expander.js"]={name:"ListViewExpander",docgenInfo:ListViewExpander.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/expander.js"});var use_block_lock=__webpack_require__("./packages/block-editor/src/components/block-lock/use-block-lock.js");function ListViewBlockSelectButton(_ref,ref){let{className:className,block:{clientId:clientId},onClick:onClick,onToggleExpanded:onToggleExpanded,tabIndex:tabIndex,onFocus:onFocus,onDragStart:onDragStart,onDragEnd:onDragEnd,draggable:draggable}=_ref;const blockInformation=(0,use_block_display_information.Z)(clientId),blockTitle=(0,use_block_display_title.Z)({clientId:clientId,context:"list-view"}),{isLocked:isLocked}=(0,use_block_lock.Z)(clientId);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(build_module_button.ZP,{className:classnames_default()("block-editor-list-view-block-select-button",className),onClick:onClick,onKeyDown:function onKeyDownHandler(event){event.keyCode!==keycodes_build_module.K5&&event.keyCode!==keycodes_build_module.L_||onClick(event)},ref:ref,tabIndex:tabIndex,onFocus:onFocus,onDragStart:event=>{event.dataTransfer.clearData(),null==onDragStart||onDragStart(event)},onDragEnd:onDragEnd,draggable:draggable,href:`#block-${clientId}`,"aria-hidden":!0,children:[(0,jsx_runtime.jsx)(ListViewExpander,{onClick:onToggleExpanded}),(0,jsx_runtime.jsx)(block_icon.Z,{icon:null==blockInformation?void 0:blockInformation.icon,showColors:!0,context:"list-view"}),(0,jsx_runtime.jsxs)(component.Z,{alignment:"center",className:"block-editor-list-view-block-select-button__label-wrapper",justify:"flex-start",spacing:1,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__title",children:(0,jsx_runtime.jsx)(truncate_component.Z,{ellipsizeMode:"auto",children:blockTitle})}),(null==blockInformation?void 0:blockInformation.anchor)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__anchor-wrapper",children:(0,jsx_runtime.jsx)(truncate_component.Z,{className:"block-editor-list-view-block-select-button__anchor",ellipsizeMode:"auto",children:blockInformation.anchor})}),isLocked&&(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__lock",children:(0,jsx_runtime.jsx)(build_module_icon.Z,{icon:lock_small.Z})})]})]})})}ListViewBlockSelectButton.__docgenInfo={description:"",methods:[],displayName:"ListViewBlockSelectButton"};var block_select_button=(0,react.forwardRef)(ListViewBlockSelectButton);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/block-select-button.js"]={name:"ListViewBlockSelectButton",docgenInfo:ListViewBlockSelectButton.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/block-select-button.js"});var block_draggable=__webpack_require__("./packages/block-editor/src/components/block-draggable/index.js"),escape_html_build_module=__webpack_require__("./packages/escape-html/build-module/index.js"),safe_decode_uri=__webpack_require__("./packages/url/build-module/safe-decode-uri.js");var strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js"),spinner=__webpack_require__("./packages/components/build-module/spinner/index.js"),text_control=__webpack_require__("./packages/components/build-module/text-control/index.js"),notice=__webpack_require__("./packages/components/build-module/notice/index.js"),dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js"),visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js");const noop=()=>{},LinkControlSettingsDrawer=_ref=>{let{value:value,onChange:onChange=noop,settings:settings}=_ref;if(!settings||!settings.length)return null;const handleSettingChange=setting=>newValue=>{onChange({...value,[setting.id]:newValue})},theSettings=settings.map((setting=>(0,jsx_runtime.jsx)(toggle_control.Z,{className:"block-editor-link-control__setting",label:setting.title,onChange:handleSettingChange(setting),checked:!!value&&!!value[setting.id]},setting.id)));return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-link-control__settings",children:[(0,jsx_runtime.jsx)(visually_hidden_component.Z,{as:"legend",children:(0,i18n_build_module.__)("Currently selected link settings")}),theSettings]})};LinkControlSettingsDrawer.displayName="LinkControlSettingsDrawer",LinkControlSettingsDrawer.__docgenInfo={description:"",methods:[],displayName:"LinkControlSettingsDrawer",props:{onChange:{defaultValue:{value:"() => {}",computed:!1},required:!1}}};var settings_drawer=LinkControlSettingsDrawer;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/settings-drawer.js"]={name:"LinkControlSettingsDrawer",docgenInfo:LinkControlSettingsDrawer.__docgenInfo,path:"packages/block-editor/src/components/link-control/settings-drawer.js"});var url_input=__webpack_require__("./packages/block-editor/src/components/url-input/index.js"),create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js");const LinkControlSearchCreate=_ref=>{let text,{searchTerm:searchTerm,onClick:onClick,itemProps:itemProps,isSelected:isSelected,buttonText:buttonText}=_ref;return searchTerm?(text=buttonText?"function"==typeof buttonText?buttonText(searchTerm):buttonText:(0,create_interpolate_element.Z)((0,i18n_build_module.gB)((0,i18n_build_module.__)("Create: <mark>%s</mark>"),searchTerm),{mark:(0,jsx_runtime.jsx)("mark",{})}),(0,jsx_runtime.jsxs)(build_module_button.ZP,{...itemProps,className:classnames_default()("block-editor-link-control__search-create block-editor-link-control__search-item",{"is-selected":isSelected}),onClick:onClick,children:[(0,jsx_runtime.jsx)(build_module_icon.Z,{className:"block-editor-link-control__search-item-icon",icon:plus.Z}),(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-header",children:(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-title",children:text})})]})):null};LinkControlSearchCreate.displayName="LinkControlSearchCreate",LinkControlSearchCreate.__docgenInfo={description:"",methods:[],displayName:"LinkControlSearchCreate"};var search_create_button=LinkControlSearchCreate;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/search-create-button.js"]={name:"LinkControlSearchCreate",docgenInfo:LinkControlSearchCreate.__docgenInfo,path:"packages/block-editor/src/components/link-control/search-create-button.js"});var filter_url_for_display=__webpack_require__("./packages/url/build-module/filter-url-for-display.js"),text_highlight=__webpack_require__("./packages/components/build-module/text-highlight/index.js"),post_list=__webpack_require__("./packages/icons/build-module/library/post-list.js"),page=__webpack_require__("./packages/icons/build-module/library/page.js"),tag=__webpack_require__("./packages/icons/build-module/library/tag.js"),category=__webpack_require__("./packages/icons/build-module/library/category.js"),file=__webpack_require__("./packages/icons/build-module/library/file.js"),globe=__webpack_require__("./packages/icons/build-module/library/globe.js");const ICONS_MAP={post:post_list.Z,page:page.Z,post_tag:tag.Z,category:category.Z,attachment:file.Z};function SearchItemIcon(_ref){let{isURL:isURL,suggestion:suggestion}=_ref,icon=null;return isURL?icon=globe.Z:suggestion.type in ICONS_MAP&&(icon=ICONS_MAP[suggestion.type]),icon?(0,jsx_runtime.jsx)(build_module_icon.Z,{className:"block-editor-link-control__search-item-icon",icon:icon}):null}const LinkControlSearchItem=_ref2=>{let{itemProps:itemProps,suggestion:suggestion,isSelected:isSelected=!1,onClick:onClick,isURL:isURL=!1,searchTerm:searchTerm="",shouldShowType:shouldShowType=!1}=_ref2;return(0,jsx_runtime.jsxs)(build_module_button.ZP,{...itemProps,onClick:onClick,className:classnames_default()("block-editor-link-control__search-item",{"is-selected":isSelected,"is-url":isURL,"is-entity":!isURL}),children:[(0,jsx_runtime.jsx)(SearchItemIcon,{suggestion:suggestion,isURL:isURL}),(0,jsx_runtime.jsxs)("span",{className:"block-editor-link-control__search-item-header",children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-title",children:(0,jsx_runtime.jsx)(text_highlight.Z,{text:suggestion.title,highlight:searchTerm})}),(0,jsx_runtime.jsxs)("span",{"aria-hidden":!isURL,className:"block-editor-link-control__search-item-info",children:[!isURL&&((0,filter_url_for_display.w)((0,safe_decode_uri.x)(suggestion.url))||""),isURL&&(0,i18n_build_module.__)("Press ENTER to add this link")]})]}),shouldShowType&&suggestion.type&&(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-type",children:getVisualTypeName(suggestion)})]})};function getVisualTypeName(suggestion){return suggestion.isFrontPage?"front page":"post_tag"===suggestion.type?"tag":suggestion.type}LinkControlSearchItem.displayName="LinkControlSearchItem",LinkControlSearchItem.__docgenInfo={description:"",methods:[],displayName:"LinkControlSearchItem",props:{isSelected:{defaultValue:{value:"false",computed:!1},required:!1},isURL:{defaultValue:{value:"false",computed:!1},required:!1},searchTerm:{defaultValue:{value:"''",computed:!1},required:!1},shouldShowType:{defaultValue:{value:"false",computed:!1},required:!1}}};var search_item=LinkControlSearchItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/search-item.js"]={name:"LinkControlSearchItem",docgenInfo:LinkControlSearchItem.__docgenInfo,path:"packages/block-editor/src/components/link-control/search-item.js"});const LINK_ENTRY_TYPES=["URL","mailto","tel","internal"],DEFAULT_LINK_SETTINGS=[{id:"opensInNewTab",title:(0,i18n_build_module.__)("Open in new tab")}];function LinkControlSearchResults(_ref){let{instanceId:instanceId,withCreateSuggestion:withCreateSuggestion,currentInputValue:currentInputValue,handleSuggestionClick:handleSuggestionClick,suggestionsListProps:suggestionsListProps,buildSuggestionItemProps:buildSuggestionItemProps,suggestions:suggestions,selectedSuggestion:selectedSuggestion,isLoading:isLoading,isInitialSuggestions:isInitialSuggestions,createSuggestionButtonText:createSuggestionButtonText,suggestionsQuery:suggestionsQuery}=_ref;const resultsListClasses=classnames_default()("block-editor-link-control__search-results",{"is-loading":isLoading}),isSingleDirectEntryResult=1===suggestions.length&&LINK_ENTRY_TYPES.includes(suggestions[0].type),shouldShowCreateSuggestion=withCreateSuggestion&&!isSingleDirectEntryResult&&!isInitialSuggestions,shouldShowSuggestionsTypes=!(null!=suggestionsQuery&&suggestionsQuery.type),searchResultsLabelId=`block-editor-link-control-search-results-label-${instanceId}`,labelText=isInitialSuggestions?(0,i18n_build_module.__)("Recently updated"):(0,i18n_build_module.gB)((0,i18n_build_module.__)('Search results for "%s"'),currentInputValue),searchResultsLabel=(0,react.createElement)(isInitialSuggestions?react.Fragment:visually_hidden_component.Z,{},(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-results-label",id:searchResultsLabelId,children:labelText}));return(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-results-wrapper",children:[searchResultsLabel,(0,jsx_runtime.jsx)("div",{...suggestionsListProps,className:resultsListClasses,"aria-labelledby":searchResultsLabelId,children:suggestions.map(((suggestion,index)=>shouldShowCreateSuggestion&&"__CREATE__"===suggestion.type?(0,jsx_runtime.jsx)(search_create_button,{searchTerm:currentInputValue,buttonText:createSuggestionButtonText,onClick:()=>handleSuggestionClick(suggestion),itemProps:buildSuggestionItemProps(suggestion,index),isSelected:index===selectedSuggestion},suggestion.type):"__CREATE__"===suggestion.type?null:(0,jsx_runtime.jsx)(search_item,{itemProps:buildSuggestionItemProps(suggestion,index),suggestion:suggestion,index:index,onClick:()=>{handleSuggestionClick(suggestion)},isSelected:index===selectedSuggestion,isURL:LINK_ENTRY_TYPES.includes(suggestion.type),searchTerm:currentInputValue,shouldShowType:shouldShowSuggestionsTypes,isFrontPage:null==suggestion?void 0:suggestion.isFrontPage},`${suggestion.id}-${suggestion.type}`)))})]})}LinkControlSearchResults.displayName="LinkControlSearchResults",LinkControlSearchResults.__docgenInfo={description:"",methods:[],displayName:"LinkControlSearchResults"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/search-results.js"]={name:"LinkControlSearchResults",docgenInfo:LinkControlSearchResults.__docgenInfo,path:"packages/block-editor/src/components/link-control/search-results.js"});var get_protocol=__webpack_require__("./packages/url/build-module/get-protocol.js"),prepend_http=__webpack_require__("./packages/url/build-module/prepend-http.js"),is_url=__webpack_require__("./packages/url/build-module/is-url.js");function isURLLike(val){const isInternal=null==val?void 0:val.startsWith("#");return(0,is_url.P)(val)||val&&val.includes("www.")||isInternal}const handleNoop=()=>Promise.resolve([]),handleDirectEntry=val=>{let type="URL";const protocol=(0,get_protocol.E)(val)||"";return protocol.includes("mailto")&&(type="mailto"),protocol.includes("tel")&&(type="tel"),null!=val&&val.startsWith("#")&&(type="internal"),Promise.resolve([{id:val,title:val,url:"URL"===type?(0,prepend_http.u)(val):val,type:type}])};function useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion,withURLSuggestion){const{fetchSearchSuggestions:fetchSearchSuggestions,pageOnFront:pageOnFront}=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return{pageOnFront:getSettings().pageOnFront,fetchSearchSuggestions:getSettings().__experimentalFetchLinkSuggestions}}),[]),directEntryHandler=allowDirectEntry?handleDirectEntry:handleNoop;return(0,react.useCallback)(((val,_ref)=>{let{isInitialSuggestions:isInitialSuggestions}=_ref;return isURLLike(val)?directEntryHandler(val,{isInitialSuggestions:isInitialSuggestions}):(async(val,suggestionsQuery,fetchSearchSuggestions,directEntryHandler,withCreateSuggestion,withURLSuggestion,pageOnFront)=>{const{isInitialSuggestions:isInitialSuggestions}=suggestionsQuery;let resultsIncludeFrontPage=!1,results=await Promise.all([fetchSearchSuggestions(val,suggestionsQuery),directEntryHandler(val)]);results[0]=results[0].map((result=>Number(result.id)===pageOnFront?(resultsIncludeFrontPage=!0,result.isFrontPage=!0,result):result));const couldBeURL=!val.includes(" ");return results=!resultsIncludeFrontPage&&couldBeURL&&withURLSuggestion&&!isInitialSuggestions?results[0].concat(results[1]):results[0],isInitialSuggestions||isURLLike(val)||!withCreateSuggestion?results:results.concat({title:val,url:val,type:"__CREATE__"})})(val,{...suggestionsQuery,isInitialSuggestions:isInitialSuggestions},fetchSearchSuggestions,directEntryHandler,withCreateSuggestion,withURLSuggestion,pageOnFront)}),[directEntryHandler,fetchSearchSuggestions,withCreateSuggestion])}const noopSearchHandler=()=>Promise.resolve([]),search_input_noop=()=>{},LinkControlSearchInput=(0,react.forwardRef)(((_ref,ref)=>{let{value:value,children:children,currentLink:currentLink={},className:className=null,placeholder:placeholder=null,withCreateSuggestion:withCreateSuggestion=!1,onCreateSuggestion:onCreateSuggestion=search_input_noop,onChange:onChange=search_input_noop,onSelect:onSelect=search_input_noop,showSuggestions:showSuggestions=!0,renderSuggestions:renderSuggestions=(props=>(0,jsx_runtime.jsx)(LinkControlSearchResults,{...props})),fetchSuggestions:fetchSuggestions=null,allowDirectEntry:allowDirectEntry=!0,showInitialSuggestions:showInitialSuggestions=!1,suggestionsQuery:suggestionsQuery={},withURLSuggestion:withURLSuggestion=!0,createSuggestionButtonText:createSuggestionButtonText,useLabel:useLabel=!1}=_ref;const genericSearchHandler=useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion,withURLSuggestion),searchHandler=showSuggestions?fetchSuggestions||genericSearchHandler:noopSearchHandler,instanceId=(0,use_instance_id.Z)(LinkControlSearchInput),[focusedSuggestion,setFocusedSuggestion]=(0,react.useState)(),onSuggestionSelected=async selectedSuggestion=>{let suggestion=selectedSuggestion;if("__CREATE__"!==selectedSuggestion.type){if(allowDirectEntry||suggestion&&Object.keys(suggestion).length>=1){const{id:id,url:url,...restLinkProps}=null!=currentLink?currentLink:{};onSelect({...restLinkProps,...suggestion},suggestion)}}else try{var _suggestion;suggestion=await onCreateSuggestion(selectedSuggestion.title),null!==(_suggestion=suggestion)&&void 0!==_suggestion&&_suggestion.url&&onSelect(suggestion)}catch(e){}},inputClasses=classnames_default()(className,{"has-no-label":!useLabel});return(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-input-container",children:[(0,jsx_runtime.jsx)(url_input.Z,{__nextHasNoMarginBottom:!0,label:useLabel?"URL":void 0,className:inputClasses,value:value,onChange:(selection,suggestion)=>{onChange(selection),setFocusedSuggestion(suggestion)},placeholder:null!=placeholder?placeholder:(0,i18n_build_module.__)("Search or type url"),__experimentalRenderSuggestions:showSuggestions?props=>renderSuggestions({...props,instanceId:instanceId,withCreateSuggestion:withCreateSuggestion,createSuggestionButtonText:createSuggestionButtonText,suggestionsQuery:suggestionsQuery,handleSuggestionClick:suggestion=>{props.handleSuggestionClick&&props.handleSuggestionClick(suggestion),onSuggestionSelected(suggestion)}}):null,__experimentalFetchLinkSuggestions:searchHandler,__experimentalHandleURLSuggestions:!0,__experimentalShowInitialSuggestions:showInitialSuggestions,onSubmit:(suggestion,event)=>{var _value$trim;const hasSuggestion=suggestion||focusedSuggestion;hasSuggestion||null!=value&&null!==(_value$trim=value.trim())&&void 0!==_value$trim&&_value$trim.length?onSuggestionSelected(hasSuggestion||{url:value}):event.preventDefault()},ref:ref}),children]})}));var search_input=LinkControlSearchInput,external_link=__webpack_require__("./packages/components/build-module/external-link/index.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js"),info=__webpack_require__("./packages/icons/build-module/library/info.js"),edit=__webpack_require__("./packages/icons/build-module/library/edit.js"),link_off=__webpack_require__("./packages/icons/build-module/library/link-off.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const{Slot:ViewerSlot,Fill:ViewerFill}=(0,slot_fill.up)("BlockEditorLinkControlViewer");function reducer(state,action){switch(action.type){case"RESOLVED":return{...state,isFetching:!1,richData:action.richData};case"ERROR":return{...state,isFetching:!1,richData:null};case"LOADING":return{...state,isFetching:!0};default:throw new Error(`Unexpected action type ${action.type}`)}}var use_rich_url_data=function useRemoteUrlData(url){const[state,dispatch]=(0,react.useReducer)(reducer,{richData:null,isFetching:!1}),{fetchRichUrlData:fetchRichUrlData}=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return{fetchRichUrlData:getSettings().__experimentalFetchRichUrlData}}),[]);return(0,react.useEffect)((()=>{if(null!=url&&url.length&&fetchRichUrlData&&"undefined"!=typeof AbortController){dispatch({type:"LOADING"});const controller=new window.AbortController,signal=controller.signal;return fetchRichUrlData(url,{signal:signal}).then((urlData=>{dispatch({type:"RESOLVED",richData:urlData})})).catch((()=>{signal.aborted||dispatch({type:"ERROR"})})),()=>{controller.abort()}}}),[url]),state};function LinkPreview(_ref){var _value$url;let{value:value,onEditClick:onEditClick,hasRichPreviews:hasRichPreviews=!1,hasUnlinkControl:hasUnlinkControl=!1,onRemove:onRemove}=_ref;const showRichPreviews=hasRichPreviews?null==value?void 0:value.url:null,{richData:richData,isFetching:isFetching}=use_rich_url_data(showRichPreviews),hasRichData=richData&&Object.keys(richData).length,displayURL=value&&(0,filter_url_for_display.w)((0,safe_decode_uri.x)(value.url),16)||"",displayTitle=(null==richData?void 0:richData.title)||(null==value?void 0:value.title)||displayURL,isEmptyURL=!(null!=value&&null!==(_value$url=value.url)&&void 0!==_value$url&&_value$url.length);let icon;return icon=null!=richData&&richData.icon?(0,jsx_runtime.jsx)("img",{src:null==richData?void 0:richData.icon,alt:""}):isEmptyURL?(0,jsx_runtime.jsx)(build_module_icon.Z,{icon:info.Z,size:32}):(0,jsx_runtime.jsx)(build_module_icon.Z,{icon:globe.Z}),(0,jsx_runtime.jsxs)("div",{"aria-label":(0,i18n_build_module.__)("Currently selected"),className:classnames_default()("block-editor-link-control__search-item",{"is-current":!0,"is-rich":hasRichData,"is-fetching":!!isFetching,"is-preview":!0,"is-error":isEmptyURL}),children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-item-top",children:[(0,jsx_runtime.jsxs)("span",{className:"block-editor-link-control__search-item-header",children:[(0,jsx_runtime.jsx)("span",{className:classnames_default()("block-editor-link-control__search-item-icon",{"is-image":null==richData?void 0:richData.icon}),children:icon}),(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-details",children:isEmptyURL?(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-error-notice",children:(0,i18n_build_module.__)("Link is empty")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(external_link.Z,{className:"block-editor-link-control__search-item-title",href:value.url,children:(0,strip_html.Z)(displayTitle)}),(null==value?void 0:value.url)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-info",children:displayURL})]})})]}),(0,jsx_runtime.jsx)(build_module_button.ZP,{icon:edit.Z,label:(0,i18n_build_module.__)("Edit"),className:"block-editor-link-control__search-item-action",onClick:onEditClick,iconSize:24}),hasUnlinkControl&&(0,jsx_runtime.jsx)(build_module_button.ZP,{icon:link_off.Z,label:(0,i18n_build_module.__)("Unlink"),className:"block-editor-link-control__search-item-action block-editor-link-control__unlink",onClick:onRemove,iconSize:24}),(0,jsx_runtime.jsx)(ViewerSlot,{fillProps:value})]}),!!(hasRichData&&(null!=richData&&richData.image||null!=richData&&richData.description)||isFetching)&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-item-bottom",children:[((null==richData?void 0:richData.image)||isFetching)&&(0,jsx_runtime.jsx)("div",{"aria-hidden":!(null!=richData&&richData.image),className:classnames_default()("block-editor-link-control__search-item-image",{"is-placeholder":!(null!=richData&&richData.image)}),children:(null==richData?void 0:richData.image)&&(0,jsx_runtime.jsx)("img",{src:null==richData?void 0:richData.image,alt:""})}),((null==richData?void 0:richData.description)||isFetching)&&(0,jsx_runtime.jsx)("div",{"aria-hidden":!(null!=richData&&richData.description),className:classnames_default()("block-editor-link-control__search-item-description",{"is-placeholder":!(null!=richData&&richData.description)}),children:(null==richData?void 0:richData.description)&&(0,jsx_runtime.jsx)(text_component.Z,{truncate:!0,numberOfLines:"2",children:richData.description})})]})]})}LinkPreview.displayName="LinkPreview",LinkPreview.__docgenInfo={description:"",methods:[],displayName:"LinkPreview",props:{hasRichPreviews:{defaultValue:{value:"false",computed:!1},required:!1},hasUnlinkControl:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/link-preview.js"]={name:"LinkPreview",docgenInfo:LinkPreview.__docgenInfo,path:"packages/block-editor/src/components/link-control/link-preview.js"});const makeCancelable=promise=>{let hasCanceled_=!1;return{promise:new Promise(((resolve,reject)=>{promise.then((val=>hasCanceled_?reject({isCanceled:!0}):resolve(val)),(error=>reject(hasCanceled_?{isCanceled:!0}:error)))})),cancel(){hasCanceled_=!0}}};function useInternalInputValue(value){const[internalInputValue,setInternalInputValue]=(0,react.useState)(value||"");return(0,react.useEffect)((()=>{value&&value!==internalInputValue&&setInternalInputValue(value)}),[value]),[internalInputValue,setInternalInputValue]}const link_control_noop=()=>{};function LinkControl(_ref){var _value$url,_value$url$trim,_currentUrlInputValue;let{searchInputPlaceholder:searchInputPlaceholder,value:value,settings:settings=DEFAULT_LINK_SETTINGS,onChange:onChange=link_control_noop,onRemove:onRemove,onCancel:onCancel,noDirectEntry:noDirectEntry=!1,showSuggestions:showSuggestions=!0,showInitialSuggestions:showInitialSuggestions,forceIsEditingLink:forceIsEditingLink,createSuggestion:createSuggestion,withCreateSuggestion:withCreateSuggestion,inputValue:propInputValue="",suggestionsQuery:suggestionsQuery={},noURLSuggestion:noURLSuggestion=!1,createSuggestionButtonText:createSuggestionButtonText,hasRichPreviews:hasRichPreviews=!1,hasTextControl:hasTextControl=!1,renderControlBottom:renderControlBottom=null}=_ref;void 0===withCreateSuggestion&&createSuggestion&&(withCreateSuggestion=!0);const isMounting=(0,react.useRef)(!0),wrapperNode=(0,react.useRef)(),textInputRef=(0,react.useRef)(),isEndingEditWithFocus=(0,react.useRef)(!1),[internalUrlInputValue,setInternalUrlInputValue]=useInternalInputValue((null==value?void 0:value.url)||""),[internalTextInputValue,setInternalTextInputValue]=useInternalInputValue((null==value?void 0:value.title)||""),[isEditingLink,setIsEditingLink]=(0,react.useState)(void 0!==forceIsEditingLink?forceIsEditingLink:!value||!value.url),{createPage:createPage,isCreatingPage:isCreatingPage,errorMessage:errorMessage}=function useCreatePage(handleCreatePage){const cancelableCreateSuggestion=(0,react.useRef)(),[isCreatingPage,setIsCreatingPage]=(0,react.useState)(!1),[errorMessage,setErrorMessage]=(0,react.useState)(null);return(0,react.useEffect)((()=>()=>{cancelableCreateSuggestion.current&&cancelableCreateSuggestion.current.cancel()}),[]),{createPage:async function(suggestionTitle){setIsCreatingPage(!0),setErrorMessage(null);try{return cancelableCreateSuggestion.current=makeCancelable(Promise.resolve(handleCreatePage(suggestionTitle))),await cancelableCreateSuggestion.current.promise}catch(error){if(error&&error.isCanceled)return;throw setErrorMessage(error.message||(0,i18n_build_module.__)("An unknown error occurred during creation. Please try again.")),error}finally{setIsCreatingPage(!1)}},isCreatingPage:isCreatingPage,errorMessage:errorMessage}}(createSuggestion);(0,react.useEffect)((()=>{void 0!==forceIsEditingLink&&forceIsEditingLink!==isEditingLink&&setIsEditingLink(forceIsEditingLink)}),[forceIsEditingLink]),(0,react.useEffect)((()=>{if(isMounting.current)return void(isMounting.current=!1);const whichFocusTargetIndex=null!=textInputRef&&textInputRef.current?1:0;(dom_build_module.T_.focusable.find(wrapperNode.current)[whichFocusTargetIndex]||wrapperNode.current).focus(),isEndingEditWithFocus.current=!1}),[isEditingLink,isCreatingPage]);const hasLinkValue=(null==value||null===(_value$url=value.url)||void 0===_value$url||null===(_value$url$trim=_value$url.trim())||void 0===_value$url$trim?void 0:_value$url$trim.length)>0,stopEditing=()=>{var _wrapperNode$current;isEndingEditWithFocus.current=!(null===(_wrapperNode$current=wrapperNode.current)||void 0===_wrapperNode$current||!_wrapperNode$current.contains(wrapperNode.current.ownerDocument.activeElement)),setIsEditingLink(!1)},handleSubmit=()=>{currentUrlInputValue===(null==value?void 0:value.url)&&internalTextInputValue===(null==value?void 0:value.title)||onChange({...value,url:currentUrlInputValue,title:internalTextInputValue}),stopEditing()},currentUrlInputValue=propInputValue||internalUrlInputValue,currentInputIsEmpty=!(null!=currentUrlInputValue&&null!==(_currentUrlInputValue=currentUrlInputValue.trim())&&void 0!==_currentUrlInputValue&&_currentUrlInputValue.length),shownUnlinkControl=onRemove&&value&&!isEditingLink&&!isCreatingPage,showSettingsDrawer=!(null==settings||!settings.length),showTextControl=hasLinkValue&&hasTextControl,isEditing=(isEditingLink||!value)&&!isCreatingPage;return(0,jsx_runtime.jsxs)("div",{tabIndex:-1,ref:wrapperNode,className:"block-editor-link-control",children:[isCreatingPage&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__loading",children:[(0,jsx_runtime.jsx)(spinner.ZP,{})," ",(0,i18n_build_module.__)("Creating"),"…"]}),isEditing&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()({"block-editor-link-control__search-input-wrapper":!0,"has-text-control":showTextControl}),children:[showTextControl&&(0,jsx_runtime.jsx)(text_control.Z,{__nextHasNoMarginBottom:!0,ref:textInputRef,className:"block-editor-link-control__field block-editor-link-control__text-content",label:"Text",value:internalTextInputValue,onChange:setInternalTextInputValue,onKeyDown:event=>{const{keyCode:keyCode}=event;keyCode!==keycodes_build_module.K5||currentInputIsEmpty||(event.preventDefault(),handleSubmit())}}),(0,jsx_runtime.jsx)(search_input,{currentLink:value,className:"block-editor-link-control__field block-editor-link-control__search-input",placeholder:searchInputPlaceholder,value:currentUrlInputValue,withCreateSuggestion:withCreateSuggestion,onCreateSuggestion:createPage,onChange:setInternalUrlInputValue,onSelect:updatedValue=>{onChange({...updatedValue,title:internalTextInputValue||(null==updatedValue?void 0:updatedValue.title)}),stopEditing()},showInitialSuggestions:showInitialSuggestions,allowDirectEntry:!noDirectEntry,showSuggestions:showSuggestions,suggestionsQuery:suggestionsQuery,withURLSuggestion:!noURLSuggestion,createSuggestionButtonText:createSuggestionButtonText,useLabel:showTextControl})]}),errorMessage&&(0,jsx_runtime.jsx)(notice.Z,{className:"block-editor-link-control__search-error",status:"error",isDismissible:!1,children:errorMessage})]}),value&&!isEditingLink&&!isCreatingPage&&(0,jsx_runtime.jsx)(LinkPreview,{value:value,onEditClick:()=>setIsEditingLink(!0),hasRichPreviews:hasRichPreviews,hasUnlinkControl:shownUnlinkControl,onRemove:onRemove},null==value?void 0:value.url),(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__drawer",children:[showSettingsDrawer&&(0,jsx_runtime.jsx)("div",{className:"block-editor-link-control__tools",children:(0,jsx_runtime.jsx)(settings_drawer,{value:value,settings:settings,onChange:onChange})}),isEditing&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-actions",children:[(0,jsx_runtime.jsx)(build_module_button.ZP,{variant:"primary",onClick:handleSubmit,className:"xblock-editor-link-control__search-submit",disabled:currentInputIsEmpty,children:(0,i18n_build_module.__)("Apply")}),(0,jsx_runtime.jsx)(build_module_button.ZP,{variant:"tertiary",onClick:event=>{event.preventDefault(),event.stopPropagation(),setInternalUrlInputValue(null==value?void 0:value.url),setInternalTextInputValue(null==value?void 0:value.title),hasLinkValue?stopEditing():null==onRemove||onRemove(),null==onCancel||onCancel()},children:(0,i18n_build_module.__)("Cancel")})]})]}),renderControlBottom&&renderControlBottom()]})}LinkControl.displayName="LinkControl",LinkControl.ViewerFill=ViewerFill,LinkControl.__docgenInfo={description:"Renders a link control. A link control is a controlled input which maintains\na value associated with a link (HTML anchor element) and relevant settings\nfor how that link is expected to behave.\n\n@param {WPLinkControlProps} props Component props.",methods:[],displayName:"LinkControl",props:{settings:{defaultValue:{value:"DEFAULT_LINK_SETTINGS",computed:!0},required:!1},onChange:{defaultValue:{value:"() => {}",computed:!1},required:!1},noDirectEntry:{defaultValue:{value:"false",computed:!1},required:!1},showSuggestions:{defaultValue:{value:"true",computed:!1},required:!1},inputValue:{defaultValue:{value:"''",computed:!1},required:!1},suggestionsQuery:{defaultValue:{value:"{}",computed:!1},required:!1},noURLSuggestion:{defaultValue:{value:"false",computed:!1},required:!1},hasRichPreviews:{defaultValue:{value:"false",computed:!1},required:!1},hasTextControl:{defaultValue:{value:"false",computed:!1},required:!1},renderControlBottom:{defaultValue:{value:"null",computed:!1},required:!1}}};var link_control=LinkControl;function getSuggestionsQuery(type,kind){switch(type){case"post":case"page":return{type:"post",subtype:type};case"category":return{type:"term",subtype:"category"};case"tag":return{type:"term",subtype:"post_tag"};case"post_format":return{type:"post-format"};default:return"taxonomy"===kind?{type:"term",subtype:type}:"post-type"===kind?{type:"post",subtype:type}:{}}}function LinkControlTransforms(_ref){let{clientId:clientId}=_ref;const{getBlock:getBlock,blockTransforms:blockTransforms}=(0,use_select.Z)((select=>{const{getBlock:_getBlock,getBlockRootClientId:getBlockRootClientId,getBlockTransformItems:getBlockTransformItems}=select(store.h);return{getBlock:_getBlock,blockTransforms:getBlockTransformItems(_getBlock(clientId),getBlockRootClientId(clientId))}}),[clientId]),{replaceBlock:replaceBlock}=(0,use_dispatch.Z)(store.h),featuredBlocks=["core/page-list","core/site-logo","core/social-links","core/search"],transforms=blockTransforms.filter((item=>featuredBlocks.includes(item.name)));return null!=transforms&&transforms.length&&clientId?(0,jsx_runtime.jsxs)("div",{className:"link-control-transform",children:[(0,jsx_runtime.jsx)("h3",{className:"link-control-transform__subheading",children:(0,i18n_build_module.__)("Transform")}),(0,jsx_runtime.jsx)("div",{className:"link-control-transform__items",children:transforms.map((item=>(0,jsx_runtime.jsxs)(build_module_button.ZP,{onClick:()=>replaceBlock(clientId,(0,build_module.m4)(getBlock(clientId),item.name)),className:"link-control-transform__item",children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:item.icon}),item.title]},`transform-${item.name}`)))})]}):null}function LinkUI(props){const{label:label,url:url,opensInNewTab:opensInNewTab,type:type,kind:kind}=props.link,link={url:url,opensInNewTab:opensInNewTab,title:label&&(0,strip_html.Z)(label)};return(0,jsx_runtime.jsx)(popover.Z,{placement:"bottom",onClose:props.onClose,anchor:props.anchor,shift:!0,children:(0,jsx_runtime.jsx)(link_control,{hasTextControl:!0,hasRichPreviews:!0,className:props.className,value:link,showInitialSuggestions:!0,withCreateSuggestion:props.hasCreateSuggestion,noDirectEntry:!!type,noURLSuggestion:!!type,suggestionsQuery:getSuggestionsQuery(type,kind),onChange:props.onChange,onRemove:props.onRemove,renderControlBottom:url?null:()=>(0,jsx_runtime.jsx)(LinkControlTransforms,{clientId:props.clientId})})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/link-control/index.js"]={name:"LinkControl",docgenInfo:LinkControl.__docgenInfo,path:"packages/block-editor/src/components/link-control/index.js"}),LinkControlTransforms.displayName="LinkControlTransforms",LinkUI.displayName="LinkUI",LinkUI.__docgenInfo={description:"",methods:[],displayName:"LinkUI"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/link-ui.js"]={name:"LinkUI",docgenInfo:LinkUI.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/link-ui.js"});const BLOCKS_WITH_LINK_UI_SUPPORT=["core/navigation-link","core/navigation-submenu"],ListViewBlockContents=(0,react.forwardRef)(((_ref,ref)=>{let{onClick:onClick,onToggleExpanded:onToggleExpanded,block:block,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,isExpanded:isExpanded,selectedClientIds:selectedClientIds,...props}=_ref;const{clientId:clientId}=block,[isLinkUIOpen,setIsLinkUIOpen]=(0,react.useState)(),{blockMovingClientId:blockMovingClientId,selectedBlockInBlockEditor:selectedBlockInBlockEditor,lastInsertedBlockClientId:lastInsertedBlockClientId}=(0,use_select.Z)((select=>{const{hasBlockMovingClientId:hasBlockMovingClientId,getSelectedBlockClientId:getSelectedBlockClientId,getLastInsertedBlocksClientIds:getLastInsertedBlocksClientIds}=select(store.h),lastInsertedBlocksClientIds=getLastInsertedBlocksClientIds();return{blockMovingClientId:hasBlockMovingClientId(),selectedBlockInBlockEditor:getSelectedBlockClientId(),lastInsertedBlockClientId:lastInsertedBlocksClientIds&&lastInsertedBlocksClientIds[0]}}),[clientId]),{insertedBlockAttributes:insertedBlockAttributes,insertedBlockName:insertedBlockName,setInsertedBlockAttributes:setInsertedBlockAttributes}=(insertedBlockClientId=>{const{insertedBlockAttributes:insertedBlockAttributes,insertedBlockName:insertedBlockName}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store.h);return{insertedBlockAttributes:getBlockAttributes(insertedBlockClientId),insertedBlockName:getBlockName(insertedBlockClientId)}}),[insertedBlockClientId]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),setInsertedBlockAttributes=_updatedAttributes=>{insertedBlockClientId&&updateBlockAttributes(insertedBlockClientId,_updatedAttributes)};return insertedBlockClientId?{insertedBlockAttributes:insertedBlockAttributes,insertedBlockName:insertedBlockName,setInsertedBlockAttributes:setInsertedBlockAttributes}:{insertedBlockAttributes:void 0,insertedBlockName:void 0,setInsertedBlockAttributes:setInsertedBlockAttributes}})(lastInsertedBlockClientId),hasExistingLinkValue=null==insertedBlockAttributes?void 0:insertedBlockAttributes.id;(0,react.useEffect)((()=>{clientId===lastInsertedBlockClientId&&null!=BLOCKS_WITH_LINK_UI_SUPPORT&&BLOCKS_WITH_LINK_UI_SUPPORT.includes(insertedBlockName)&&!hasExistingLinkValue&&setIsLinkUIOpen(!0)}),[lastInsertedBlockClientId,clientId,insertedBlockName,hasExistingLinkValue]);const isBlockMoveTarget=blockMovingClientId&&selectedBlockInBlockEditor===clientId,className=classnames_default()("block-editor-list-view-block-contents",{"is-dropping-before":isBlockMoveTarget}),draggableClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isLinkUIOpen&&(0,jsx_runtime.jsx)(LinkUI,{clientId:lastInsertedBlockClientId,link:insertedBlockAttributes,onClose:()=>setIsLinkUIOpen(!1),hasCreateSuggestion:!1,onChange:updatedValue=>{!function(){let updatedValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},setAttributes=arguments.length>1?arguments[1]:void 0,blockAttributes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{label:originalLabel="",kind:originalKind="",type:originalType=""}=blockAttributes,{title:newLabel="",url:newUrl="",opensInNewTab:opensInNewTab,id:id,kind:newKind=originalKind,type:newType=originalType}=updatedValue,newLabelWithoutHttp=newLabel.replace(/http(s?):\/\//gi,""),newUrlWithoutHttp=newUrl.replace(/http(s?):\/\//gi,""),label=newLabel&&newLabel!==originalLabel&&newLabelWithoutHttp!==newUrlWithoutHttp?(0,escape_html_build_module.r)(newLabel):originalLabel||(0,escape_html_build_module.r)(newUrlWithoutHttp),type="post_tag"===newType?"tag":newType.replace("-","_"),isBuiltInType=["post","page","tag","category"].indexOf(type)>-1,kind=!newKind&&!isBuiltInType||"custom"===newKind?"custom":newKind;setAttributes({...newUrl&&{url:encodeURI((0,safe_decode_uri.x)(newUrl))},...label&&{label:label},...void 0!==opensInNewTab&&{opensInNewTab:opensInNewTab},...id&&Number.isInteger(id)&&{id:id},...kind&&{kind:kind},...type&&"URL"!==type&&{type:type}})}(updatedValue,setInsertedBlockAttributes,insertedBlockAttributes),setIsLinkUIOpen(!1)}}),(0,jsx_runtime.jsx)(block_draggable.Z,{clientIds:draggableClientIds,children:_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,jsx_runtime.jsx)(block_select_button,{ref:ref,className:className,block:block,onClick:onClick,onToggleExpanded:onToggleExpanded,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd,isExpanded:isExpanded,...props})}})]})}));var block_contents=ListViewBlockContents,block_settings_dropdown=__webpack_require__("./packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"),block_edit_button=(0,react.forwardRef)((function BlockEditButton(_ref,ref){let{clientId:clientId,...props}=_ref;const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,jsx_runtime.jsx)(build_module_button.ZP,{...props,ref:ref,icon:edit.Z,onClick:()=>{selectBlock(clientId)}})}));const ListViewContext=(0,react.createContext)({}),useListViewContext=()=>(0,react.useContext)(ListViewContext);function ListViewBlock(_ref){let{block:{clientId:clientId},isDragged:isDragged,isSelected:isSelected,isBranchSelected:isBranchSelected,selectBlock:selectBlock,position:position,level:level,rowCount:rowCount,siblingBlockCount:siblingBlockCount,showBlockMovers:showBlockMovers,path:path,isExpanded:isExpanded,selectedClientIds:selectedClientIds,preventAnnouncement:preventAnnouncement,selectBlockInCanvas:selectBlockInCanvas}=_ref;const cellRef=(0,react.useRef)(null),[isHovered,setIsHovered]=(0,react.useState)(!1),{isLocked:isLocked,isContentLocked:isContentLocked}=(0,use_block_lock.Z)(clientId),forceSelectionContentLock=(0,use_select.Z)((select=>!isSelected&&(!!isContentLocked&&select(store.h).hasSelectedInnerBlock(clientId,!0))),[isContentLocked,clientId,isSelected]),isFirstSelectedBlock=forceSelectionContentLock||isSelected&&selectedClientIds[0]===clientId,isLastSelectedBlock=forceSelectionContentLock||isSelected&&selectedClientIds[selectedClientIds.length-1]===clientId,{toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),blockInformation=(0,use_block_display_information.Z)(clientId),block=(0,use_select.Z)((select=>select(store.h).getBlock(clientId)),[clientId]);(0,react.useEffect)((()=>{!isTreeGridMounted&&isSelected&&cellRef.current.focus()}),[]);const onMouseEnter=(0,react.useCallback)((()=>{setIsHovered(!0),toggleBlockHighlight(clientId,!0)}),[clientId,setIsHovered,toggleBlockHighlight]),onMouseLeave=(0,react.useCallback)((()=>{setIsHovered(!1),toggleBlockHighlight(clientId,!1)}),[clientId,setIsHovered,toggleBlockHighlight]),selectEditorBlock=(0,react.useCallback)((event=>{selectBlock(event,clientId),event.preventDefault()}),[clientId,selectBlock]),updateSelection=(0,react.useCallback)((newClientId=>{selectBlock(void 0,newClientId)}),[selectBlock]),{isTreeGridMounted:isTreeGridMounted,expand:expand,collapse:collapse,LeafMoreMenu:LeafMoreMenu}=useListViewContext(),toggleExpanded=(0,react.useCallback)((event=>{event.preventDefault(),event.stopPropagation(),!0===isExpanded?collapse(clientId):!1===isExpanded&&expand(clientId)}),[clientId,expand,collapse,isExpanded]),instanceId=(0,use_instance_id.Z)(ListViewBlock);if(!block)return null;const showBlockActions=!!block&&(0,build_module.zb)(block.name,"__experimentalToolbar",!0),descriptionId=`list-view-block-select-button__${instanceId}`,blockPositionDescription=((position,siblingCount,level)=>(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$d of %2$d, Level %3$d"),position,siblingCount,level))(position,siblingBlockCount,level);let blockAriaLabel=(0,i18n_build_module.__)("Link");blockInformation&&(blockAriaLabel=isLocked?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s link (locked)"),blockInformation.title):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s link"),blockInformation.title));const settingsAriaLabel=blockInformation?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Options for %s block"),blockInformation.title):(0,i18n_build_module.__)("Options"),editAriaLabel=blockInformation?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Edit %s block"),blockInformation.title):(0,i18n_build_module.__)("Edit"),isEditable=!!block&&"core/page-list-item"!==block.name,hasRenderedMovers=showBlockMovers&&siblingBlockCount>0,moverCellClassName=classnames_default()("block-editor-list-view-block__mover-cell",{"is-visible":isHovered||isSelected}),listViewBlockSettingsClassName=classnames_default()("block-editor-list-view-block__menu-cell",{"is-visible":isHovered||isFirstSelectedBlock}),listViewBlockEditClassName=classnames_default()("block-editor-list-view-block__menu-cell","block-editor-list-view-block__menu-edit",{"is-visible":isHovered||isFirstSelectedBlock});let colSpan;hasRenderedMovers?colSpan=2:showBlockActions||(colSpan=3);const classes=classnames_default()({"is-selected":isSelected||forceSelectionContentLock,"is-first-selected":isFirstSelectedBlock,"is-last-selected":isLastSelectedBlock,"is-branch-selected":isBranchSelected,"is-dragging":isDragged,"has-single-cell":!showBlockActions}),dropdownClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId],MoreMenuComponent=LeafMoreMenu||block_settings_dropdown.Z;return(0,jsx_runtime.jsxs)(ListViewLeaf,{className:classes,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onFocus:onMouseEnter,onBlur:onMouseLeave,level:level,position:position,rowCount:rowCount,path:path,id:`list-view-block-${clientId}`,"data-block":clientId,isExpanded:isContentLocked?void 0:isExpanded,"aria-selected":!!isSelected||forceSelectionContentLock,children:[(0,jsx_runtime.jsx)(cell.Z,{className:"block-editor-list-view-block__contents-cell",colSpan:colSpan,ref:cellRef,"aria-label":blockAriaLabel,"aria-selected":!!isSelected||forceSelectionContentLock,"aria-expanded":isContentLocked?void 0:isExpanded,"aria-describedby":descriptionId,children:_ref2=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref2;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-list-view-block__contents-container",children:[(0,jsx_runtime.jsx)(block_contents,{block:block,onClick:selectBlockInCanvas?selectEditorBlock:event=>{event.preventDefault()},onToggleExpanded:toggleExpanded,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,ref:ref,tabIndex:tabIndex,onFocus:onFocus,isExpanded:isExpanded,selectedClientIds:selectedClientIds,preventAnnouncement:preventAnnouncement}),(0,jsx_runtime.jsx)("div",{className:"block-editor-list-view-block-select-button__description",id:descriptionId,children:blockPositionDescription})]})}}),hasRenderedMovers&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(cell.Z,{className:moverCellClassName,withoutGridItem:!0,children:[(0,jsx_runtime.jsx)(item.Z,{children:_ref3=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref3;return(0,jsx_runtime.jsx)(block_mover_button.g,{orientation:"vertical",clientIds:[clientId],ref:ref,tabIndex:tabIndex,onFocus:onFocus})}}),(0,jsx_runtime.jsx)(item.Z,{children:_ref4=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref4;return(0,jsx_runtime.jsx)(block_mover_button.t,{orientation:"vertical",clientIds:[clientId],ref:ref,tabIndex:tabIndex,onFocus:onFocus})}})]})}),showBlockActions&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(cell.Z,{className:listViewBlockEditClassName,"aria-selected":!!isSelected||forceSelectionContentLock,children:props=>isEditable&&(0,jsx_runtime.jsx)(block_edit_button,{...props,label:editAriaLabel,clientId:clientId})}),(0,jsx_runtime.jsx)(cell.Z,{className:listViewBlockSettingsClassName,"aria-selected":!!isSelected||forceSelectionContentLock,children:_ref5=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref5;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(MoreMenuComponent,{clientIds:dropdownClientIds,block:block,clientId:clientId,icon:more_vertical.Z,label:settingsAriaLabel,toggleProps:{ref:ref,className:"block-editor-list-view-block__menu",tabIndex:tabIndex,onFocus:onFocus},disableOpenOnArrowDown:!0,__experimentalSelectBlock:updateSelection})})}})]})]})}ListViewBlock.displayName="ListViewBlock",ListViewBlock.__docgenInfo={description:"",methods:[],displayName:"ListViewBlock"};var off_canvas_editor_block=(0,react.memo)(ListViewBlock);function countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault){var _expandedState$block$;if(null==draggedClientIds?void 0:draggedClientIds.includes(block.clientId))return 0;return(null!==(_expandedState$block$=expandedState[block.clientId])&&void 0!==_expandedState$block$?_expandedState$block$:isExpandedByDefault)?1+block.innerBlocks.reduce(countReducer(expandedState,draggedClientIds,isExpandedByDefault),0):1}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/block.js"]={name:"ListViewBlock",docgenInfo:ListViewBlock.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/block.js"});const countReducer=(expandedState,draggedClientIds,isExpandedByDefault)=>(count,block)=>{var _expandedState$block$2;if(null==draggedClientIds?void 0:draggedClientIds.includes(block.clientId))return count;return(null!==(_expandedState$block$2=expandedState[block.clientId])&&void 0!==_expandedState$block$2?_expandedState$block$2:isExpandedByDefault)&&block.innerBlocks.length>0?count+countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault):count+1},branch_noop=()=>{};function ListViewBranch(props){const{blocks:blocks,selectBlock:selectBlock=branch_noop,showBlockMovers:showBlockMovers,selectedClientIds:selectedClientIds,level:level=1,path:path="",isBranchSelected:isBranchSelected=!1,listPosition:listPosition=0,fixedListWindow:fixedListWindow,isExpanded:isExpanded,parentId:parentId,shouldShowInnerBlocks:shouldShowInnerBlocks=!0,selectBlockInCanvas:selectBlockInCanvas}=props,isContentLocked=(0,use_select.Z)((select=>!(!parentId||"contentOnly"!==select(store.h).getTemplateLock(parentId))),[parentId]),{expandedState:expandedState,draggedClientIds:draggedClientIds}=useListViewContext();if(isContentLocked)return null;const showAppender=1===level,filteredBlocks=blocks.filter(Boolean),blockCount=filteredBlocks.length,rowCount=showAppender?blockCount+1:blockCount;let nextPosition=listPosition;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[filteredBlocks.map(((block,index)=>{var _expandedState$client;const{clientId:clientId,innerBlocks:innerBlocks}=block;index>0&&(nextPosition+=countBlocks(filteredBlocks[index-1],expandedState,draggedClientIds,isExpanded));const{itemInView:itemInView}=fixedListWindow,blockInView=itemInView(nextPosition),position=index+1,updatedPath=path.length>0?`${path}_${position}`:`${position}`,hasNestedBlocks=!(null==innerBlocks||!innerBlocks.length),shouldExpand=hasNestedBlocks&&shouldShowInnerBlocks?null!==(_expandedState$client=expandedState[clientId])&&void 0!==_expandedState$client?_expandedState$client:isExpanded:void 0,isDragged=!(null==draggedClientIds||!draggedClientIds.includes(clientId)),showBlock=isDragged||blockInView,isSelected=((clientId,selectedBlockClientIds)=>Array.isArray(selectedBlockClientIds)&&selectedBlockClientIds.length?-1!==selectedBlockClientIds.indexOf(clientId):selectedBlockClientIds===clientId)(clientId,selectedClientIds),isSelectedBranch=isBranchSelected||isSelected&&hasNestedBlocks;return(0,jsx_runtime.jsxs)(context.ZP,{value:!isSelected,children:[showBlock&&(0,jsx_runtime.jsx)(off_canvas_editor_block,{block:block,selectBlock:selectBlock,isSelected:isSelected,isBranchSelected:isSelectedBranch,isDragged:isDragged,level:level,position:position,rowCount:rowCount,siblingBlockCount:blockCount,showBlockMovers:showBlockMovers,path:updatedPath,isExpanded:shouldExpand,listPosition:nextPosition,selectedClientIds:selectedClientIds,selectBlockInCanvas:selectBlockInCanvas}),!showBlock&&(0,jsx_runtime.jsx)("tr",{children:(0,jsx_runtime.jsx)("td",{className:"block-editor-list-view-placeholder"})}),hasNestedBlocks&&shouldExpand&&!isDragged&&(0,jsx_runtime.jsx)(ListViewBranch,{parentId:clientId,blocks:innerBlocks,selectBlock:selectBlock,showBlockMovers:showBlockMovers,level:level+1,path:updatedPath,listPosition:nextPosition+1,fixedListWindow:fixedListWindow,isBranchSelected:isSelectedBranch,selectedClientIds:selectedClientIds,isExpanded:isExpanded,selectBlockInCanvas:selectBlockInCanvas})]},clientId)})),showAppender&&(0,jsx_runtime.jsx)(row.Z,{level:level,setSize:rowCount,positionInSet:rowCount,isExpanded:!0,children:(0,jsx_runtime.jsx)(cell.Z,{children:treeGridCellProps=>(0,jsx_runtime.jsx)(Appender,{nestingLevel:level,blockCount:blockCount,...treeGridCellProps})})})]})}ListViewBranch.__docgenInfo={description:"",methods:[],displayName:"ListViewBranch"};var branch=(0,react.memo)(ListViewBranch);function ListViewDropIndicator(_ref){let{listViewRef:listViewRef,blockDropTarget:blockDropTarget}=_ref;const{rootClientId:rootClientId,clientId:clientId,dropPosition:dropPosition}=blockDropTarget||{},[rootBlockElement,blockElement]=(0,react.useMemo)((()=>{if(!listViewRef.current)return[];return[rootClientId?listViewRef.current.querySelector(`[data-block="${rootClientId}"]`):void 0,clientId?listViewRef.current.querySelector(`[data-block="${clientId}"]`):void 0]}),[rootClientId,clientId]),targetElement=blockElement||rootBlockElement,getDropIndicatorIndent=(0,react.useCallback)((()=>{if(!rootBlockElement)return 0;const targetElementRect=targetElement.getBoundingClientRect();return rootBlockElement.querySelector(".block-editor-block-icon").getBoundingClientRect().right-targetElementRect.left}),[rootBlockElement,targetElement]),style=(0,react.useMemo)((()=>{if(!targetElement)return{};const indent=getDropIndicatorIndent();return{width:targetElement.offsetWidth-indent}}),[getDropIndicatorIndent,targetElement]),popoverAnchor=(0,react.useMemo)((()=>{if(targetElement&&("top"===dropPosition||"bottom"===dropPosition||"inside"===dropPosition))return{ownerDocument:targetElement.ownerDocument,getBoundingClientRect(){const rect=targetElement.getBoundingClientRect(),indent=getDropIndicatorIndent(),left=rect.left+indent,right=rect.right;let top=0,bottom=0;"top"===dropPosition?(top=rect.top,bottom=rect.top):(top=rect.bottom,bottom=rect.bottom);const width=right-left,height=bottom-top;return new window.DOMRect(left,top,width,height)}}}),[targetElement,dropPosition,getDropIndicatorIndent]);return targetElement?(0,jsx_runtime.jsx)(popover.Z,{animate:!1,anchor:popoverAnchor,focusOnMount:!1,className:"block-editor-list-view-drop-indicator",variant:"unstyled",children:(0,jsx_runtime.jsx)("div",{style:style,className:"block-editor-list-view-drop-indicator__line"})}):null}function useBlockSelection(){const{clearSelectedBlock:clearSelectedBlock,multiSelect:multiSelect,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),{getBlockName:getBlockName,getBlockParents:getBlockParents,getBlockSelectionStart:getBlockSelectionStart,getBlockSelectionEnd:getBlockSelectionEnd,getSelectedBlockClientIds:getSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,hasSelectedBlock:hasSelectedBlock}=(0,use_select.Z)(store.h),{getBlockType:getBlockType}=(0,use_select.Z)(build_module.h);return{updateBlockSelection:(0,react.useCallback)((async(event,clientId,destinationClientId)=>{if(null==event||!event.shiftKey)return void selectBlock(clientId);event.preventDefault();const isKeyPress="keydown"===event.type&&(event.keyCode===keycodes_build_module.UP||event.keyCode===keycodes_build_module.WV||event.keyCode===keycodes_build_module.Sd||event.keyCode===keycodes_build_module.uR);if(!isKeyPress&&!hasSelectedBlock()&&!hasMultiSelection())return void selectBlock(clientId,null);const selectedBlocks=getSelectedBlockClientIds(),clientIdWithParents=[...getBlockParents(clientId),clientId];isKeyPress&&!selectedBlocks.some((blockId=>clientIdWithParents.includes(blockId)))&&await clearSelectedBlock();let startTarget=getBlockSelectionStart(),endTarget=clientId;isKeyPress&&(hasSelectedBlock()||hasMultiSelection()||(startTarget=clientId),destinationClientId&&(endTarget=destinationClientId));const startParents=getBlockParents(startTarget),endParents=getBlockParents(endTarget),{start:start,end:end}=function getCommonDepthClientIds(startId,endId,startParents,endParents){const startPath=[...startParents,startId],endPath=[...endParents,endId],depth=Math.min(startPath.length,endPath.length)-1;return{start:startPath[depth],end:endPath[depth]}}(startTarget,endTarget,startParents,endParents);await multiSelect(start,end,null);const updatedSelectedBlocks=getSelectedBlockClientIds();if((event.keyCode===keycodes_build_module.Sd||event.keyCode===keycodes_build_module.uR)&&updatedSelectedBlocks.length>1)return;const selectionDiff=selectedBlocks.filter((blockId=>!updatedSelectedBlocks.includes(blockId)));let label;if(1===selectionDiff.length){var _getBlockType;const title=null===(_getBlockType=getBlockType(getBlockName(selectionDiff[0])))||void 0===_getBlockType?void 0:_getBlockType.title;title&&(label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s deselected."),title))}else selectionDiff.length>1&&(label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s blocks deselected."),selectionDiff.length));label&&(0,a11y_build_module.D)(label)}),[clearSelectedBlock,getBlockName,getBlockType,getBlockParents,getBlockSelectionStart,getBlockSelectionEnd,getSelectedBlockClientIds,hasMultiSelection,hasSelectedBlock,multiSelect,selectBlock])}}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/branch.js"]={name:"ListViewBranch",docgenInfo:ListViewBranch.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/branch.js"}),ListViewDropIndicator.displayName="ListViewDropIndicator",ListViewDropIndicator.__docgenInfo={description:"",methods:[],displayName:"ListViewDropIndicator"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/drop-indicator.js"]={name:"ListViewDropIndicator",docgenInfo:ListViewDropIndicator.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/drop-indicator.js"});var use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js"),use_drop_zone=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js"),math=__webpack_require__("./packages/block-editor/src/utils/math.js"),use_on_block_drop=__webpack_require__("./packages/block-editor/src/components/use-on-block-drop/index.js");const ALLOWED_DROP_EDGES=["top","bottom"];function useListViewDropZone(){const{getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,getBlockCount:getBlockCount,getDraggedBlockClientIds:getDraggedBlockClientIds,canInsertBlocks:canInsertBlocks}=(0,use_select.Z)(store.h),[target,setTarget]=(0,react.useState)(),{rootClientId:targetRootClientId,blockIndex:targetBlockIndex}=target||{},onBlockDrop=(0,use_on_block_drop.ZP)(targetRootClientId,targetBlockIndex),draggedBlockClientIds=getDraggedBlockClientIds(),throttled=(0,use_throttle.Z)((0,react.useCallback)(((event,currentTarget)=>{const position={x:event.clientX,y:event.clientY},isBlockDrag=!(null==draggedBlockClientIds||!draggedBlockClientIds.length),newTarget=function getListViewDropTarget(blocksData,position){let candidateEdge,candidateBlockData,candidateDistance,candidateRect;for(const blockData of blocksData){if(blockData.isDraggedBlock)continue;const rect=blockData.element.getBoundingClientRect(),[distance,edge]=(0,math.kY)(position,rect,ALLOWED_DROP_EDGES),isCursorWithinBlock=(0,math._3)(position,rect);if(void 0===candidateDistance||distance<candidateDistance||isCursorWithinBlock){candidateDistance=distance;const index=blocksData.indexOf(blockData),previousBlockData=blocksData[index-1];if("top"===edge&&previousBlockData&&previousBlockData.rootClientId===blockData.rootClientId&&!previousBlockData.isDraggedBlock?(candidateBlockData=previousBlockData,candidateEdge="bottom",candidateRect=previousBlockData.element.getBoundingClientRect()):(candidateBlockData=blockData,candidateEdge=edge,candidateRect=rect),isCursorWithinBlock)break}}if(!candidateBlockData)return;const isDraggingBelow="bottom"===candidateEdge;if(isDraggingBelow&&candidateBlockData.canInsertDraggedBlocksAsChild&&(candidateBlockData.innerBlockCount>0||function isNestingGesture(point,rect){const blockCenterX=rect.left+rect.width/2;return point.x>blockCenterX}(position,candidateRect)))return{rootClientId:candidateBlockData.clientId,blockIndex:0,dropPosition:"inside"};if(!candidateBlockData.canInsertDraggedBlocksAsSibling)return;const offset=isDraggingBelow?1:0;return{rootClientId:candidateBlockData.rootClientId,clientId:candidateBlockData.clientId,blockIndex:candidateBlockData.blockIndex+offset,dropPosition:candidateEdge}}(Array.from(currentTarget.querySelectorAll("[data-block]")).map((blockElement=>{const clientId=blockElement.dataset.block,rootClientId=getBlockRootClientId(clientId);return{clientId:clientId,rootClientId:rootClientId,blockIndex:getBlockIndex(clientId),element:blockElement,isDraggedBlock:!!isBlockDrag&&draggedBlockClientIds.includes(clientId),innerBlockCount:getBlockCount(clientId),canInsertDraggedBlocksAsSibling:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,rootClientId),canInsertDraggedBlocksAsChild:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,clientId)}})),position);newTarget&&setTarget(newTarget)}),[draggedBlockClientIds]),200);return{ref:(0,use_drop_zone.Z)({onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget)},onDragEnd(){throttled.cancel(),setTarget(null)}}),target:target}}const expanded=(state,action)=>Array.isArray(action.clientIds)?{...state,...action.clientIds.reduce(((newState,id)=>({...newState,[id]:"expand"===action.type})),{})}:state;function __ExperimentalOffCanvasEditor(_ref,ref){let{id:id,blocks:blocks,showBlockMovers:showBlockMovers=!1,isExpanded:isExpanded=!1,selectBlockInCanvas:selectBlockInCanvas=!0,LeafMoreMenu:LeafMoreMenu}=_ref;const{clientIdsTree:clientIdsTree,draggedClientIds:draggedClientIds,selectedClientIds:selectedClientIds}=function useListViewClientIds(blocks){return(0,use_select.Z)((select=>{const{getDraggedBlockClientIds:getDraggedBlockClientIds,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetClientIdsTree:__unstableGetClientIdsTree}=select(store.h);return{selectedClientIds:getSelectedBlockClientIds(),draggedClientIds:getDraggedBlockClientIds(),clientIdsTree:blocks||__unstableGetClientIdsTree()}}),[blocks])}(blocks),{visibleBlockCount:visibleBlockCount,shouldShowInnerBlocks:shouldShowInnerBlocks}=(0,use_select.Z)((select=>{const{getGlobalBlockCount:getGlobalBlockCount,getClientIdsOfDescendants:getClientIdsOfDescendants,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),draggedBlockCount=(null==draggedClientIds?void 0:draggedClientIds.length)>0?getClientIdsOfDescendants(draggedClientIds).length+1:0;return{visibleBlockCount:getGlobalBlockCount()-draggedBlockCount,shouldShowInnerBlocks:"zoom-out"!==__unstableGetEditorMode()}}),[draggedClientIds]),{updateBlockSelection:updateBlockSelection}=useBlockSelection(),[expandedState,setExpandedState]=(0,react.useReducer)(expanded,{}),{ref:dropZoneRef,target:blockDropTarget}=useListViewDropZone(),elementRef=(0,react.useRef)(),treeGridRef=(0,use_merge_refs.Z)([elementRef,dropZoneRef,ref]),isMounted=(0,react.useRef)(!1),{setSelectedTreeId:setSelectedTreeId}=function useListViewExpandSelectedItem(_ref){let{firstSelectedBlockClientId:firstSelectedBlockClientId,setExpandedState:setExpandedState}=_ref;const[selectedTreeId,setSelectedTreeId]=(0,react.useState)(null),{selectedBlockParentClientIds:selectedBlockParentClientIds}=(0,use_select.Z)((select=>{const{getBlockParents:getBlockParents}=select(store.h);return{selectedBlockParentClientIds:getBlockParents(firstSelectedBlockClientId,!1)}}),[firstSelectedBlockClientId]),parentClientIds=Array.isArray(selectedBlockParentClientIds)&&selectedBlockParentClientIds.length?selectedBlockParentClientIds:null;return(0,react.useEffect)((()=>{selectedTreeId!==firstSelectedBlockClientId&&parentClientIds&&setExpandedState({type:"expand",clientIds:selectedBlockParentClientIds})}),[firstSelectedBlockClientId]),{setSelectedTreeId:setSelectedTreeId}}({firstSelectedBlockClientId:selectedClientIds[0],setExpandedState:setExpandedState}),selectEditorBlock=(0,react.useCallback)(((event,blockClientId)=>{updateBlockSelection(event,blockClientId),setSelectedTreeId(blockClientId)}),[setSelectedTreeId,updateBlockSelection]);(0,react.useEffect)((()=>{isMounted.current=!0}),[]);const[fixedListWindow]=(0,use_fixed_window_list.Z)(elementRef,36,visibleBlockCount,{useWindowing:!0,windowOverscan:40}),expand=(0,react.useCallback)((blockClientId=>{blockClientId&&setExpandedState({type:"expand",clientIds:[blockClientId]})}),[setExpandedState]),collapse=(0,react.useCallback)((blockClientId=>{blockClientId&&setExpandedState({type:"collapse",clientIds:[blockClientId]})}),[setExpandedState]),expandRow=(0,react.useCallback)((row=>{var _row$dataset;expand(null==row||null===(_row$dataset=row.dataset)||void 0===_row$dataset?void 0:_row$dataset.block)}),[expand]),collapseRow=(0,react.useCallback)((row=>{var _row$dataset2;collapse(null==row||null===(_row$dataset2=row.dataset)||void 0===_row$dataset2?void 0:_row$dataset2.block)}),[collapse]),focusRow=(0,react.useCallback)(((event,startRow,endRow)=>{var _startRow$dataset,_endRow$dataset;event.shiftKey&&updateBlockSelection(event,null==startRow||null===(_startRow$dataset=startRow.dataset)||void 0===_startRow$dataset?void 0:_startRow$dataset.block,null==endRow||null===(_endRow$dataset=endRow.dataset)||void 0===_endRow$dataset?void 0:_endRow$dataset.block)}),[updateBlockSelection]),contextValue=(0,react.useMemo)((()=>({isTreeGridMounted:isMounted.current,draggedClientIds:draggedClientIds,expandedState:expandedState,expand:expand,collapse:collapse,LeafMoreMenu:LeafMoreMenu})),[isMounted.current,draggedClientIds,expandedState,expand,collapse,LeafMoreMenu]);return(0,jsx_runtime.jsxs)(context.ZP,{value:!0,children:[(0,jsx_runtime.jsx)(ListViewDropIndicator,{listViewRef:elementRef,blockDropTarget:blockDropTarget}),(0,jsx_runtime.jsx)("div",{className:"offcanvas-editor-list-view-tree-wrapper",children:(0,jsx_runtime.jsx)(tree_grid.ZP,{id:id,className:"block-editor-list-view-tree","aria-label":(0,i18n_build_module.__)("Block navigation structure"),ref:treeGridRef,onCollapseRow:collapseRow,onExpandRow:expandRow,onFocusRow:focusRow,applicationAriaLabel:(0,i18n_build_module.__)("Block navigation structure"),children:(0,jsx_runtime.jsxs)(ListViewContext.Provider,{value:contextValue,children:[(0,jsx_runtime.jsx)(branch,{blocks:clientIdsTree,selectBlock:selectEditorBlock,showBlockMovers:showBlockMovers,fixedListWindow:fixedListWindow,selectedClientIds:selectedClientIds,isExpanded:isExpanded,shouldShowInnerBlocks:shouldShowInnerBlocks,selectBlockInCanvas:selectBlockInCanvas}),(0,jsx_runtime.jsx)(row.Z,{level:1,setSize:1,positionInSet:1,isExpanded:!0,children:!clientIdsTree.length&&(0,jsx_runtime.jsx)(cell.Z,{withoutGridItem:!0,children:(0,jsx_runtime.jsx)("div",{className:"offcanvas-editor-list-view-is-empty",children:(0,i18n_build_module.__)("Your menu is currently empty. Add your first menu item to get started.")})})})]})})})]})}__ExperimentalOffCanvasEditor.displayName="__ExperimentalOffCanvasEditor",__ExperimentalOffCanvasEditor.__docgenInfo={description:"Show a hierarchical list of blocks.\n\n@param {Object}  props                     Components props.\n@param {string}  props.id                  An HTML element id for the root element of ListView.\n@param {Array}   props.blocks              Custom subset of block client IDs to be used instead of the default hierarchy.\n@param {boolean} props.showBlockMovers     Flag to enable block movers\n@param {boolean} props.isExpanded          Flag to determine whether nested levels are expanded by default.\n@param {boolean} props.selectBlockInCanvas Flag to determine whether the list view should be a block selection mechanism.\n@param {Object}  props.LeafMoreMenu        Optional more menu substitution.\n@param {Object}  ref                       Forwarded ref",methods:[],displayName:"__ExperimentalOffCanvasEditor",props:{showBlockMovers:{defaultValue:{value:"false",computed:!1},required:!1},isExpanded:{defaultValue:{value:"false",computed:!1},required:!1},selectBlockInCanvas:{defaultValue:{value:"true",computed:!1},required:!1}}};var off_canvas_editor=(0,react.forwardRef)(__ExperimentalOffCanvasEditor);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/off-canvas-editor/index.js"]={name:"__ExperimentalOffCanvasEditor",docgenInfo:__ExperimentalOffCanvasEditor.__docgenInfo,path:"packages/block-editor/src/components/off-canvas-editor/index.js"});const{lock:lock,unlock:unlock}=(0,implementation.es)("I know using unstable features means my plugin or theme will inevitably break on the next WordPress release.","@wordpress/block-editor");lock({},{...global_styles_namespaceObject,ExperimentalBlockEditorProvider:provider.jC,__experimentalOffCanvasEditor:off_canvas_editor})},"./packages/block-editor/src/hooks/gap.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ul:function(){return GapEdit},U$:function(){return getGapCSSValue},Oi:function(){return hasGapSupport},ye:function(){return hasGapValue},St:function(){return resetGap},UA:function(){return useIsGapDisabled}});var build_module=__webpack_require__("./packages/i18n/build-module/index.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),box_control=__webpack_require__("./packages/components/build-module/box-control/index.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),use_block_refs=__webpack_require__("./packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js");function isValueSpacingPreset(value){return!(null==value||!value.includes)&&("0"===value||value.includes("var:preset|spacing|"))}function getSpacingPresetCssVar(value){if(!value)return;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?`var(--wp--preset--spacing--${slug[1]})`:value}function getSpacingPresetSlug(value){if(!value)return;if("0"===value||"default"===value)return value;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?slug[1]:void 0}const LABELS={all:(0,build_module.__)("All sides"),top:(0,build_module.__)("Top"),bottom:(0,build_module.__)("Bottom"),left:(0,build_module.__)("Left"),right:(0,build_module.__)("Right"),mixed:(0,build_module.__)("Mixed"),vertical:(0,build_module.__)("Vertical"),horizontal:(0,build_module.__)("Horizontal")},DEFAULT_VALUES={top:void 0,right:void 0,bottom:void 0,left:void 0},ALL_SIDES=["top","right","bottom","left"];function mode(arr){return arr.sort(((a,b)=>arr.filter((v=>v===a)).length-arr.filter((v=>v===b)).length)).pop()}function isValuesMixed(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sides=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ALL_SIDES;return Object.values(values).length>=1&&Object.values(values).length<sides.length||new Set(Object.values(values)).size>1}function isValuesDefined(values){return null!=values&&Object.values(values).filter((value=>!!value)).length>0}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),box_control_utils=__webpack_require__("./packages/components/build-module/box-control/utils.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),custom_select_control=__webpack_require__("./packages/components/build-module/custom-select-control/index.js"),settings=__webpack_require__("./packages/icons/build-module/library/settings.js"),use_setting=__webpack_require__("./packages/block-editor/src/components/use-setting/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CUSTOM_VALUE_SETTINGS={px:{max:300,steps:1},"%":{max:100,steps:1},vw:{max:100,steps:1},vh:{max:100,steps:1},em:{max:10,steps:.1},rm:{max:10,steps:.1}};function SpacingInputControl(_ref){var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2,_CUSTOM_VALUE_SETTING3,_CUSTOM_VALUE_SETTING4,_spacingSizes$current;let{spacingSizes:spacingSizes,value:value,side:side,onChange:onChange,isMixed:isMixed=!1,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;value=function getPresetValueFromCustomValue(value,spacingSizes){if(isValueSpacingPreset(value))return value;const spacingMatch=spacingSizes.find((size=>String(size.size)===String(value)));return null!=spacingMatch&&spacingMatch.slug?`var:preset|spacing|${spacingMatch.slug}`:value}(value,spacingSizes);let selectListSizes=spacingSizes;const showRangeControl=spacingSizes.length<=8,disableCustomSpacingSizes=(0,use_select.Z)((select=>{const editorSettings=select(store.h).getSettings();return null==editorSettings?void 0:editorSettings.disableCustomSpacingSizes})),[showCustomValueControl,setShowCustomValueControl]=(0,react.useState)(!disableCustomSpacingSizes&&void 0!==value&&!isValueSpacingPreset(value)),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["px","em","rem"]});let currentValue=null;!showRangeControl&&!showCustomValueControl&&void 0!==value&&(!isValueSpacingPreset(value)||isValueSpacingPreset(value)&&isMixed)?(selectListSizes=[...spacingSizes,{name:isMixed?(0,build_module.__)("Mixed"):(0,build_module.gB)((0,build_module.__)("Custom (%s)"),value),slug:"custom",size:value}],currentValue=selectListSizes.length-1):isMixed||(currentValue=showCustomValueControl?function getCustomValueFromPreset(value,spacingSizes){if(!isValueSpacingPreset(value))return value;const slug=getSpacingPresetSlug(value),spacingSize=spacingSizes.find((size=>String(size.slug)===slug));return null==spacingSize?void 0:spacingSize.size}(value,spacingSizes):function getSliderValueFromPreset(presetValue,spacingSizes){if(void 0===presetValue)return 0;const slug=0===parseFloat(presetValue,10)?"0":getSpacingPresetSlug(presetValue),sliderValue=spacingSizes.findIndex((spacingSize=>String(spacingSize.slug)===slug));return-1!==sliderValue?sliderValue:NaN}(value,spacingSizes));const selectedUnit=(0,react.useMemo)((()=>(0,utils.YX)(currentValue)),[currentValue])[1]||units[0].value,customTooltipContent=newValue=>{var _spacingSizes$newValu;return void 0===value||null===(_spacingSizes$newValu=spacingSizes[newValue])||void 0===_spacingSizes$newValu?void 0:_spacingSizes$newValu.name},customRangeValue=parseFloat(currentValue,10),getNewPresetValue=(newSize,controlType)=>{var _spacingSizes$newSize;const size=parseInt(newSize,10);if("selectList"===controlType){if(0===size)return;if(1===size)return"0"}else if(0===size)return"0";return`var:preset|spacing|${null===(_spacingSizes$newSize=spacingSizes[newSize])||void 0===_spacingSizes$newSize?void 0:_spacingSizes$newSize.slug}`},allPlaceholder=isMixed?(0,build_module.__)("Mixed"):null,currentValueHint=isMixed?(0,build_module.__)("Mixed"):customTooltipContent(currentValue),options=selectListSizes.map(((size,index)=>({key:index,name:size.name}))),marks=spacingSizes.map(((newValue,index)=>({value:index,label:void 0}))),ariaLabel=(0,build_module.gB)((0,build_module.__)("%1$s %2$s"),LABELS[side],null==type?void 0:type.toLowerCase()),showHint=showRangeControl&&!showCustomValueControl&&void 0!==currentValueHint;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["all"!==side&&(0,jsx_runtime.jsxs)(component.Z,{className:"components-spacing-sizes-control__side-labels",children:[(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__side-label",children:LABELS[side]}),showHint&&(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-single",children:currentValueHint})]}),"all"===side&&showHint&&(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-all",children:currentValueHint}),!disableCustomSpacingSizes&&(0,jsx_runtime.jsx)(build_module_button.ZP,{label:showCustomValueControl?(0,build_module.__)("Use size preset"):(0,build_module.__)("Set custom size"),icon:settings.Z,onClick:()=>{setShowCustomValueControl(!showCustomValueControl)},isPressed:showCustomValueControl,isSmall:!0,className:classnames_default()({"components-spacing-sizes-control__custom-toggle-all":"all"===side,"components-spacing-sizes-control__custom-toggle-single":"all"!==side}),iconSize:24}),showCustomValueControl&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(unit_control.ZP,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,onChange:newSize=>onChange((newSize=>isNaN(parseFloat(newSize))?void 0:newSize)(newSize)),value:currentValue,units:units,min:minimumCustomValue,placeholder:allPlaceholder,disableUnits:isMixed,label:ariaLabel,hideLabelFromVision:!0,className:"components-spacing-sizes-control__custom-value-input",size:"__unstable-large"}),(0,jsx_runtime.jsx)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,value:customRangeValue,min:0,max:null!==(_CUSTOM_VALUE_SETTING=null===(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING2?void 0:_CUSTOM_VALUE_SETTING2.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING3=null===(_CUSTOM_VALUE_SETTING4=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING4?void 0:_CUSTOM_VALUE_SETTING4.steps)&&void 0!==_CUSTOM_VALUE_SETTING3?_CUSTOM_VALUE_SETTING3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},className:"components-spacing-sizes-control__custom-value-range",__nextHasNoMarginBottom:!0})]}),showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,className:"components-spacing-sizes-control__range-control",value:currentValue,onChange:newSize=>onChange(getNewPresetValue(newSize)),onMouseDown:event=>{var _event$nativeEvent;(null==event||null===(_event$nativeEvent=event.nativeEvent)||void 0===_event$nativeEvent?void 0:_event$nativeEvent.offsetX)<35&&void 0===value&&onChange("0")},withInputField:!1,"aria-valuenow":currentValue,"aria-valuetext":null===(_spacingSizes$current=spacingSizes[currentValue])||void 0===_spacingSizes$current?void 0:_spacingSizes$current.name,renderTooltipContent:customTooltipContent,min:0,max:spacingSizes.length-1,marks:marks,label:ariaLabel,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,onFocus:onMouseOver,onBlur:onMouseOut}),!showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(custom_select_control.Z,{className:"components-spacing-sizes-control__custom-select-control",value:options.find((option=>option.key===currentValue))||"",onChange:selection=>{onChange(getNewPresetValue(selection.selectedItem.key,"selectList"))},options:options,label:ariaLabel,hideLabelFromVision:!0,__nextUnconstrainedWidth:!0,size:"__unstable-large",onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut})]})}function AllInputControl(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const allValue=function getAllRawValue(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mode(Object.values(values))}(values),isMixed=isValuesDefined(values)&&isValuesMixed(values,sides);return(0,jsx_runtime.jsx)(SpacingInputControl,{value:allValue,onChange:next=>{const nextValues=(0,box_control_utils.gB)(values,next,sides);onChange(nextValues)},side:"all",spacingSizes:spacingSizes,isMixed:isMixed,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut})}function BoxInputControls(_ref){let{values:values,sides:sides,onChange:onChange,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const filteredSides=null!=sides&&sides.length?ALL_SIDES.filter((side=>sides.includes(side))):ALL_SIDES,createHandleOnChange=side=>next=>{const nextValues={...values};nextValues[side]=next,onChange(nextValues)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>(0,jsx_runtime.jsx)(SpacingInputControl,{value:values[side],label:LABELS[side],withInputField:!1,side:side,onChange:createHandleOnChange(side),spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut},`spacing-sizes-control-${side}`)))})}SpacingInputControl.__docgenInfo={description:"",methods:[],displayName:"SpacingInputControl",props:{isMixed:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/spacing-input-control.js"]={name:"SpacingInputControl",docgenInfo:SpacingInputControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/spacing-input-control.js"}),AllInputControl.displayName="AllInputControl",AllInputControl.__docgenInfo={description:"",methods:[],displayName:"AllInputControl"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/all-input-control.js"]={name:"AllInputControl",docgenInfo:AllInputControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/all-input-control.js"}),BoxInputControls.__docgenInfo={description:"",methods:[],displayName:"BoxInputControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/input-controls.js"]={name:"BoxInputControls",docgenInfo:BoxInputControls.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/input-controls.js"});const groupedSides=["vertical","horizontal"];function AxialInputControls(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const createHandleOnChange=side=>next=>{if(!onChange)return;const nextValues={...values};"vertical"===side&&(nextValues.top=next,nextValues.bottom=next),"horizontal"===side&&(nextValues.left=next,nextValues.right=next),onChange(nextValues)},filteredSides=null!=sides&&sides.length?groupedSides.filter((side=>sides.includes(side))):groupedSides;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>{const axisValue="vertical"===side?values.top:values.left;return(0,jsx_runtime.jsx)(SpacingInputControl,{value:axisValue,onChange:createHandleOnChange(side),label:LABELS[side],withInputField:!1,side:side,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut},`spacing-sizes-control-${side}`)}))})}AxialInputControls.__docgenInfo={description:"",methods:[],displayName:"AxialInputControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/axial-input-controls.js"]={name:"AxialInputControls",docgenInfo:AxialInputControls.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/axial-input-controls.js"});var library_link=__webpack_require__("./packages/icons/build-module/library/link.js"),link_off=__webpack_require__("./packages/icons/build-module/library/link-off.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js");function LinkedButton(_ref){let{isLinked:isLinked,onClick:onClick}=_ref;const label=isLinked?(0,build_module.__)("Unlink sides"):(0,build_module.__)("Link sides");return(0,jsx_runtime.jsx)(tooltip.Z,{text:label,children:(0,jsx_runtime.jsx)("span",{className:"component-spacing-sizes-control__linked-button",children:(0,jsx_runtime.jsx)(build_module_button.ZP,{isSmall:!0,icon:isLinked?library_link.Z:link_off.Z,iconSize:24,"aria-label":label,onClick:onClick})})})}function SpacingSizesControl(_ref){let{inputProps:inputProps,onChange:onChange,label:label=(0,build_module.__)("Spacing Control"),values:values,sides:sides,splitOnAxis:splitOnAxis=!1,useSelect:useSelect,minimumCustomValue:minimumCustomValue=0,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const spacingSizes=[{name:0,slug:"0",size:0},...(0,use_setting.Z)("spacing.spacingSizes")||[]];spacingSizes.length>8&&spacingSizes.unshift({name:(0,build_module.__)("Default"),slug:"default",size:void 0});const inputValues=values||DEFAULT_VALUES,hasInitialValue=isValuesDefined(values),hasOneSide=1===(null==sides?void 0:sides.length),[isLinked,setIsLinked]=(0,react.useState)(!hasInitialValue||!isValuesMixed(inputValues,sides)||hasOneSide),inputControlProps={...inputProps,onChange:nextValue=>{const newValues={...values,...nextValue};onChange(newValues)},isLinked:isLinked,sides:sides,values:inputValues,spacingSizes:spacingSizes,useSelect:useSelect,type:label,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut};return(0,jsx_runtime.jsxs)("fieldset",{className:classnames_default()("component-spacing-sizes-control",{"is-unlinked":!isLinked}),children:[(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{as:"legend",children:label}),!hasOneSide&&(0,jsx_runtime.jsx)(LinkedButton,{onClick:()=>{setIsLinked(!isLinked)},isLinked:isLinked}),isLinked&&(0,jsx_runtime.jsx)(AllInputControl,{"aria-label":label,...inputControlProps}),!isLinked&&splitOnAxis&&(0,jsx_runtime.jsx)(AxialInputControls,{...inputControlProps}),!isLinked&&!splitOnAxis&&(0,jsx_runtime.jsx)(BoxInputControls,{...inputControlProps})]})}LinkedButton.displayName="LinkedButton",LinkedButton.__docgenInfo={description:"",methods:[],displayName:"LinkedButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/linked-button.js"]={name:"LinkedButton",docgenInfo:LinkedButton.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/linked-button.js"}),SpacingSizesControl.displayName="SpacingSizesControl",SpacingSizesControl.__docgenInfo={description:"",methods:[],displayName:"SpacingSizesControl",props:{label:{defaultValue:{value:"__( 'Spacing Control' )",computed:!0},required:!1},splitOnAxis:{defaultValue:{value:"false",computed:!1},required:!1},minimumCustomValue:{defaultValue:{value:"0",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/index.js"]={name:"SpacingSizesControl",docgenInfo:SpacingSizesControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/index.js"});var tools_panel_item_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel-item/component.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),inspector_controls=__webpack_require__("./packages/block-editor/src/components/inspector-controls/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),hooks_utils=__webpack_require__("./packages/block-editor/src/hooks/utils.js"),block_popover=__webpack_require__("./packages/block-editor/src/components/block-popover/index.js");function hasMarginSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.margin)}function useIsMarginDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.margin"),isInvalid=!useIsDimensionsSupportValid(blockName,"margin");return!hasMarginSupport(blockName)||isDisabled||isInvalid}function MarginEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"margin"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsMarginDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,margin:next}};setAttributes({style:(0,hooks_utils.QU)(newStyle)})};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,jsx_runtime.jsx)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.margin,onChange:onChange,label:(0,build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.margin,onChange:onChange,label:(0,build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:!1,onMouseOver:onMouseOver,onMouseOut:onMouseOut})]}),native:null})}function MarginVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const margin=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.margin,style=(0,react.useMemo)((()=>{const marginTop=null!=margin&&margin.top?getSpacingPresetCssVar(null==margin?void 0:margin.top):0,marginRight=null!=margin&&margin.right?getSpacingPresetCssVar(null==margin?void 0:margin.right):0,marginBottom=null!=margin&&margin.bottom?getSpacingPresetCssVar(null==margin?void 0:margin.bottom):0,marginLeft=null!=margin&&margin.left?getSpacingPresetCssVar(null==margin?void 0:margin.left):0;return{borderTopWidth:marginTop,borderRightWidth:marginRight,borderBottomWidth:marginBottom,borderLeftWidth:marginLeft,top:marginTop?`calc(${marginTop} * -1)`:0,right:marginRight?`calc(${marginRight} * -1)`:0,bottom:marginBottom?`calc(${marginBottom} * -1)`:0,left:marginLeft?`calc(${marginLeft} * -1)`:0}}),[margin]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(margin),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(margin,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=margin,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[margin,forceShow]),isActive||forceShow?(0,jsx_runtime.jsx)(block_popover.Z,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:margin,__unstablePopoverSlot:"block-toolbar",shift:!1,children:(0,jsx_runtime.jsx)("div",{className:"block-editor__padding-visualizer",style:style})}):null}MarginVisualizer.displayName="MarginVisualizer",MarginVisualizer.__docgenInfo={description:"",methods:[],displayName:"MarginVisualizer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/margin.js"]={name:"MarginVisualizer",docgenInfo:MarginVisualizer.__docgenInfo,path:"packages/block-editor/src/hooks/margin.js"});var height_control=__webpack_require__("./packages/block-editor/src/components/height-control/index.js");function hasMinHeightSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,DIMENSIONS_SUPPORT_KEY);return!!(!0===support||null!=support&&support.minHeight)}function useIsMinHeightDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("dimensions.minHeight");return!hasMinHeightSupport(blockName)||isDisabled}function MinHeightEdit(props){var _style$dimensions;const{attributes:{style:style},setAttributes:setAttributes}=props;if(useIsMinHeightDisabled(props))return null;return(0,jsx_runtime.jsx)(height_control.Z,{label:(0,build_module.__)("Min. height"),value:null==style||null===(_style$dimensions=style.dimensions)||void 0===_style$dimensions?void 0:_style$dimensions.minHeight,onChange:next=>{const newStyle={...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:next}};setAttributes({style:(0,hooks_utils.QU)(newStyle)})}})}function hasPaddingSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.padding)}function useIsPaddingDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.padding"),isInvalid=!useIsDimensionsSupportValid(blockName,"padding");return!hasPaddingSupport(blockName)||isDisabled||isInvalid}function PaddingEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"padding"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsPaddingDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,padding:next}};setAttributes({style:(0,hooks_utils.QU)(newStyle)})};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,jsx_runtime.jsx)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.padding,onChange:onChange,label:(0,build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.padding,onChange:onChange,label:(0,build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut})]}),native:null})}function PaddingVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const padding=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.padding,style=(0,react.useMemo)((()=>({borderTopWidth:null!=padding&&padding.top?getSpacingPresetCssVar(null==padding?void 0:padding.top):0,borderRightWidth:null!=padding&&padding.right?getSpacingPresetCssVar(null==padding?void 0:padding.right):0,borderBottomWidth:null!=padding&&padding.bottom?getSpacingPresetCssVar(null==padding?void 0:padding.bottom):0,borderLeftWidth:null!=padding&&padding.left?getSpacingPresetCssVar(null==padding?void 0:padding.left):0})),[padding]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(padding),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(padding,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=padding,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[padding,forceShow]),isActive||forceShow?(0,jsx_runtime.jsx)(block_popover.Z,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:padding,__unstablePopoverSlot:"block-toolbar",shift:!1,children:(0,jsx_runtime.jsx)("div",{className:"block-editor__padding-visualizer",style:style})}):null}MinHeightEdit.displayName="MinHeightEdit",MinHeightEdit.__docgenInfo={description:"Inspector control panel containing the minHeight related configuration.\n\n@param {Object} props Block props.\n@return {WPElement} Edit component for height.",methods:[],displayName:"MinHeightEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/min-height.js"]={name:"MinHeightEdit",docgenInfo:MinHeightEdit.__docgenInfo,path:"packages/block-editor/src/hooks/min-height.js"}),PaddingVisualizer.displayName="PaddingVisualizer",PaddingVisualizer.__docgenInfo={description:"",methods:[],displayName:"PaddingVisualizer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/padding.js"]={name:"PaddingVisualizer",docgenInfo:PaddingVisualizer.__docgenInfo,path:"packages/block-editor/src/hooks/padding.js"});var toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");function helpText(selfStretch,parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"fill"===selfStretch?(0,build_module.__)("Stretch to fill available space."):"fixed"===selfStretch?"horizontal"===orientation?(0,build_module.__)("Specify a fixed width."):(0,build_module.__)("Specify a fixed height."):(0,build_module.__)("Fit contents.")}function ChildLayoutEdit(_ref){let{attributes:attributes,setAttributes:setAttributes,__unstableParentLayout:parentLayout}=_ref;const{style:style={}}=attributes,{layout:childLayout={}}=style,{selfStretch:selfStretch,flexSize:flexSize}=childLayout;return(0,react.useEffect)((()=>{"fixed"!==selfStretch||flexSize||setAttributes({style:{...style,layout:{...childLayout,selfStretch:"fit"}}})}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(toggle_group_control_component.Z,{size:"__unstable-large",label:childLayoutOrientation(parentLayout),value:selfStretch||"fit",help:helpText(selfStretch,parentLayout),onChange:value=>{const newFlexSize="fixed"!==value?null:flexSize;setAttributes({style:{...style,layout:{...childLayout,selfStretch:value,flexSize:newFlexSize}}})},isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fit",label:(0,build_module.__)("Fit")},"fit"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fill",label:(0,build_module.__)("Fill")},"fill"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fixed",label:(0,build_module.__)("Fixed")},"fixed")]}),"fixed"===selfStretch&&(0,jsx_runtime.jsx)(unit_control.ZP,{size:"__unstable-large",onChange:value=>{setAttributes({style:{...style,layout:{...childLayout,flexSize:value}}})},value:flexSize})]})}function hasChildLayoutSupport(_ref2){let{__unstableParentLayout:parentLayout={}}=_ref2;const{type:parentLayoutType="default",allowSizingOnChildren:allowSizingOnChildren=!1}=parentLayout;return"flex"===parentLayoutType&&allowSizingOnChildren}function useIsChildLayoutDisabled(props){const isDisabled=!(0,use_setting.Z)("layout");return!hasChildLayoutSupport(props)||isDisabled}function childLayoutOrientation(parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"horizontal"===orientation?(0,build_module.__)("Width"):(0,build_module.__)("Height")}ChildLayoutEdit.__docgenInfo={description:"Inspector controls containing the child layout related configuration.\n\n@param {Object} props                        Block props.\n@param {Object} props.attributes             Block attributes.\n@param {Object} props.setAttributes          Function to set block attributes.\n@param {Object} props.__unstableParentLayout\n\n@return {WPElement} child layout edit element.",methods:[],displayName:"ChildLayoutEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/child-layout.js"]={name:"ChildLayoutEdit",docgenInfo:ChildLayoutEdit.__docgenInfo,path:"packages/block-editor/src/hooks/child-layout.js"});const DIMENSIONS_SUPPORT_KEY="dimensions",SPACING_SUPPORT_KEY="spacing",dimensions_ALL_SIDES=["top","right","bottom","left"],AXIAL_SIDES=["vertical","horizontal"];function useVisualizerMouseOver(){const[isMouseOver,setIsMouseOver]=(0,react.useState)(!1),{__experimentalHideBlockInterface:hideBlockInterface,__experimentalShowBlockInterface:showBlockInterface}=(0,use_dispatch.Z)(store.h);return{isMouseOver:isMouseOver,onMouseOver:e=>{e.stopPropagation(),hideBlockInterface(),setIsMouseOver(!0)},onMouseOut:e=>{e.stopPropagation(),showBlockInterface(),setIsMouseOver(!1)}}}function DimensionsPanel(props){const isGapDisabled=useIsGapDisabled(props),isPaddingDisabled=useIsPaddingDisabled(props),isMarginDisabled=useIsMarginDisabled(props),isMinHeightDisabled=useIsMinHeightDisabled(props),isChildLayoutDisabled=useIsChildLayoutDisabled(props),isDisabled=useIsDimensionsDisabled(props),isSupported=function hasDimensionsSupport(props){if("web"!==platform.Z.OS)return!1;const{name:blockName}=props;return hasGapSupport(blockName)||hasMinHeightSupport(blockName)||hasPaddingSupport(blockName)||hasMarginSupport(blockName)||hasChildLayoutSupport(props)}(props),spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),paddingMouseOver=useVisualizerMouseOver(),marginMouseOver=useVisualizerMouseOver();if(isDisabled||!isSupported)return null;const defaultDimensionsControls=(0,blocks_build_module.Dx)(props.name,[DIMENSIONS_SUPPORT_KEY,"__experimentalDefaultControls"]),defaultSpacingControls=(0,blocks_build_module.Dx)(props.name,[SPACING_SUPPORT_KEY,"__experimentalDefaultControls"]),createResetAllFilter=(attribute,featureSet)=>newAttributes=>{var _newAttributes$style;return{...newAttributes,style:{...newAttributes.style,[featureSet]:{...null===(_newAttributes$style=newAttributes.style)||void 0===_newAttributes$style?void 0:_newAttributes$style[featureSet],[attribute]:void 0}}}},spacingClassnames=classnames_default()({"tools-panel-item-spacing":spacingSizes&&spacingSizes.length>0}),{__unstableParentLayout:parentLayout}=props;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(inspector_controls.Z,{__experimentalGroup:"dimensions",children:[!isPaddingDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasPaddingValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.padding)}(props),label:(0,build_module.__)("Padding"),onDeselect:()=>function resetPadding(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:(0,hooks_utils.QU)({...style,spacing:{...null==style?void 0:style.spacing,padding:void 0}})})}(props),resetAllFilter:createResetAllFilter("padding","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.padding,panelId:props.clientId,children:(0,jsx_runtime.jsx)(PaddingEdit,{onMouseOver:paddingMouseOver.onMouseOver,onMouseOut:paddingMouseOver.onMouseOut,...props})}),!isMarginDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasMarginValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.margin)}(props),label:(0,build_module.__)("Margin"),onDeselect:()=>function resetMargin(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:(0,hooks_utils.QU)({...style,spacing:{...null==style?void 0:style.spacing,margin:void 0}})})}(props),resetAllFilter:createResetAllFilter("margin","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.margin,panelId:props.clientId,children:(0,jsx_runtime.jsx)(MarginEdit,{onMouseOver:marginMouseOver.onMouseOver,onMouseOut:marginMouseOver.onMouseOut,...props})}),!isGapDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>hasGapValue(props),label:(0,build_module.__)("Block spacing"),onDeselect:()=>resetGap(props),resetAllFilter:createResetAllFilter("blockGap","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.blockGap,panelId:props.clientId,children:(0,jsx_runtime.jsx)(GapEdit,{...props})}),!isMinHeightDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{hasValue:()=>function hasMinHeightValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.dimensions)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.minHeight)}(props),label:(0,build_module.__)("Min. height"),onDeselect:()=>function resetMinHeight(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:(0,hooks_utils.QU)({...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:void 0}})})}(props),resetAllFilter:createResetAllFilter("minHeight","dimensions"),isShownByDefault:null==defaultDimensionsControls?void 0:defaultDimensionsControls.minHeight,panelId:props.clientId,children:(0,jsx_runtime.jsx)(MinHeightEdit,{...props})}),!isChildLayoutDisabled&&(0,jsx_runtime.jsx)(v_stack_component.Z,{as:tools_panel_item_component.Z,spacing:2,hasValue:()=>function hasChildLayoutValue(props){var _props$attributes$sty;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty?void 0:_props$attributes$sty.layout)}(props),label:childLayoutOrientation(parentLayout),onDeselect:()=>function resetChildLayout(_ref3){let{attributes:attributes={},setAttributes:setAttributes}=_ref3;const{style:style}=attributes;setAttributes({style:{...style,layout:void 0}})}(props),resetAllFilter:createResetAllFilter("selfStretch","layout"),isShownByDefault:!1,panelId:props.clientId,children:(0,jsx_runtime.jsx)(ChildLayoutEdit,{...props})})]}),!isPaddingDisabled&&(0,jsx_runtime.jsx)(PaddingVisualizer,{forceShow:paddingMouseOver.isMouseOver,...props}),!isMarginDisabled&&(0,jsx_runtime.jsx)(MarginVisualizer,{forceShow:marginMouseOver.isMouseOver,...props})]})}const useIsDimensionsDisabled=function(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const gapDisabled=useIsGapDisabled(props),minHeightDisabled=useIsMinHeightDisabled(props),paddingDisabled=useIsPaddingDisabled(props),marginDisabled=useIsMarginDisabled(props),childLayoutDisabled=useIsChildLayoutDisabled(props);return gapDisabled&&minHeightDisabled&&paddingDisabled&&marginDisabled&&childLayoutDisabled};function useCustomSides(blockName,feature){var _support$feature;const support=(0,blocks_build_module.Dx)(blockName,SPACING_SUPPORT_KEY);if(support&&"boolean"!=typeof support[feature])return Array.isArray(support[feature])?support[feature]:null!==(_support$feature=support[feature])&&void 0!==_support$feature&&_support$feature.sides?support[feature].sides:void 0}function useIsDimensionsSupportValid(blockName,feature){const sides=useCustomSides(blockName,feature);return!(sides&&sides.some((side=>dimensions_ALL_SIDES.includes(side)))&&sides.some((side=>AXIAL_SIDES.includes(side))))||(console.warn(`The ${feature} support for the "${blockName}" block can not be configured to support both axial and arbitrary sides.`),!1)}function hasGapSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.blockGap)}function hasGapValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.blockGap)}function getGapBoxControlValueFromStyle(blockGapValue){if(!blockGapValue)return null;const isValueString="string"==typeof blockGapValue;return{top:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.top,left:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.left}}function getGapCSSValue(blockGapValue){let defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const blockGapBoxControlValue=getGapBoxControlValueFromStyle(blockGapValue);if(!blockGapBoxControlValue)return null;const row=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.top)||defaultValue,column=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.left)||defaultValue;return row===column?row:`${row} ${column}`}function resetGap(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:{...style,spacing:{...null==style?void 0:style.spacing,blockGap:void 0}}})}function useIsGapDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.blockGap");return!hasGapSupport(blockName)||isDisabled}function GapEdit(props){var _style$spacing;const{clientId:clientId,attributes:{style:style},name:blockName,setAttributes:setAttributes}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"blockGap"),ref=(0,use_block_refs.tI)(clientId);if(useIsGapDisabled(props))return null;const splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side))),onChange=next=>{var _window;let blockGap=next;next&&splitOnAxis?blockGap={...getGapBoxControlValueFromStyle(next)}:null!=next&&next.hasOwnProperty("top")&&(blockGap=next.top);const newStyle={...style,spacing:{...null==style?void 0:style.spacing,blockGap:blockGap}};setAttributes({style:(0,hooks_utils.QU)(newStyle)});const isSafari=(null===(_window=window)||void 0===_window?void 0:_window.navigator.userAgent)&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome ")&&!window.navigator.userAgent.includes("Chromium ");var _ref$current$parentNo;ref.current&&isSafari&&(null===(_ref$current$parentNo=ref.current.parentNode)||void 0===_ref$current$parentNo||_ref$current$parentNo.replaceChild(ref.current,ref.current))},gapValue=getGapBoxControlValueFromStyle(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap),boxControlGapValue=splitOnAxis?{...gapValue,right:null==gapValue?void 0:gapValue.left,bottom:null==gapValue?void 0:gapValue.top}:{top:null==gapValue?void 0:gapValue.top};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(splitOnAxis?(0,jsx_runtime.jsx)(box_control.Z,{label:(0,build_module.__)("Block spacing"),min:0,onChange:onChange,units:units,sides:sides,values:boxControlGapValue,allowReset:!1,splitOnAxis:splitOnAxis}):(0,jsx_runtime.jsx)(unit_control.ZP,{label:(0,build_module.__)("Block spacing"),__unstableInputWidth:"80px",min:0,onChange:onChange,units:units,value:boxControlGapValue})),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:boxControlGapValue,onChange:onChange,label:(0,build_module.__)("Block spacing"),sides:splitOnAxis?sides:["top"],units:units,allowReset:!1,splitOnAxis:splitOnAxis})]}),native:null})}DimensionsPanel.__docgenInfo={description:"Inspector controls for dimensions support.\n\n@param {Object} props Block props.\n\n@return {WPElement} Inspector controls for dimensions and spacing support features.",methods:[],displayName:"DimensionsPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/dimensions.js"]={name:"DimensionsPanel",docgenInfo:DimensionsPanel.__docgenInfo,path:"packages/block-editor/src/hooks/dimensions.js"})},"./packages/block-editor/src/hooks/utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{QU:function(){return cleanEmptyObject},sF:function(){return shouldSkipSerialization}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/blocks/build-module/index.js");const cleanEmptyObject=object=>{if(null===object||"object"!=typeof object||Array.isArray(object))return object;const cleanedNestedObjects=Object.fromEntries(Object.entries((0,lodash__WEBPACK_IMPORTED_MODULE_0__.mapValues)(object,cleanEmptyObject)).filter((_ref=>{let[,value]=_ref;return Boolean(value)})));return(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isEmpty)(cleanedNestedObjects)?void 0:cleanedNestedObjects};function shouldSkipSerialization(blockType,featureSet,feature){const support=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.Dx)(blockType,featureSet),skipSerialization=null==support?void 0:support.__experimentalSkipSerialization;return Array.isArray(skipSerialization)?skipSerialization.includes(feature):skipSerialization}},"./packages/block-editor/src/store/constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{G:function(){return STORE_NAME}});const STORE_NAME="core/block-editor"},"./packages/block-editor/src/store/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h:function(){return store},i:function(){return storeConfig}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetActiveBlockIdByBlockNames:function(){return __experimentalGetActiveBlockIdByBlockNames},__experimentalGetAllowedBlocks:function(){return __experimentalGetAllowedBlocks},__experimentalGetAllowedPatterns:function(){return __experimentalGetAllowedPatterns},__experimentalGetBlockListSettingsForBlocks:function(){return __experimentalGetBlockListSettingsForBlocks},__experimentalGetDirectInsertBlock:function(){return __experimentalGetDirectInsertBlock},__experimentalGetGlobalBlocksByName:function(){return __experimentalGetGlobalBlocksByName},__experimentalGetLastBlockAttributeChanges:function(){return __experimentalGetLastBlockAttributeChanges},__experimentalGetParsedPattern:function(){return __experimentalGetParsedPattern},__experimentalGetPatternTransformItems:function(){return __experimentalGetPatternTransformItems},__experimentalGetPatternsByBlockTypes:function(){return __experimentalGetPatternsByBlockTypes},__experimentalGetReusableBlockTitle:function(){return __experimentalGetReusableBlockTitle},__experimentalIsBlockInterfaceHidden:function(){return __experimentalIsBlockInterfaceHidden},__unstableGetBlockWithoutInnerBlocks:function(){return __unstableGetBlockWithoutInnerBlocks},__unstableGetClientIdWithClientIdsTree:function(){return __unstableGetClientIdWithClientIdsTree},__unstableGetClientIdsTree:function(){return __unstableGetClientIdsTree},__unstableGetContentLockingParent:function(){return __unstableGetContentLockingParent},__unstableGetEditorMode:function(){return __unstableGetEditorMode},__unstableGetSelectedBlocksWithPartialSelection:function(){return __unstableGetSelectedBlocksWithPartialSelection},__unstableGetTemporarilyEditingAsBlocks:function(){return __unstableGetTemporarilyEditingAsBlocks},__unstableGetVisibleBlocks:function(){return __unstableGetVisibleBlocks},__unstableHasActiveBlockOverlayActive:function(){return __unstableHasActiveBlockOverlayActive},__unstableIsFullySelected:function(){return __unstableIsFullySelected},__unstableIsLastBlockChangeIgnored:function(){return __unstableIsLastBlockChangeIgnored},__unstableIsSelectionCollapsed:function(){return __unstableIsSelectionCollapsed},__unstableIsSelectionMergeable:function(){return __unstableIsSelectionMergeable},__unstableIsWithinBlockOverlay:function(){return __unstableIsWithinBlockOverlay},__unstableSelectionHasUnmergeableBlock:function(){return __unstableSelectionHasUnmergeableBlock},areInnerBlocksControlled:function(){return areInnerBlocksControlled},canEditBlock:function(){return canEditBlock},canInsertBlockType:function(){return canInsertBlockType},canInsertBlocks:function(){return canInsertBlocks},canLockBlockType:function(){return canLockBlockType},canMoveBlock:function(){return canMoveBlock},canMoveBlocks:function(){return canMoveBlocks},canRemoveBlock:function(){return canRemoveBlock},canRemoveBlocks:function(){return canRemoveBlocks},didAutomaticChange:function(){return didAutomaticChange},getAdjacentBlockClientId:function(){return getAdjacentBlockClientId},getAllowedBlocks:function(){return getAllowedBlocks},getBlock:function(){return getBlock},getBlockAttributes:function(){return getBlockAttributes},getBlockCount:function(){return getBlockCount},getBlockHierarchyRootClientId:function(){return getBlockHierarchyRootClientId},getBlockIndex:function(){return getBlockIndex},getBlockInsertionPoint:function(){return getBlockInsertionPoint},getBlockListSettings:function(){return getBlockListSettings},getBlockMode:function(){return getBlockMode},getBlockName:function(){return getBlockName},getBlockNamesByClientId:function(){return getBlockNamesByClientId},getBlockOrder:function(){return getBlockOrder},getBlockParents:function(){return getBlockParents},getBlockParentsByBlockName:function(){return getBlockParentsByBlockName},getBlockRootClientId:function(){return getBlockRootClientId},getBlockSelectionEnd:function(){return getBlockSelectionEnd},getBlockSelectionStart:function(){return getBlockSelectionStart},getBlockTransformItems:function(){return getBlockTransformItems},getBlocks:function(){return getBlocks},getBlocksByClientId:function(){return getBlocksByClientId},getClientIdsOfDescendants:function(){return getClientIdsOfDescendants},getClientIdsWithDescendants:function(){return getClientIdsWithDescendants},getDraggedBlockClientIds:function(){return getDraggedBlockClientIds},getFirstMultiSelectedBlockClientId:function(){return getFirstMultiSelectedBlockClientId},getGlobalBlockCount:function(){return getGlobalBlockCount},getInserterItems:function(){return getInserterItems},getLastInsertedBlocksClientIds:function(){return getLastInsertedBlocksClientIds},getLastMultiSelectedBlockClientId:function(){return getLastMultiSelectedBlockClientId},getLowestCommonAncestorWithSelectedBlock:function(){return getLowestCommonAncestorWithSelectedBlock},getMultiSelectedBlockClientIds:function(){return getMultiSelectedBlockClientIds},getMultiSelectedBlocks:function(){return getMultiSelectedBlocks},getMultiSelectedBlocksEndClientId:function(){return getMultiSelectedBlocksEndClientId},getMultiSelectedBlocksStartClientId:function(){return getMultiSelectedBlocksStartClientId},getNextBlockClientId:function(){return getNextBlockClientId},getPatternsByBlockTypes:function(){return getPatternsByBlockTypes},getPreviousBlockClientId:function(){return getPreviousBlockClientId},getSelectedBlock:function(){return getSelectedBlock},getSelectedBlockClientId:function(){return getSelectedBlockClientId},getSelectedBlockClientIds:function(){return getSelectedBlockClientIds},getSelectedBlockCount:function(){return getSelectedBlockCount},getSelectedBlocksInitialCaretPosition:function(){return getSelectedBlocksInitialCaretPosition},getSelectionEnd:function(){return getSelectionEnd},getSelectionStart:function(){return getSelectionStart},getSettings:function(){return getSettings},getTemplate:function(){return getTemplate},getTemplateLock:function(){return getTemplateLock},hasBlockMovingClientId:function(){return selectors_hasBlockMovingClientId},hasInserterItems:function(){return hasInserterItems},hasMultiSelection:function(){return hasMultiSelection},hasSelectedBlock:function(){return hasSelectedBlock},hasSelectedInnerBlock:function(){return hasSelectedInnerBlock},isAncestorBeingDragged:function(){return isAncestorBeingDragged},isAncestorMultiSelected:function(){return isAncestorMultiSelected},isBlockBeingDragged:function(){return isBlockBeingDragged},isBlockHighlighted:function(){return isBlockHighlighted},isBlockInsertionPointVisible:function(){return isBlockInsertionPointVisible},isBlockMultiSelected:function(){return isBlockMultiSelected},isBlockSelected:function(){return isBlockSelected},isBlockValid:function(){return isBlockValid},isBlockVisible:function(){return isBlockVisible},isBlockWithinSelection:function(){return isBlockWithinSelection},isCaretWithinFormattedText:function(){return isCaretWithinFormattedText},isDraggingBlocks:function(){return isDraggingBlocks},isFirstMultiSelectedBlock:function(){return isFirstMultiSelectedBlock},isLastBlockChangePersistent:function(){return isLastBlockChangePersistent},isMultiSelecting:function(){return selectors_isMultiSelecting},isNavigationMode:function(){return isNavigationMode},isSelectionEnabled:function(){return selectors_isSelectionEnabled},isTyping:function(){return selectors_isTyping},isValidTemplate:function(){return isValidTemplate},wasBlockJustInserted:function(){return wasBlockJustInserted}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalHideBlockInterface:function(){return __experimentalHideBlockInterface},__experimentalShowBlockInterface:function(){return __experimentalShowBlockInterface},__experimentalUpdateSettings:function(){return __experimentalUpdateSettings},__unstableDeleteSelection:function(){return __unstableDeleteSelection},__unstableExpandSelection:function(){return __unstableExpandSelection},__unstableMarkAutomaticChange:function(){return __unstableMarkAutomaticChange},__unstableMarkLastChangeAsPersistent:function(){return __unstableMarkLastChangeAsPersistent},__unstableMarkNextChangeAsNotPersistent:function(){return __unstableMarkNextChangeAsNotPersistent},__unstableSaveReusableBlock:function(){return __unstableSaveReusableBlock},__unstableSetEditorMode:function(){return __unstableSetEditorMode},__unstableSetTemporarilyEditingAsBlocks:function(){return __unstableSetTemporarilyEditingAsBlocks},__unstableSplitSelection:function(){return __unstableSplitSelection},clearSelectedBlock:function(){return clearSelectedBlock},duplicateBlocks:function(){return duplicateBlocks},enterFormattedText:function(){return enterFormattedText},exitFormattedText:function(){return exitFormattedText},flashBlock:function(){return flashBlock},hideInsertionPoint:function(){return hideInsertionPoint},insertAfterBlock:function(){return insertAfterBlock},insertBeforeBlock:function(){return insertBeforeBlock},insertBlock:function(){return insertBlock},insertBlocks:function(){return insertBlocks},insertDefaultBlock:function(){return insertDefaultBlock},mergeBlocks:function(){return mergeBlocks},moveBlockToPosition:function(){return moveBlockToPosition},moveBlocksDown:function(){return moveBlocksDown},moveBlocksToPosition:function(){return moveBlocksToPosition},moveBlocksUp:function(){return moveBlocksUp},multiSelect:function(){return multiSelect},receiveBlocks:function(){return receiveBlocks},removeBlock:function(){return removeBlock},removeBlocks:function(){return removeBlocks},replaceBlock:function(){return replaceBlock},replaceBlocks:function(){return replaceBlocks},replaceInnerBlocks:function(){return replaceInnerBlocks},resetBlocks:function(){return resetBlocks},resetSelection:function(){return resetSelection},selectBlock:function(){return selectBlock},selectNextBlock:function(){return selectNextBlock},selectPreviousBlock:function(){return selectPreviousBlock},selectionChange:function(){return selectionChange},setBlockMovingClientId:function(){return setBlockMovingClientId},setBlockVisibility:function(){return setBlockVisibility},setHasControlledInnerBlocks:function(){return setHasControlledInnerBlocks},setNavigationMode:function(){return setNavigationMode},setTemplateValidity:function(){return setTemplateValidity},showInsertionPoint:function(){return showInsertionPoint},startDraggingBlocks:function(){return startDraggingBlocks},startMultiSelect:function(){return startMultiSelect},startTyping:function(){return startTyping},stopDraggingBlocks:function(){return stopDraggingBlocks},stopMultiSelect:function(){return stopMultiSelect},stopTyping:function(){return stopTyping},synchronizeTemplate:function(){return synchronizeTemplate},toggleBlockHighlight:function(){return toggleBlockHighlight},toggleBlockMode:function(){return toggleBlockMode},toggleSelection:function(){return toggleSelection},updateBlock:function(){return updateBlock},updateBlockAttributes:function(){return updateBlockAttributes},updateBlockListSettings:function(){return updateBlockListSettings},updateSettings:function(){return updateSettings},validateBlocksToTemplate:function(){return validateBlocksToTemplate}});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");const PREFERENCES_DEFAULTS={insertUsage:{}},SETTINGS_DEFAULTS={alignWide:!1,supportsLayout:!0,colors:[{name:(0,i18n_build_module.__)("Black"),slug:"black",color:"#000000"},{name:(0,i18n_build_module.__)("Cyan bluish gray"),slug:"cyan-bluish-gray",color:"#abb8c3"},{name:(0,i18n_build_module.__)("White"),slug:"white",color:"#ffffff"},{name:(0,i18n_build_module.__)("Pale pink"),slug:"pale-pink",color:"#f78da7"},{name:(0,i18n_build_module.__)("Vivid red"),slug:"vivid-red",color:"#cf2e2e"},{name:(0,i18n_build_module.__)("Luminous vivid orange"),slug:"luminous-vivid-orange",color:"#ff6900"},{name:(0,i18n_build_module.__)("Luminous vivid amber"),slug:"luminous-vivid-amber",color:"#fcb900"},{name:(0,i18n_build_module.__)("Light green cyan"),slug:"light-green-cyan",color:"#7bdcb5"},{name:(0,i18n_build_module.__)("Vivid green cyan"),slug:"vivid-green-cyan",color:"#00d084"},{name:(0,i18n_build_module.__)("Pale cyan blue"),slug:"pale-cyan-blue",color:"#8ed1fc"},{name:(0,i18n_build_module.__)("Vivid cyan blue"),slug:"vivid-cyan-blue",color:"#0693e3"},{name:(0,i18n_build_module.__)("Vivid purple"),slug:"vivid-purple",color:"#9b51e0"}],fontSizes:[{name:(0,i18n_build_module._x)("Small","font size name"),size:13,slug:"small"},{name:(0,i18n_build_module._x)("Normal","font size name"),size:16,slug:"normal"},{name:(0,i18n_build_module._x)("Medium","font size name"),size:20,slug:"medium"},{name:(0,i18n_build_module._x)("Large","font size name"),size:36,slug:"large"},{name:(0,i18n_build_module._x)("Huge","font size name"),size:42,slug:"huge"}],imageDefaultSize:"large",imageSizes:[{slug:"thumbnail",name:(0,i18n_build_module.__)("Thumbnail")},{slug:"medium",name:(0,i18n_build_module.__)("Medium")},{slug:"large",name:(0,i18n_build_module.__)("Large")},{slug:"full",name:(0,i18n_build_module.__)("Full Size")}],imageEditing:!0,maxWidth:580,allowedBlockTypes:!0,maxUploadFileSize:0,allowedMimeTypes:null,canLockBlocks:!0,enableOpenverseMediaCategory:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalClearBlockSelection:!0,__experimentalBlockDirectory:!1,__mobileEnablePageTemplates:!1,__experimentalBlockPatterns:[],__experimentalBlockPatternCategories:[],__unstableGalleryWithImageBlocks:!1,__unstableIsPreviewMode:!1,generateAnchors:!1,gradients:[{name:(0,i18n_build_module.__)("Vivid cyan blue to vivid purple"),gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:(0,i18n_build_module.__)("Light green cyan to vivid green cyan"),gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:(0,i18n_build_module.__)("Luminous vivid amber to luminous vivid orange"),gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"},{name:(0,i18n_build_module.__)("Luminous vivid orange to vivid red"),gradient:"linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)",slug:"luminous-vivid-orange-to-vivid-red"},{name:(0,i18n_build_module.__)("Very light gray to cyan bluish gray"),gradient:"linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)",slug:"very-light-gray-to-cyan-bluish-gray"},{name:(0,i18n_build_module.__)("Cool to warm spectrum"),gradient:"linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)",slug:"cool-to-warm-spectrum"},{name:(0,i18n_build_module.__)("Blush light purple"),gradient:"linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)",slug:"blush-light-purple"},{name:(0,i18n_build_module.__)("Blush bordeaux"),gradient:"linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)",slug:"blush-bordeaux"},{name:(0,i18n_build_module.__)("Luminous dusk"),gradient:"linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)",slug:"luminous-dusk"},{name:(0,i18n_build_module.__)("Pale ocean"),gradient:"linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)",slug:"pale-ocean"},{name:(0,i18n_build_module.__)("Electric grass"),gradient:"linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)",slug:"electric-grass"},{name:(0,i18n_build_module.__)("Midnight"),gradient:"linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)",slug:"midnight"}],__unstableResolvedAssets:{styles:[],scripts:[]}};function insertAt(array,elements,index){return[...array.slice(0,index),...Array.isArray(elements)?elements:[elements],...array.slice(index)]}function moveTo(array,from,to){let count=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const withoutMovedElements=[...array];return withoutMovedElements.splice(from,count),insertAt(withoutMovedElements,array.slice(from,from+count),to)}const identity=x=>x;function mapBlockOrder(blocks){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const result=new Map,current=[];return result.set(rootClientId,current),blocks.forEach((block=>{const{clientId:clientId,innerBlocks:innerBlocks}=block;current.push(clientId),mapBlockOrder(innerBlocks,clientId).forEach(((order,subClientId)=>{result.set(subClientId,order)}))})),result}function mapBlockParents(blocks){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const result=[],stack=[[rootClientId,blocks]];for(;stack.length;){const[parent,currentBlocks]=stack.shift();currentBlocks.forEach((_ref=>{let{innerBlocks:innerBlocks,...block}=_ref;result.push([block.clientId,parent]),null!=innerBlocks&&innerBlocks.length&&stack.push([block.clientId,innerBlocks])}))}return result}function flattenBlocks(blocks){let transform=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity;const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push([block.clientId,transform(block)])}return result}function getFlattenedClientIds(blocks){const result={},stack=[...blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result[block.clientId]=!0}return result}function getFlattenedBlocksWithoutAttributes(blocks){return flattenBlocks(blocks,(block=>{const{attributes:attributes,...restBlock}=block;return restBlock}))}function getFlattenedBlockAttributes(blocks){return flattenBlocks(blocks,(block=>block.attributes))}function isUpdatingSameBlockAttribute(action,lastAction){return"UPDATE_BLOCK_ATTRIBUTES"===action.type&&void 0!==lastAction&&"UPDATE_BLOCK_ATTRIBUTES"===lastAction.type&&es6_default()(action.clientIds,lastAction.clientIds)&&function hasSameKeys(a,b){return es6_default()(Object.keys(a),Object.keys(b))}(action.attributes,lastAction.attributes)}function updateBlockTreeForBlocks(state,blocks){const treeToUpdate=state.tree,stack=[...blocks],flattenedBlocks=[...blocks];for(;stack.length;){const block=stack.shift();stack.push(...block.innerBlocks),flattenedBlocks.push(...block.innerBlocks)}for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,{});for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,Object.assign(treeToUpdate.get(block.clientId),{...state.byClientId.get(block.clientId),attributes:state.attributes.get(block.clientId),innerBlocks:block.innerBlocks.map((subBlock=>treeToUpdate.get(subBlock.clientId)))}))}function updateParentInnerBlocksInTree(state,updatedClientIds){let updateChildrenOfUpdatedClientIds=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const treeToUpdate=state.tree,uncontrolledParents=new Set([]),controlledParents=new Set;for(const clientId of updatedClientIds){let current=updateChildrenOfUpdatedClientIds?clientId:state.parents.get(clientId);do{if(state.controlledInnerBlocks[current]){controlledParents.add(current);break}uncontrolledParents.add(current),current=state.parents.get(current)}while(void 0!==current)}for(const clientId of uncontrolledParents)treeToUpdate.set(clientId,{...treeToUpdate.get(clientId)});for(const clientId of uncontrolledParents)treeToUpdate.get(clientId).innerBlocks=(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)));for(const clientId of controlledParents)treeToUpdate.set("controlled||"+clientId,{innerBlocks:(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)))})}const blocks=(0,pipe.Z)(build_module.UY,(reducer=>(state,action)=>{if(state&&"SAVE_REUSABLE_BLOCK_SUCCESS"===action.type){const{id:id,updatedId:updatedId}=action;if(id===updatedId)return state;(state={...state}).attributes=new Map(state.attributes),state.attributes.forEach(((attributes,clientId)=>{const{name:name}=state.byClientId.get(clientId);"core/block"===name&&attributes.ref===id&&state.attributes.set(clientId,{...attributes,ref:updatedId})}))}return reducer(state,action)}),(reducer=>function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;const newState=reducer(state,action);if(newState===state)return state;switch(newState.tree=state.tree?state.tree:new Map,action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":newState.tree=new Map(newState.tree),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.rootClientId?[action.rootClientId]:[""],!0);break;case"UPDATE_BLOCK":newState.tree=new Map(newState.tree),newState.tree.set(action.clientId,{...newState.tree.get(action.clientId),...newState.byClientId.get(action.clientId),attributes:newState.attributes.get(action.clientId)}),updateParentInnerBlocksInTree(newState,[action.clientId],!1);break;case"UPDATE_BLOCK_ATTRIBUTES":newState.tree=new Map(newState.tree),action.clientIds.forEach((clientId=>{newState.tree.set(clientId,{...newState.tree.get(clientId),attributes:newState.attributes.get(clientId)})})),updateParentInnerBlocksInTree(newState,action.clientIds,!1);break;case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const inserterClientIds=getFlattenedClientIds(action.blocks);newState.tree=new Map(newState.tree),action.replacedClientIds.concat(action.replacedClientIds.filter((clientId=>!inserterClientIds[clientId])).map((clientId=>"controlled||"+clientId))).forEach((key=>{newState.tree.delete(key)})),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.blocks.map((b=>b.clientId)),!1);const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds)void 0===state.parents.get(clientId)||""!==state.parents.get(clientId)&&!newState.byClientId.get(state.parents.get(clientId))||parentsOfRemovedBlocks.push(state.parents.get(clientId));updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds)void 0===state.parents.get(clientId)||""!==state.parents.get(clientId)&&!newState.byClientId.get(state.parents.get(clientId))||parentsOfRemovedBlocks.push(state.parents.get(clientId));newState.tree=new Map(newState.tree),action.removedClientIds.concat(action.removedClientIds.map((clientId=>"controlled||"+clientId))).forEach((key=>{newState.tree.delete(key)})),updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break;case"MOVE_BLOCKS_TO_POSITION":{const updatedBlockUids=[];action.fromRootClientId?updatedBlockUids.push(action.fromRootClientId):updatedBlockUids.push(""),action.toRootClientId&&updatedBlockUids.push(action.toRootClientId),newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"MOVE_BLOCKS_UP":case"MOVE_BLOCKS_DOWN":{const updatedBlockUids=[action.rootClientId?action.rootClientId:""];newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"SAVE_REUSABLE_BLOCK_SUCCESS":{const updatedBlockUids=[];newState.attributes.forEach(((attributes,clientId)=>{"core/block"===newState.byClientId.get(clientId).name&&attributes.ref===action.updatedId&&updatedBlockUids.push(clientId)})),newState.tree=new Map(newState.tree),updatedBlockUids.forEach((clientId=>{newState.tree.set(clientId,{...newState.byClientId.get(clientId),attributes:newState.attributes.get(clientId),innerBlocks:newState.tree.get(clientId).innerBlocks})})),updateParentInnerBlocksInTree(newState,updatedBlockUids,!1)}}return newState}),(reducer=>(state,action)=>{const getAllChildren=clientIds=>{let result=clientIds;for(let i=0;i<result.length;i++)!state.order.get(result[i])||action.keepControlledInnerBlocks&&action.keepControlledInnerBlocks[result[i]]||(result===clientIds&&(result=[...result]),result.push(...state.order.get(result[i])));return result};if(state)switch(action.type){case"REMOVE_BLOCKS":action={...action,type:"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN",removedClientIds:getAllChildren(action.clientIds)};break;case"REPLACE_BLOCKS":action={...action,type:"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN",replacedClientIds:getAllChildren(action.clientIds)}}return reducer(state,action)}),(reducer=>(state,action)=>{if("REPLACE_INNER_BLOCKS"!==action.type)return reducer(state,action);const nestedControllers={};if(Object.keys(state.controlledInnerBlocks).length){const stack=[...action.blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),state.controlledInnerBlocks[block.clientId]&&(nestedControllers[block.clientId]=!0)}}let stateAfterBlocksRemoval=state;state.order.get(action.rootClientId)&&(stateAfterBlocksRemoval=reducer(stateAfterBlocksRemoval,{type:"REMOVE_BLOCKS",keepControlledInnerBlocks:nestedControllers,clientIds:state.order.get(action.rootClientId)}));let stateAfterInsert=stateAfterBlocksRemoval;if(action.blocks.length){stateAfterInsert=reducer(stateAfterInsert,{...action,type:"INSERT_BLOCKS",index:0});const stateAfterInsertOrder=new Map(stateAfterInsert.order);Object.keys(nestedControllers).forEach((key=>{state.order.get(key)&&stateAfterInsertOrder.set(key,state.order.get(key))})),stateAfterInsert.order=stateAfterInsertOrder,stateAfterInsert.tree=new Map(stateAfterInsert.tree),Object.keys(nestedControllers).forEach((_key=>{const key=`controlled||${_key}`;state.tree.has(key)&&stateAfterInsert.tree.set(key,state.tree.get(key))}))}return stateAfterInsert}),(reducer=>(state,action)=>{if("RESET_BLOCKS"===action.type){const newState={...state,byClientId:new Map(getFlattenedBlocksWithoutAttributes(action.blocks)),attributes:new Map(getFlattenedBlockAttributes(action.blocks)),order:mapBlockOrder(action.blocks),parents:new Map(mapBlockParents(action.blocks)),controlledInnerBlocks:{}};return newState.tree=new Map(null==state?void 0:state.tree),updateBlockTreeForBlocks(newState,action.blocks),newState.tree.set("",{innerBlocks:action.blocks.map((subBlock=>newState.tree.get(subBlock.clientId)))}),newState}return reducer(state,action)}),(function withPersistentBlockChange(reducer){let lastAction,markNextChangeAsNotPersistent=!1;return(state,action)=>{let nextState=reducer(state,action);const isExplicitPersistentChange="MARK_LAST_CHANGE_AS_PERSISTENT"===action.type||markNextChangeAsNotPersistent;if(state===nextState&&!isExplicitPersistentChange){var _state$isPersistentCh;markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type;const nextIsPersistentChange=null===(_state$isPersistentCh=null==state?void 0:state.isPersistentChange)||void 0===_state$isPersistentCh||_state$isPersistentCh;return state.isPersistentChange===nextIsPersistentChange?state:{...nextState,isPersistentChange:nextIsPersistentChange}}return nextState={...nextState,isPersistentChange:isExplicitPersistentChange?!markNextChangeAsNotPersistent:!isUpdatingSameBlockAttribute(action,lastAction)},lastAction=action,markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextState}}),(function withIgnoredBlockChange(reducer){const IGNORED_ACTION_TYPES=new Set(["RECEIVE_BLOCKS"]);return(state,action)=>{const nextState=reducer(state,action);return nextState!==state&&(nextState.isIgnoredChange=IGNORED_ACTION_TYPES.has(action.type)),nextState}}),(reducer=>(state,action)=>{if("SET_HAS_CONTROLLED_INNER_BLOCKS"===action.type){const tempState=reducer(state,{type:"REPLACE_INNER_BLOCKS",rootClientId:action.clientId,blocks:[]});return reducer(tempState,action)}return reducer(state,action)}))({byClientId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlocksWithoutAttributes(action.blocks).forEach((_ref2=>{let[key,value]=_ref2;newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.has(action.clientId))return state;const{attributes:attributes,...changes}=action.updates;if(0===Object.values(changes).length)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...changes}),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlocksWithoutAttributes(action.blocks).forEach((_ref3=>{let[key,value]=_ref3;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},attributes(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlockAttributes(action.blocks).forEach((_ref4=>{let[key,value]=_ref4;newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.get(action.clientId)||!action.updates.attributes)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...action.updates.attributes}),newState}case"UPDATE_BLOCK_ATTRIBUTES":{if(action.clientIds.every((id=>!state.get(id))))return state;let hasChange=!1;const newState=new Map(state);for(const clientId of action.clientIds){var _action$attributes;const updatedAttributeEntries=Object.entries(action.uniqueByBlock?action.attributes[clientId]:null!==(_action$attributes=action.attributes)&&void 0!==_action$attributes?_action$attributes:{});if(0===updatedAttributeEntries.length)continue;let hasUpdatedAttributes=!1;const existingAttributes=state.get(clientId),newAttributes={};updatedAttributeEntries.forEach((_ref5=>{let[key,value]=_ref5;existingAttributes[key]!==value&&(hasUpdatedAttributes=!0,newAttributes[key]=value)})),hasChange=hasChange||hasUpdatedAttributes,hasUpdatedAttributes&&newState.set(clientId,{...existingAttributes,...newAttributes})}return hasChange?newState:state}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlockAttributes(action.blocks).forEach((_ref6=>{let[key,value]=_ref6;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},order(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":{var _state$get;const blockOrder=mapBlockOrder(action.blocks),newState=new Map(state);return blockOrder.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.set("",(null!==(_state$get=state.get(""))&&void 0!==_state$get?_state$get:[]).concat(blockOrder[""])),newState}case"INSERT_BLOCKS":{const{rootClientId:rootClientId=""}=action,subState=state.get(rootClientId)||[],mappedBlocks=mapBlockOrder(action.blocks,rootClientId),{index:index=subState.length}=action,newState=new Map(state);return mappedBlocks.forEach(((order,clientId)=>{newState.set(clientId,order)})),newState.set(rootClientId,insertAt(subState,mappedBlocks.get(rootClientId),index)),newState}case"MOVE_BLOCKS_TO_POSITION":{var _state$get$filter,_state$get2;const{fromRootClientId:fromRootClientId="",toRootClientId:toRootClientId="",clientIds:clientIds}=action,{index:index=state.get(toRootClientId).length}=action;if(fromRootClientId===toRootClientId){const fromIndex=state.get(toRootClientId).indexOf(clientIds[0]),newState=new Map(state);return newState.set(toRootClientId,moveTo(state.get(toRootClientId),fromIndex,index,clientIds.length)),newState}const newState=new Map(state);return newState.set(fromRootClientId,null!==(_state$get$filter=null===(_state$get2=state.get(fromRootClientId))||void 0===_state$get2?void 0:_state$get2.filter((id=>!clientIds.includes(id))))&&void 0!==_state$get$filter?_state$get$filter:[]),newState.set(toRootClientId,insertAt(state.get(toRootClientId),clientIds,index)),newState}case"MOVE_BLOCKS_UP":{const{clientIds:clientIds,rootClientId:rootClientId=""}=action,firstClientId=clientIds[0],subState=state.get(rootClientId);if(!subState.length||firstClientId===subState[0])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex-1,clientIds.length)),newState}case"MOVE_BLOCKS_DOWN":{const{clientIds:clientIds,rootClientId:rootClientId=""}=action,firstClientId=clientIds[0],lastClientId=clientIds[clientIds.length-1],subState=state.get(rootClientId);if(!subState.length||lastClientId===subState[subState.length-1])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex+1,clientIds.length)),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const{clientIds:clientIds}=action;if(!action.blocks)return state;const mappedBlocks=mapBlockOrder(action.blocks),newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mappedBlocks.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.forEach(((order,clientId)=>{const newSubOrder=Object.values(order).reduce(((result,subClientId)=>subClientId===clientIds[0]?[...result,...mappedBlocks.get("")]:(-1===clientIds.indexOf(subClientId)&&result.push(subClientId),result)),[]);newState.set(clientId,newSubOrder)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState.forEach(((order,clientId)=>{var _order$filter;const newSubOrder=null!==(_order$filter=null==order?void 0:order.filter((id=>!action.removedClientIds.includes(id))))&&void 0!==_order$filter?_order$filter:[];newSubOrder.length!==order.length&&newState.set(clientId,newSubOrder)})),newState}}return state},parents(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks).forEach((_ref7=>{let[key,value]=_ref7;newState.set(key,value)})),newState}case"INSERT_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks,action.rootClientId||"").forEach((_ref8=>{let[key,value]=_ref8;newState.set(key,value)})),newState}case"MOVE_BLOCKS_TO_POSITION":{const newState=new Map(state);return action.clientIds.forEach((id=>{newState.set(id,action.toRootClientId||"")})),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mapBlockParents(action.blocks,state.get(action.clientIds[0])).forEach((_ref9=>{let[key,value]=_ref9;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},controlledInnerBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:type,clientId:clientId,hasControlledInnerBlocks:hasControlledInnerBlocks}=arguments.length>1?arguments[1]:void 0;return"SET_HAS_CONTROLLED_INNER_BLOCKS"===type?{...state,[clientId]:hasControlledInnerBlocks}:state}});function selectionHelper(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"CLEAR_SELECTED_BLOCK":return state.clientId?{}:state;case"SELECT_BLOCK":return action.clientId===state.clientId?state:{clientId:action.clientId};case"REPLACE_INNER_BLOCKS":case"INSERT_BLOCKS":return action.updateSelection&&action.blocks.length?{clientId:action.blocks[0].clientId}:state;case"REMOVE_BLOCKS":return action.clientIds&&action.clientIds.length&&-1!==action.clientIds.indexOf(state.clientId)?{}:state;case"REPLACE_BLOCKS":{if(-1===action.clientIds.indexOf(state.clientId))return state;const blockToSelect=action.blocks[action.indexToSelect]||action.blocks[action.blocks.length-1];return blockToSelect?blockToSelect.clientId===state.clientId?state:{clientId:blockToSelect.clientId}:{}}}return state}var reducer=(0,build_module.UY)({blocks:blocks,isTyping:function isTyping(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_TYPING":return!0;case"STOP_TYPING":return!1}return state},isBlockInterfaceHidden:function isBlockInterfaceHidden(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"HIDE_BLOCK_INTERFACE":return!0;case"SHOW_BLOCK_INTERFACE":return!1}return state},draggedBlocks:function draggedBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_DRAGGING_BLOCKS":return action.clientIds;case"STOP_DRAGGING_BLOCKS":return[]}return state},selection:function selection(){var _state$selectionStart,_state$selectionEnd,_state$selectionStart2,_state$selectionEnd2;let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SELECTION_CHANGE":return action.clientId?{selectionStart:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.startOffset},selectionEnd:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.endOffset}}:{selectionStart:action.start||state.selectionStart,selectionEnd:action.end||state.selectionEnd};case"RESET_SELECTION":const{selectionStart:selectionStart,selectionEnd:selectionEnd}=action;return{selectionStart:selectionStart,selectionEnd:selectionEnd};case"MULTI_SELECT":const{start:start,end:end}=action;return start===(null===(_state$selectionStart=state.selectionStart)||void 0===_state$selectionStart?void 0:_state$selectionStart.clientId)&&end===(null===(_state$selectionEnd=state.selectionEnd)||void 0===_state$selectionEnd?void 0:_state$selectionEnd.clientId)?state:{selectionStart:{clientId:start},selectionEnd:{clientId:end}};case"RESET_BLOCKS":const startClientId=null==state||null===(_state$selectionStart2=state.selectionStart)||void 0===_state$selectionStart2?void 0:_state$selectionStart2.clientId,endClientId=null==state||null===(_state$selectionEnd2=state.selectionEnd)||void 0===_state$selectionEnd2?void 0:_state$selectionEnd2.clientId;if(!startClientId&&!endClientId)return state;if(!action.blocks.some((block=>block.clientId===startClientId)))return{selectionStart:{},selectionEnd:{}};if(!action.blocks.some((block=>block.clientId===endClientId)))return{...state,selectionEnd:state.selectionStart}}return{selectionStart:selectionHelper(state.selectionStart,action),selectionEnd:selectionHelper(state.selectionEnd,action)}},isMultiSelecting:function isMultiSelecting(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_MULTI_SELECT":return!0;case"STOP_MULTI_SELECT":return!1}return state},isSelectionEnabled:function isSelectionEnabled(){let state=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],action=arguments.length>1?arguments[1]:void 0;return"TOGGLE_SELECTION"===action.type?action.isSelectionEnabled:state},initialPosition:function initialPosition(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;return"REPLACE_BLOCKS"===action.type&&void 0!==action.initialPosition||["MULTI_SELECT","SELECT_BLOCK","RESET_SELECTION","INSERT_BLOCKS","REPLACE_INNER_BLOCKS"].includes(action.type)?action.initialPosition:state},blocksMode:function blocksMode(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;if("TOGGLE_BLOCK_MODE"===action.type){const{clientId:clientId}=action;return{...state,[clientId]:state[clientId]&&"html"===state[clientId]?"visual":"html"}}return state},blockListSettings:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"REPLACE_BLOCKS":case"REMOVE_BLOCKS":return Object.fromEntries(Object.entries(state).filter((_ref10=>{let[id]=_ref10;return!action.clientIds.includes(id)})));case"UPDATE_BLOCK_LIST_SETTINGS":{const{clientId:clientId}=action;if(!action.settings){if(state.hasOwnProperty(clientId)){const{[clientId]:removedBlock,...restBlocks}=state;return restBlocks}return state}return es6_default()(state[clientId],action.settings)?state:{...state,[clientId]:action.settings}}}return state},insertionPoint:function insertionPoint(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SHOW_INSERTION_POINT":{const{rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation}=action,nextState={rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation};return es6_default()(state,nextState)?state:nextState}case"HIDE_INSERTION_POINT":return null}return state},template:function template(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isValid:!0},action=arguments.length>1?arguments[1]:void 0;return"SET_TEMPLATE_VALIDITY"===action.type?{...state,isValid:action.isValid}:state},settings:function settings(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SETTINGS_DEFAULTS,action=arguments.length>1?arguments[1]:void 0;return"UPDATE_SETTINGS"===action.type?{...state,...action.settings}:state},preferences:function preferences(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PREFERENCES_DEFAULTS,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":return action.blocks.reduce(((prevState,block)=>{const{attributes:attributes,name:blockName}=block,match=(0,build_module.Ys)(blocks_build_module.h).getActiveBlockVariation(blockName,attributes);let id=null!=match&&match.name?`${blockName}/${match.name}`:blockName;const insert={name:id};return"core/block"===blockName&&(insert.ref=attributes.ref,id+="/"+attributes.ref),{...prevState,insertUsage:{...prevState.insertUsage,[id]:{time:action.time,count:prevState.insertUsage[id]?prevState.insertUsage[id].count+1:1,insert:insert}}}}),state)}return state},lastBlockAttributesChange:function lastBlockAttributesChange(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"UPDATE_BLOCK":if(!action.updates.attributes)break;return{[action.clientId]:action.updates.attributes};case"UPDATE_BLOCK_ATTRIBUTES":return action.clientIds.reduce(((accumulator,id)=>({...accumulator,[id]:action.uniqueByBlock?action.attributes[id]:action.attributes})),{})}return state},editorMode:function editorMode(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"edit",action=arguments.length>1?arguments[1]:void 0;return"INSERT_BLOCKS"===action.type&&"navigation"===state?"edit":"SET_EDITOR_MODE"===action.type?action.mode:state},hasBlockMovingClientId:function hasBlockMovingClientId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;return"SET_BLOCK_MOVING_MODE"===action.type?action.hasBlockMovingClientId:"SET_EDITOR_MODE"===action.type?null:state},automaticChangeStatus:function automaticChangeStatus(state,action){switch(action.type){case"MARK_AUTOMATIC_CHANGE":return"pending";case"MARK_AUTOMATIC_CHANGE_FINAL":return"pending"===state?"final":void 0;case"SELECTION_CHANGE":return"final"!==state?state:void 0;case"SET_BLOCK_VISIBILITY":case"START_TYPING":case"STOP_TYPING":case"UPDATE_BLOCK_LIST_SETTINGS":return state}},highlightedBlock:function highlightedBlock(state,action){switch(action.type){case"TOGGLE_BLOCK_HIGHLIGHT":const{clientId:clientId,isHighlighted:isHighlighted}=action;return isHighlighted?clientId:state===clientId?null:state;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},lastBlockInserted:function lastBlockInserted(){var _action$meta;let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":case"REPLACE_INNER_BLOCKS":if(!action.blocks.length)return state;return{clientIds:action.blocks.map((block=>block.clientId)),source:null===(_action$meta=action.meta)||void 0===_action$meta?void 0:_action$meta.source};case"RESET_BLOCKS":return{}}return state},temporarilyEditingAsBlocks:function temporarilyEditingAsBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",action=arguments.length>1?arguments[1]:void 0;return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.temporarilyEditingAsBlocks:state},blockVisibility:function blockVisibility(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"SET_BLOCK_VISIBILITY"===action.type?{...state,...action.updates}:state}}),rememo=__webpack_require__("./node_modules/rememo/es/rememo.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js"),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");function mapRichTextSettings(attributeDefinition){const{multiline:multilineTag,__unstableMultilineWrapperTags:multilineWrapperTags,__unstablePreserveWhiteSpace:preserveWhiteSpace}=attributeDefinition;return{multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,preserveWhiteSpace:preserveWhiteSpace}}var sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js");const EMPTY_ARRAY=[];function getBlockName(state,clientId){const block=state.blocks.byClientId.get(clientId);if("web"!==platform.Z.OS&&"core/social-link"===(null==block?void 0:block.name)){const attributes=state.blocks.attributes.get(clientId),{service:service}=null!=attributes?attributes:{};return service?`core/social-link-${service}`:"core/social-link"}return block?block.name:null}function isBlockValid(state,clientId){const block=state.blocks.byClientId.get(clientId);return!!block&&block.isValid}function getBlockAttributes(state,clientId){return state.blocks.byClientId.get(clientId)?state.blocks.attributes.get(clientId):null}function getBlock(state,clientId){return state.blocks.byClientId.has(clientId)?state.blocks.tree.get(clientId):null}const __unstableGetBlockWithoutInnerBlocks=(0,rememo.Z)(((state,clientId)=>state.blocks.byClientId.has(clientId)?{...state.blocks.byClientId.get(clientId),attributes:getBlockAttributes(state,clientId)}:null),((state,clientId)=>[state.blocks.byClientId.get(clientId),state.blocks.attributes.get(clientId)]));function getBlocks(state,rootClientId){var _state$blocks$tree$ge;const treeKey=rootClientId&&areInnerBlocksControlled(state,rootClientId)?"controlled||"+rootClientId:rootClientId||"";return(null===(_state$blocks$tree$ge=state.blocks.tree.get(treeKey))||void 0===_state$blocks$tree$ge?void 0:_state$blocks$tree$ge.innerBlocks)||EMPTY_ARRAY}const __unstableGetClientIdWithClientIdsTree=(0,rememo.Z)(((state,clientId)=>({clientId:clientId,innerBlocks:__unstableGetClientIdsTree(state,clientId)})),(state=>[state.blocks.order])),__unstableGetClientIdsTree=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return getBlockOrder(state,rootClientId).map((clientId=>__unstableGetClientIdWithClientIdsTree(state,clientId)))}),(state=>[state.blocks.order])),getClientIdsOfDescendants=(0,rememo.Z)(((state,clientIds)=>{const collectedIds=[];for(const givenId of clientIds)for(const descendantId of getBlockOrder(state,givenId))collectedIds.push(descendantId,...getClientIdsOfDescendants(state,[descendantId]));return collectedIds}),(state=>[state.blocks.order])),getClientIdsWithDescendants=(0,rememo.Z)((state=>{const collectedIds=[];for(const topLevelId of getBlockOrder(state))collectedIds.push(topLevelId,...getClientIdsOfDescendants(state,[topLevelId]));return collectedIds}),(state=>[state.blocks.order])),getGlobalBlockCount=(0,rememo.Z)(((state,blockName)=>{const clientIds=getClientIdsWithDescendants(state);return blockName?clientIds.reduce(((accumulator,clientId)=>state.blocks.byClientId.get(clientId).name===blockName?accumulator+1:accumulator),0):clientIds.length}),(state=>[state.blocks.order,state.blocks.byClientId])),__experimentalGetGlobalBlocksByName=(0,rememo.Z)(((state,blockName)=>{if(!blockName)return EMPTY_ARRAY;const foundBlocks=getClientIdsWithDescendants(state).filter((clientId=>state.blocks.byClientId.get(clientId).name===blockName));return foundBlocks.length>0?foundBlocks:EMPTY_ARRAY}),(state=>[state.blocks.order,state.blocks.byClientId])),getBlocksByClientId=(0,rememo.Z)(((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>getBlock(state,clientId)))),((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>state.blocks.tree.get(clientId))))),getBlockNamesByClientId=(0,rememo.Z)(((state,clientIds)=>getBlocksByClientId(state,clientIds).filter(Boolean).map((block=>block.name))),((state,clientIds)=>getBlocksByClientId(state,clientIds)));function getBlockCount(state,rootClientId){return getBlockOrder(state,rootClientId).length}function getSelectionStart(state){return state.selection.selectionStart}function getSelectionEnd(state){return state.selection.selectionEnd}function getBlockSelectionStart(state){return state.selection.selectionStart.clientId}function getBlockSelectionEnd(state){return state.selection.selectionEnd.clientId}function getSelectedBlockCount(state){const multiSelectedBlockCount=getMultiSelectedBlockClientIds(state).length;return multiSelectedBlockCount||(state.selection.selectionStart.clientId?1:0)}function hasSelectedBlock(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return!!selectionStart.clientId&&selectionStart.clientId===selectionEnd.clientId}function getSelectedBlockClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection,{clientId:clientId}=selectionStart;return clientId&&clientId===selectionEnd.clientId?clientId:null}function getSelectedBlock(state){const clientId=getSelectedBlockClientId(state);return clientId?getBlock(state,clientId):null}function getBlockRootClientId(state,clientId){return state.blocks.parents.has(clientId)?state.blocks.parents.get(clientId):null}const getBlockParents=(0,rememo.Z)((function(state,clientId){let ascending=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const parents=[];let current=clientId;for(;state.blocks.parents.get(current);)current=state.blocks.parents.get(current),parents.push(current);return ascending?parents:parents.reverse()}),(state=>[state.blocks.parents])),getBlockParentsByBlockName=(0,rememo.Z)((function(state,clientId,blockName){let ascending=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const parents=getBlockParents(state,clientId,ascending);return parents.map((id=>({id:id,name:getBlockName(state,id)}))).filter((_ref=>{let{name:name}=_ref;return Array.isArray(blockName)?blockName.includes(name):name===blockName})).map((_ref2=>{let{id:id}=_ref2;return id}))}),(state=>[state.blocks.parents]));function getBlockHierarchyRootClientId(state,clientId){let parent,current=clientId;do{parent=current,current=state.blocks.parents.get(current)}while(current);return parent}function getLowestCommonAncestorWithSelectedBlock(state,clientId){const selectedId=getSelectedBlockClientId(state),clientParents=[...getBlockParents(state,clientId),clientId],selectedParents=[...getBlockParents(state,selectedId),selectedId];let lowestCommonAncestor;const maxDepth=Math.min(clientParents.length,selectedParents.length);for(let index=0;index<maxDepth&&clientParents[index]===selectedParents[index];index++)lowestCommonAncestor=clientParents[index];return lowestCommonAncestor}function getAdjacentBlockClientId(state,startClientId){let modifier=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(void 0===startClientId&&(startClientId=getSelectedBlockClientId(state)),void 0===startClientId&&(startClientId=modifier<0?getFirstMultiSelectedBlockClientId(state):getLastMultiSelectedBlockClientId(state)),!startClientId)return null;const rootClientId=getBlockRootClientId(state,startClientId);if(null===rootClientId)return null;const{order:order}=state.blocks,orderSet=order.get(rootClientId),index=orderSet.indexOf(startClientId),nextIndex=index+1*modifier;return nextIndex<0||nextIndex===orderSet.length?null:orderSet[nextIndex]}function getPreviousBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,-1)}function getNextBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,1)}function getSelectedBlocksInitialCaretPosition(state){return state.initialPosition}const getSelectedBlockClientIds=(0,rememo.Z)((state=>{const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;if(!selectionStart.clientId||!selectionEnd.clientId)return EMPTY_ARRAY;if(selectionStart.clientId===selectionEnd.clientId)return[selectionStart.clientId];const rootClientId=getBlockRootClientId(state,selectionStart.clientId);if(null===rootClientId)return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,rootClientId),startIndex=blockOrder.indexOf(selectionStart.clientId),endIndex=blockOrder.indexOf(selectionEnd.clientId);return startIndex>endIndex?blockOrder.slice(endIndex,startIndex+1):blockOrder.slice(startIndex,endIndex+1)}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlockClientIds(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?EMPTY_ARRAY:getSelectedBlockClientIds(state)}const getMultiSelectedBlocks=(0,rememo.Z)((state=>{const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state);return multiSelectedBlockClientIds.length?multiSelectedBlockClientIds.map((clientId=>getBlock(state,clientId))):EMPTY_ARRAY}),(state=>[...getSelectedBlockClientIds.getDependants(state),state.blocks.byClientId,state.blocks.order,state.blocks.attributes]));function getFirstMultiSelectedBlockClientId(state){return getMultiSelectedBlockClientIds(state)[0]||null}function getLastMultiSelectedBlockClientId(state){const selectedClientIds=getMultiSelectedBlockClientIds(state);return selectedClientIds[selectedClientIds.length-1]||null}function isFirstMultiSelectedBlock(state,clientId){return getFirstMultiSelectedBlockClientId(state)===clientId}function isBlockMultiSelected(state,clientId){return-1!==getMultiSelectedBlockClientIds(state).indexOf(clientId)}const isAncestorMultiSelected=(0,rememo.Z)(((state,clientId)=>{let ancestorClientId=clientId,isMultiSelected=!1;for(;ancestorClientId&&!isMultiSelected;)ancestorClientId=getBlockRootClientId(state,ancestorClientId),isMultiSelected=isBlockMultiSelected(state,ancestorClientId);return isMultiSelected}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlocksStartClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionStart.clientId||null}function getMultiSelectedBlocksEndClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionEnd.clientId||null}function __unstableIsFullySelected(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!selectionAnchor.attributeKey&&!selectionFocus.attributeKey&&void 0===selectionAnchor.offset&&void 0===selectionFocus.offset}function __unstableIsSelectionCollapsed(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!!selectionAnchor&&!!selectionFocus&&selectionAnchor.clientId===selectionFocus.clientId&&selectionAnchor.attributeKey===selectionFocus.attributeKey&&selectionAnchor.offset===selectionFocus.offset}function __unstableSelectionHasUnmergeableBlock(state){return getSelectedBlockClientIds(state).some((clientId=>{const blockName=getBlockName(state,clientId);return!(0,blocks_build_module.ck)(blockName).merge}))}function __unstableIsSelectionMergeable(state,isForward){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return!1;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return!1;const blockOrder=getBlockOrder(state,anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetBlockClientId=isForward?selectionEnd.clientId:selectionStart.clientId,blockToMergeClientId=isForward?selectionStart.clientId:selectionEnd.clientId,targetBlockName=getBlockName(state,targetBlockClientId);if(!(0,blocks_build_module.ck)(targetBlockName).merge)return!1;const blockToMerge=getBlock(state,blockToMergeClientId);if(blockToMerge.name===targetBlockName)return!0;const blocksToMerge=(0,blocks_build_module.m4)(blockToMerge,targetBlockName);return blocksToMerge&&blocksToMerge.length}const __unstableGetSelectedBlocksWithPartialSelection=state=>{const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return EMPTY_ARRAY;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return EMPTY_ARRAY;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,anchorRootClientId),anchorIndex=blockOrder.indexOf(selectionAnchor.clientId),focusIndex=blockOrder.indexOf(selectionFocus.clientId),[selectionStart,selectionEnd]=anchorIndex>focusIndex?[selectionFocus,selectionAnchor]:[selectionAnchor,selectionFocus],blockA=getBlock(state,selectionStart.clientId),blockAType=(0,blocks_build_module.ck)(blockA.name),blockB=getBlock(state,selectionEnd.clientId),blockBType=(0,blocks_build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionStart.attributeKey],htmlB=blockB.attributes[selectionEnd.attributeKey],attributeDefinitionA=blockAType.attributes[selectionStart.attributeKey],attributeDefinitionB=blockBType.attributes[selectionEnd.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});return valueA=(0,rich_text_build_module.Od)(valueA,0,selectionStart.offset),valueB=(0,rich_text_build_module.Od)(valueB,selectionEnd.offset,valueB.text.length),[{...blockA,attributes:{...blockA.attributes,[selectionStart.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}},{...blockB,attributes:{...blockB.attributes,[selectionEnd.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}}]};function getBlockOrder(state,rootClientId){return state.blocks.order.get(rootClientId||"")||EMPTY_ARRAY}function getBlockIndex(state,clientId){return getBlockOrder(state,getBlockRootClientId(state,clientId)).indexOf(clientId)}function isBlockSelected(state,clientId){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId&&selectionStart.clientId===clientId}function hasSelectedInnerBlock(state,clientId){let deep=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return getBlockOrder(state,clientId).some((innerClientId=>isBlockSelected(state,innerClientId)||isBlockMultiSelected(state,innerClientId)||deep&&hasSelectedInnerBlock(state,innerClientId,deep)))}function isBlockWithinSelection(state,clientId){if(!clientId)return!1;const clientIds=getMultiSelectedBlockClientIds(state),index=clientIds.indexOf(clientId);return index>-1&&index<clientIds.length-1}function hasMultiSelection(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId!==selectionEnd.clientId}function selectors_isMultiSelecting(state){return state.isMultiSelecting}function selectors_isSelectionEnabled(state){return state.isSelectionEnabled}function getBlockMode(state,clientId){return state.blocksMode[clientId]||"visual"}function selectors_isTyping(state){return state.isTyping}function __experimentalIsBlockInterfaceHidden(state){return state.isBlockInterfaceHidden}function isDraggingBlocks(state){return!!state.draggedBlocks.length}function getDraggedBlockClientIds(state){return state.draggedBlocks}function isBlockBeingDragged(state,clientId){return state.draggedBlocks.includes(clientId)}function isAncestorBeingDragged(state,clientId){if(!isDraggingBlocks(state))return!1;return getBlockParents(state,clientId).some((parentClientId=>isBlockBeingDragged(state,parentClientId)))}function isCaretWithinFormattedText(){return(0,deprecated_build_module.Z)('wp.data.select( "core/block-editor" ).isCaretWithinFormattedText',{since:"6.1",version:"6.3"}),!1}const getBlockInsertionPoint=(0,rememo.Z)((state=>{let rootClientId,index;const{insertionPoint:insertionPoint,selection:{selectionEnd:selectionEnd}}=state;if(null!==insertionPoint)return insertionPoint;const{clientId:clientId}=selectionEnd;return clientId?(rootClientId=getBlockRootClientId(state,clientId)||void 0,index=getBlockIndex(state,selectionEnd.clientId)+1):index=getBlockOrder(state).length,{rootClientId:rootClientId,index:index}}),(state=>[state.insertionPoint,state.selection.selectionEnd.clientId,state.blocks.parents,state.blocks.order]));function isBlockInsertionPointVisible(state){return null!==state.insertionPoint}function isValidTemplate(state){return state.template.isValid}function getTemplate(state){return state.settings.template}function getTemplateLock(state,rootClientId){var _getBlockListSettings,_getBlockListSettings2,_state$settings$templ;return rootClientId?null!==(_getBlockListSettings=null===(_getBlockListSettings2=getBlockListSettings(state,rootClientId))||void 0===_getBlockListSettings2?void 0:_getBlockListSettings2.templateLock)&&void 0!==_getBlockListSettings&&_getBlockListSettings:null!==(_state$settings$templ=state.settings.templateLock)&&void 0!==_state$settings$templ&&_state$settings$templ}const checkAllowList=function(list,item){let defaultResult=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"boolean"==typeof list?list:Array.isArray(list)?!(!list.includes("core/post-content")||null!==item)||list.includes(item):defaultResult},canInsertBlockTypeUnmemoized=function(state,blockName){let blockType,rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(blockName&&"object"==typeof blockName?(blockType=blockName,blockName=blockType.name):blockType=(0,blocks_build_module.ck)(blockName),!blockType)return!1;const{allowedBlockTypes:allowedBlockTypes}=getSettings(state),isBlockAllowedInEditor=checkAllowList(allowedBlockTypes,blockName,!0);if(!isBlockAllowedInEditor)return!1;const isLocked=!!getTemplateLock(state,rootClientId);if(isLocked)return!1;const parentBlockListSettings=getBlockListSettings(state,rootClientId);if(rootClientId&&void 0===parentBlockListSettings)return!1;const parentAllowedBlocks=null==parentBlockListSettings?void 0:parentBlockListSettings.allowedBlocks,hasParentAllowedBlock=checkAllowList(parentAllowedBlocks,blockName),blockAllowedParentBlocks=blockType.parent,parentName=getBlockName(state,rootClientId),hasBlockAllowedParent=checkAllowList(blockAllowedParentBlocks,parentName);let hasBlockAllowedAncestor=!0;const blockAllowedAncestorBlocks=blockType.ancestor;if(blockAllowedAncestorBlocks){hasBlockAllowedAncestor=[rootClientId,...getBlockParents(state,rootClientId)].some((ancestorClientId=>checkAllowList(blockAllowedAncestorBlocks,getBlockName(state,ancestorClientId))))}const canInsert=hasBlockAllowedAncestor&&(null===hasParentAllowedBlock&&null===hasBlockAllowedParent||!0===hasParentAllowedBlock||!0===hasBlockAllowedParent);return canInsert?(0,hooks_build_module.O)("blockEditor.__unstableCanInsertBlockType",canInsert,blockType,rootClientId,{getBlock:getBlock.bind(null,state),getBlockParentsByBlockName:getBlockParentsByBlockName.bind(null,state)}):canInsert},canInsertBlockType=(0,rememo.Z)(canInsertBlockTypeUnmemoized,((state,blockName,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId),state.settings.allowedBlockTypes,state.settings.templateLock]));function canInsertBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((id=>canInsertBlockType(state,getBlockName(state,id),rootClientId)))}function canRemoveBlock(state,clientId){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock:lock}=attributes,parentIsLocked=!!getTemplateLock(state,rootClientId);return void 0===lock||void 0===(null==lock?void 0:lock.remove)?!parentIsLocked:!(null!=lock&&lock.remove)}function canRemoveBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((clientId=>canRemoveBlock(state,clientId,rootClientId)))}function canMoveBlock(state,clientId){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const attributes=getBlockAttributes(state,clientId);if(null===attributes)return;const{lock:lock}=attributes,parentIsLocked="all"===getTemplateLock(state,rootClientId);return void 0===lock||void 0===(null==lock?void 0:lock.move)?!parentIsLocked:!(null!=lock&&lock.move)}function canMoveBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((clientId=>canMoveBlock(state,clientId,rootClientId)))}function canEditBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock:lock}=attributes;return!(null!=lock&&lock.edit)}function canLockBlockType(state,nameOrType){var _state$settings;return!!(0,blocks_build_module.zb)(nameOrType,"lock",!0)&&!(null===(_state$settings=state.settings)||void 0===_state$settings||!_state$settings.canLockBlocks)}function getInsertUsage(state,id){var _state$preferences$in,_state$preferences$in2;return null!==(_state$preferences$in=null===(_state$preferences$in2=state.preferences.insertUsage)||void 0===_state$preferences$in2?void 0:_state$preferences$in2[id])&&void 0!==_state$preferences$in?_state$preferences$in:null}const canIncludeBlockTypeInInserter=(state,blockType,rootClientId)=>!!(0,blocks_build_module.zb)(blockType,"inserter",!0)&&canInsertBlockTypeUnmemoized(state,blockType.name,rootClientId),getItemFromVariation=(state,item)=>variation=>{const variationId=`${item.id}/${variation.name}`,{time:time,count:count=0}=getInsertUsage(state,variationId)||{};return{...item,id:variationId,icon:variation.icon||item.icon,title:variation.title||item.title,description:variation.description||item.description,category:variation.category||item.category,example:variation.hasOwnProperty("example")?variation.example:item.example,initialAttributes:{...item.initialAttributes,...variation.attributes},innerBlocks:variation.innerBlocks,keywords:variation.keywords||item.keywords,frecency:calculateFrecency(time,count)}},calculateFrecency=(time,count)=>{if(!time)return count;const duration=Date.now()-time;switch(!0){case duration<36e5:return 4*count;case duration<864e5:return 2*count;case duration<6048e5:return count/2;default:return count/4}},buildBlockTypeItem=(state,_ref3)=>{let{buildScope:buildScope="inserter"}=_ref3;return blockType=>{const id=blockType.name;let isDisabled=!1;(0,blocks_build_module.zb)(blockType.name,"multiple",!0)||(isDisabled=getBlocksByClientId(state,getClientIdsWithDescendants(state)).some((_ref4=>{let{name:name}=_ref4;return name===blockType.name})));const{time:time,count:count=0}=getInsertUsage(state,id)||{},blockItemBase={id:id,name:blockType.name,title:blockType.title,icon:blockType.icon,isDisabled:isDisabled,frecency:calculateFrecency(time,count)};if("transform"===buildScope)return blockItemBase;const inserterVariations=(0,blocks_build_module.Nr)(blockType.name,"inserter");return{...blockItemBase,initialAttributes:{},description:blockType.description,category:blockType.category,keywords:blockType.keywords,variations:inserterVariations,example:blockType.example,utility:1}}},getInserterItems=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const buildBlockTypeInserterItem=buildBlockTypeItem(state,{buildScope:"inserter"}),blockParserTokenizer=/^\s*<!--\s+(\/)?wp:([a-z][a-z0-9_-]*\/)?([a-z][a-z0-9_-]*)\s+({(?:(?=([^}]+|}+(?=})|(?!}\s+\/?-->)[^])*)\5|[^]*?)}\s+)?(\/)?-->/,buildReusableBlockInserterItem=reusableBlock=>{let icon=symbol.Z;if("web"===platform.Z.OS){const rawBlockMatch=("string"==typeof reusableBlock.content.raw?reusableBlock.content.raw:reusableBlock.content).match(blockParserTokenizer);if(rawBlockMatch){const[,,namespace="core/",blockName]=rawBlockMatch,referencedBlockType=(0,blocks_build_module.ck)(namespace+blockName);referencedBlockType&&(icon=referencedBlockType.icon)}}const id=`core/block/${reusableBlock.id}`,{time:time,count:count=0}=getInsertUsage(state,id)||{},frecency=calculateFrecency(time,count);return{id:id,name:"core/block",initialAttributes:{ref:reusableBlock.id},title:reusableBlock.title.raw,icon:icon,category:"reusable",keywords:[],isDisabled:!1,utility:1,frecency:frecency}},blockTypeInserterItems=(0,blocks_build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeInserterItem),reusableBlockInserterItems=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)?getReusableBlocks(state).map(buildReusableBlockInserterItem):[],items=blockTypeInserterItems.reduce(((accumulator,item)=>{const{variations:variations=[]}=item;if(variations.some((_ref5=>{let{isDefault:isDefault}=_ref5;return isDefault}))||accumulator.push(item),variations.length){const variationMapper=getItemFromVariation(state,item);accumulator.push(...variations.map(variationMapper))}return accumulator}),[]),groupByType=(blocks,block)=>{const{core:core,noncore:noncore}=blocks;return(block.name.startsWith("core/")?core:noncore).push(block),blocks},{core:coreItems,noncore:nonCoreItems}=items.reduce(groupByType,{core:[],noncore:[]}),sortedBlockTypes=[...coreItems,...nonCoreItems];return[...sortedBlockTypes,...reusableBlockInserterItems]}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.blocks.order,state.preferences.insertUsage,state.settings.allowedBlockTypes,state.settings.templateLock,getReusableBlocks(state),(0,blocks_build_module.U8)()])),getBlockTransformItems=(0,rememo.Z)((function(state,blocks){var _itemsByName$sourceBl;let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const normalizedBlocks=Array.isArray(blocks)?blocks:[blocks],[sourceBlock]=normalizedBlocks,buildBlockTypeTransformItem=buildBlockTypeItem(state,{buildScope:"transform"}),blockTypeTransformItems=(0,blocks_build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeTransformItem),itemsByName=Object.fromEntries(Object.entries(blockTypeTransformItems).map((_ref6=>{let[,value]=_ref6;return[value.name,value]})));itemsByName["*"]={frecency:1/0,id:"*",isDisabled:!1,name:"*",title:(0,i18n_build_module.__)("Unwrap"),icon:null===(_itemsByName$sourceBl=itemsByName[null==sourceBlock?void 0:sourceBlock.name])||void 0===_itemsByName$sourceBl?void 0:_itemsByName$sourceBl.icon};const possibleTransforms=(0,blocks_build_module.ff)(normalizedBlocks).reduce(((accumulator,block)=>("*"===block?accumulator.push(itemsByName["*"]):itemsByName[null==block?void 0:block.name]&&accumulator.push(itemsByName[block.name]),accumulator)),[]);return(0,sorting.X)(possibleTransforms,(block=>itemsByName[block.name].frecency),"desc")}),((state,blocks,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.preferences.insertUsage,state.settings.allowedBlockTypes,state.settings.templateLock,(0,blocks_build_module.U8)()])),hasInserterItems=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const hasBlockType=(0,blocks_build_module.U8)().some((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)));if(hasBlockType)return!0;const hasReusableBlock=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&getReusableBlocks(state).length>0;return hasReusableBlock}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.settings.allowedBlockTypes,state.settings.templateLock,getReusableBlocks(state),(0,blocks_build_module.U8)()])),getAllowedBlocks=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(rootClientId)return(0,blocks_build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)))}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.settings.allowedBlockTypes,state.settings.templateLock,(0,blocks_build_module.U8)()])),__experimentalGetAllowedBlocks=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,deprecated_build_module.Z)('wp.data.select( "core/block-editor" ).__experimentalGetAllowedBlocks',{alternative:'wp.data.select( "core/block-editor" ).getAllowedBlocks',since:"6.2",version:"6.4"}),getAllowedBlocks(state,rootClientId)}),((state,rootClientId)=>[...getAllowedBlocks.getDependants(state,rootClientId)])),__experimentalGetDirectInsertBlock=(0,rememo.Z)((function(state){var _state$blockListSetti,_state$blockListSetti2;let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!rootClientId)return;const defaultBlock=null===(_state$blockListSetti=state.blockListSettings[rootClientId])||void 0===_state$blockListSetti?void 0:_state$blockListSetti.__experimentalDefaultBlock,directInsert=null===(_state$blockListSetti2=state.blockListSettings[rootClientId])||void 0===_state$blockListSetti2?void 0:_state$blockListSetti2.__experimentalDirectInsert;return defaultBlock&&directInsert?"function"==typeof directInsert?directInsert(getBlock(state,rootClientId))?defaultBlock:null:defaultBlock:void 0}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.tree.get(rootClientId)])),__experimentalGetParsedPattern=(0,rememo.Z)(((state,patternName)=>{const pattern=state.settings.__experimentalBlockPatterns.find((_ref7=>{let{name:name}=_ref7;return name===patternName}));return pattern?{...pattern,blocks:(0,blocks_build_module.Qc)(pattern.content,{__unstableSkipMigrationLogs:!0})}:null}),(state=>[state.settings.__experimentalBlockPatterns])),getAllAllowedPatterns=(0,rememo.Z)((state=>{const patterns=state.settings.__experimentalBlockPatterns,{allowedBlockTypes:allowedBlockTypes}=getSettings(state),allowedPatterns=patterns.filter((_ref8=>{let{inserter:inserter=!0}=_ref8;return!!inserter})).map((_ref9=>{let{name:name}=_ref9;return __experimentalGetParsedPattern(state,name)})).filter((_ref10=>{let{blocks:blocks}=_ref10;return((blocks,allowedBlockTypes)=>{if("boolean"==typeof allowedBlockTypes)return allowedBlockTypes;const blocksQueue=[...blocks];for(;blocksQueue.length>0;){var _block$innerBlocks;const block=blocksQueue.shift();if(!checkAllowList(allowedBlockTypes,block.name||block.blockName,!0))return!1;null===(_block$innerBlocks=block.innerBlocks)||void 0===_block$innerBlocks||_block$innerBlocks.forEach((innerBlock=>{blocksQueue.push(innerBlock)}))}return!0})(blocks,allowedBlockTypes)}));return allowedPatterns}),(state=>[state.settings.__experimentalBlockPatterns,state.settings.allowedBlockTypes])),__experimentalGetAllowedPatterns=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const availableParsedPatterns=getAllAllowedPatterns(state),patternsAllowed=availableParsedPatterns.filter((_ref11=>{let{blocks:blocks}=_ref11;return blocks.every((_ref12=>{let{name:name}=_ref12;return canInsertBlockType(state,name,rootClientId)}))}));return patternsAllowed}),((state,rootClientId)=>[state.settings.__experimentalBlockPatterns,state.settings.allowedBlockTypes,state.settings.templateLock,state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId)])),getPatternsByBlockTypes=(0,rememo.Z)((function(state,blockNames){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!blockNames)return EMPTY_ARRAY;const patterns=__experimentalGetAllowedPatterns(state,rootClientId),normalizedBlockNames=Array.isArray(blockNames)?blockNames:[blockNames],filteredPatterns=patterns.filter((pattern=>{var _pattern$blockTypes,_pattern$blockTypes$s;return null==pattern||null===(_pattern$blockTypes=pattern.blockTypes)||void 0===_pattern$blockTypes||null===(_pattern$blockTypes$s=_pattern$blockTypes.some)||void 0===_pattern$blockTypes$s?void 0:_pattern$blockTypes$s.call(_pattern$blockTypes,(blockName=>normalizedBlockNames.includes(blockName)))}));return 0===filteredPatterns.length?EMPTY_ARRAY:filteredPatterns}),((state,blockNames,rootClientId)=>[...__experimentalGetAllowedPatterns.getDependants(state,rootClientId)])),__experimentalGetPatternsByBlockTypes=(0,rememo.Z)((function(state,blockNames){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,deprecated_build_module.Z)('wp.data.select( "core/block-editor" ).__experimentalGetPatternsByBlockTypes',{alternative:'wp.data.select( "core/block-editor" ).getPatternsByBlockTypes',since:"6.2",version:"6.4"}),getPatternsByBlockTypes(state,blockNames,rootClientId)}),((state,blockNames,rootClientId)=>[...__experimentalGetAllowedPatterns.getDependants(state,rootClientId)])),__experimentalGetPatternTransformItems=(0,rememo.Z)((function(state,blocks){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!blocks)return EMPTY_ARRAY;if(blocks.some((_ref13=>{let{clientId:clientId,innerBlocks:innerBlocks}=_ref13;return innerBlocks.length||areInnerBlocksControlled(state,clientId)})))return EMPTY_ARRAY;const selectedBlockNames=Array.from(new Set(blocks.map((_ref14=>{let{name:name}=_ref14;return name}))));return getPatternsByBlockTypes(state,selectedBlockNames,rootClientId)}),((state,blocks,rootClientId)=>[...getPatternsByBlockTypes.getDependants(state,rootClientId)]));function getBlockListSettings(state,clientId){return state.blockListSettings[clientId]}function getSettings(state){return state.settings}function isLastBlockChangePersistent(state){return state.blocks.isPersistentChange}const __experimentalGetBlockListSettingsForBlocks=(0,rememo.Z)((function(state){let clientIds=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return clientIds.reduce(((blockListSettingsForBlocks,clientId)=>state.blockListSettings[clientId]?{...blockListSettingsForBlocks,[clientId]:state.blockListSettings[clientId]}:blockListSettingsForBlocks),{})}),(state=>[state.blockListSettings])),__experimentalGetReusableBlockTitle=(0,rememo.Z)(((state,ref)=>{var _reusableBlock$title;const reusableBlock=getReusableBlocks(state).find((block=>block.id===ref));return reusableBlock?null===(_reusableBlock$title=reusableBlock.title)||void 0===_reusableBlock$title?void 0:_reusableBlock$title.raw:null}),(state=>[getReusableBlocks(state)]));function __unstableIsLastBlockChangeIgnored(state){return state.blocks.isIgnoredChange}function __experimentalGetLastBlockAttributeChanges(state){return state.lastBlockAttributesChange}function getReusableBlocks(state){var _state$settings$__exp,_state$settings2;return null!==(_state$settings$__exp=null==state||null===(_state$settings2=state.settings)||void 0===_state$settings2?void 0:_state$settings2.__experimentalReusableBlocks)&&void 0!==_state$settings$__exp?_state$settings$__exp:EMPTY_ARRAY}function isNavigationMode(state){return"navigation"===state.editorMode}function __unstableGetEditorMode(state){return state.editorMode}function selectors_hasBlockMovingClientId(state){return state.hasBlockMovingClientId}function didAutomaticChange(state){return!!state.automaticChangeStatus}function isBlockHighlighted(state,clientId){return state.highlightedBlock===clientId}function areInnerBlocksControlled(state,clientId){return!!state.blocks.controlledInnerBlocks[clientId]}const __experimentalGetActiveBlockIdByBlockNames=(0,rememo.Z)(((state,validBlockNames)=>{if(!validBlockNames.length)return null;const selectedBlockClientId=getSelectedBlockClientId(state);if(validBlockNames.includes(getBlockName(state,selectedBlockClientId)))return selectedBlockClientId;const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state),entityAreaParents=getBlockParentsByBlockName(state,selectedBlockClientId||multiSelectedBlockClientIds[0],validBlockNames);return entityAreaParents?entityAreaParents[entityAreaParents.length-1]:null}),((state,validBlockNames)=>[state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId,validBlockNames]));function wasBlockJustInserted(state,clientId,source){var _lastBlockInserted$cl;const{lastBlockInserted:lastBlockInserted}=state;return(null===(_lastBlockInserted$cl=lastBlockInserted.clientIds)||void 0===_lastBlockInserted$cl?void 0:_lastBlockInserted$cl.includes(clientId))&&lastBlockInserted.source===source}function getLastInsertedBlocksClientIds(state){var _state$lastBlockInser;return null==state||null===(_state$lastBlockInser=state.lastBlockInserted)||void 0===_state$lastBlockInser?void 0:_state$lastBlockInser.clientIds}function isBlockVisible(state,clientId){var _state$blockVisibilit,_state$blockVisibilit2;return null===(_state$blockVisibilit=null===(_state$blockVisibilit2=state.blockVisibility)||void 0===_state$blockVisibilit2?void 0:_state$blockVisibilit2[clientId])||void 0===_state$blockVisibilit||_state$blockVisibilit}const __unstableGetVisibleBlocks=(0,rememo.Z)((state=>new Set(Object.keys(state.blockVisibility).filter((key=>state.blockVisibility[key])))),(state=>[state.blockVisibility])),__unstableGetContentLockingParent=(0,rememo.Z)(((state,clientId)=>{let result,current=clientId;for(;state.blocks.parents.has(current);)current=state.blocks.parents.get(current),"contentOnly"===getTemplateLock(state,current)&&(result=current);return result}),(state=>[state.blocks.parents,state.blockListSettings]));function __unstableGetTemporarilyEditingAsBlocks(state){return state.temporarilyEditingAsBlocks}function __unstableHasActiveBlockOverlayActive(state,clientId){if(!canEditBlock(state,clientId))return!0;const editorMode=__unstableGetEditorMode(state);if("zoom-out"===editorMode&&clientId&&!getBlockRootClientId(state,clientId))return!0;const blockSupportDisable=(0,blocks_build_module.zb)(getBlockName(state,clientId),"__experimentalDisableBlockOverlay",!1);return("navigation"===editorMode||!blockSupportDisable&&areInnerBlocksControlled(state,clientId))&&!isBlockSelected(state,clientId)&&!hasSelectedInnerBlock(state,clientId,!0)}function __unstableIsWithinBlockOverlay(state,clientId){let parent=state.blocks.parents[clientId];for(;parent;){if(__unstableHasActiveBlockOverlayActive(state,parent))return!0;parent=state.blocks.parents[parent]}return!1}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");function retrieveSelectedAttribute(blockAttributes){if(blockAttributes)return Object.keys(blockAttributes).find((name=>{const value=blockAttributes[name];return"string"==typeof value&&-1!==value.indexOf("")}))}const castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray],resetBlocks=blocks=>_ref2=>{let{dispatch:dispatch}=_ref2;dispatch({type:"RESET_BLOCKS",blocks:blocks}),dispatch(validateBlocksToTemplate(blocks))},validateBlocksToTemplate=blocks=>_ref3=>{let{select:select,dispatch:dispatch}=_ref3;const template=select.getTemplate(),templateLock=select.getTemplateLock(),isBlocksValidToTemplate=!template||"all"!==templateLock||(0,blocks_build_module.aW)(blocks,template);if(isBlocksValidToTemplate!==select.isValidTemplate())return dispatch.setTemplateValidity(isBlocksValidToTemplate),isBlocksValidToTemplate};function resetSelection(selectionStart,selectionEnd,initialPosition){return{type:"RESET_SELECTION",selectionStart:selectionStart,selectionEnd:selectionEnd,initialPosition:initialPosition}}function receiveBlocks(blocks){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).receiveBlocks',{since:"5.9",alternative:"resetBlocks or insertBlocks"}),{type:"RECEIVE_BLOCKS",blocks:blocks}}function updateBlockAttributes(clientIds,attributes){let uniqueByBlock=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"UPDATE_BLOCK_ATTRIBUTES",clientIds:castArray(clientIds),attributes:attributes,uniqueByBlock:uniqueByBlock}}function updateBlock(clientId,updates){return{type:"UPDATE_BLOCK",clientId:clientId,updates:updates}}function selectBlock(clientId){let initialPosition=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:"SELECT_BLOCK",initialPosition:initialPosition,clientId:clientId}}const selectPreviousBlock=clientId=>_ref4=>{let{select:select,dispatch:dispatch}=_ref4;const previousBlockClientId=select.getPreviousBlockClientId(clientId);previousBlockClientId&&dispatch.selectBlock(previousBlockClientId,-1)},selectNextBlock=clientId=>_ref5=>{let{select:select,dispatch:dispatch}=_ref5;const nextBlockClientId=select.getNextBlockClientId(clientId);nextBlockClientId&&dispatch.selectBlock(nextBlockClientId)};function startMultiSelect(){return{type:"START_MULTI_SELECT"}}function stopMultiSelect(){return{type:"STOP_MULTI_SELECT"}}const multiSelect=function(start,end){let __experimentalInitialPosition=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _ref6=>{let{select:select,dispatch:dispatch}=_ref6;if(select.getBlockRootClientId(start)!==select.getBlockRootClientId(end))return;dispatch({type:"MULTI_SELECT",start:start,end:end,initialPosition:__experimentalInitialPosition});const blockCount=select.getSelectedBlockCount();(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module._n)("%s block selected.","%s blocks selected.",blockCount),blockCount),"assertive")}};function clearSelectedBlock(){return{type:"CLEAR_SELECTED_BLOCK"}}function toggleSelection(){let isSelectionEnabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"TOGGLE_SELECTION",isSelectionEnabled:isSelectionEnabled}}function getBlocksWithDefaultStylesApplied(blocks,blockEditorSettings){var _blockEditorSettings$,_blockEditorSettings$2;const preferredStyleVariations=null!==(_blockEditorSettings$=null==blockEditorSettings||null===(_blockEditorSettings$2=blockEditorSettings.__experimentalPreferredStyleVariations)||void 0===_blockEditorSettings$2?void 0:_blockEditorSettings$2.value)&&void 0!==_blockEditorSettings$?_blockEditorSettings$:{};return blocks.map((block=>{var _block$attributes;const blockName=block.name;if(!(0,blocks_build_module.zb)(blockName,"defaultStylePicker",!0))return block;if(!preferredStyleVariations[blockName])return block;const className=null===(_block$attributes=block.attributes)||void 0===_block$attributes?void 0:_block$attributes.className;if(null!=className&&className.includes("is-style-"))return block;const{attributes:attributes={}}=block,blockStyle=preferredStyleVariations[blockName];return{...block,attributes:{...attributes,className:`${className||""} is-style-${blockStyle}`.trim()}}}))}const replaceBlocks=function(clientIds,blocks,indexToSelect){let initialPosition=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,meta=arguments.length>4?arguments[4]:void 0;return _ref7=>{let{select:select,dispatch:dispatch}=_ref7;clientIds=castArray(clientIds),blocks=getBlocksWithDefaultStylesApplied(castArray(blocks),select.getSettings());const rootClientId=select.getBlockRootClientId(clientIds[0]);for(let index=0;index<blocks.length;index++){const block=blocks[index];if(!select.canInsertBlockType(block.name,rootClientId))return}dispatch({type:"REPLACE_BLOCKS",clientIds:clientIds,blocks:blocks,time:Date.now(),indexToSelect:indexToSelect,initialPosition:initialPosition,meta:meta}),dispatch((_ref=>{let{select:select,dispatch:dispatch}=_ref;if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender:__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()}))}};function replaceBlock(clientId,block){return replaceBlocks(clientId,block)}const createOnMove=type=>(clientIds,rootClientId)=>_ref8=>{let{select:select,dispatch:dispatch}=_ref8;select.canMoveBlocks(clientIds,rootClientId)&&dispatch({type:type,clientIds:castArray(clientIds),rootClientId:rootClientId})},moveBlocksDown=createOnMove("MOVE_BLOCKS_DOWN"),moveBlocksUp=createOnMove("MOVE_BLOCKS_UP"),moveBlocksToPosition=function(clientIds){let fromRootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",toRootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",index=arguments.length>3?arguments[3]:void 0;return _ref9=>{let{select:select,dispatch:dispatch}=_ref9;if(select.canMoveBlocks(clientIds,fromRootClientId)){if(fromRootClientId!==toRootClientId){if(!select.canRemoveBlocks(clientIds,fromRootClientId))return;if(!select.canInsertBlocks(clientIds,toRootClientId))return}dispatch({type:"MOVE_BLOCKS_TO_POSITION",fromRootClientId:fromRootClientId,toRootClientId:toRootClientId,clientIds:clientIds,index:index})}}};function moveBlockToPosition(clientId){let fromRootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",toRootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",index=arguments.length>3?arguments[3]:void 0;return moveBlocksToPosition([clientId],fromRootClientId,toRootClientId,index)}function insertBlock(block,index,rootClientId,updateSelection,meta){return insertBlocks([block],index,rootClientId,updateSelection,0,meta)}const insertBlocks=function(blocks,index,rootClientId){let updateSelection=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],initialPosition=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,meta=arguments.length>5?arguments[5]:void 0;return _ref10=>{let{select:select,dispatch:dispatch}=_ref10;null!==initialPosition&&"object"==typeof initialPosition&&(meta=initialPosition,initialPosition=0,(0,deprecated_build_module.Z)("meta argument in wp.data.dispatch('core/block-editor')",{since:"5.8",hint:"The meta argument is now the 6th argument of the function"})),blocks=getBlocksWithDefaultStylesApplied(castArray(blocks),select.getSettings());const allowedBlocks=[];for(const block of blocks){select.canInsertBlockType(block.name,rootClientId)&&allowedBlocks.push(block)}allowedBlocks.length&&dispatch({type:"INSERT_BLOCKS",blocks:allowedBlocks,index:index,rootClientId:rootClientId,time:Date.now(),updateSelection:updateSelection,initialPosition:updateSelection?initialPosition:null,meta:meta})}};function showInsertionPoint(rootClientId,index){let __unstableOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{__unstableWithInserter:__unstableWithInserter,operation:operation}=__unstableOptions;return{type:"SHOW_INSERTION_POINT",rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation}}const hideInsertionPoint=()=>_ref11=>{let{select:select,dispatch:dispatch}=_ref11;select.isBlockInsertionPointVisible()&&dispatch({type:"HIDE_INSERTION_POINT"})};function setTemplateValidity(isValid){return{type:"SET_TEMPLATE_VALIDITY",isValid:isValid}}const synchronizeTemplate=()=>_ref12=>{let{select:select,dispatch:dispatch}=_ref12;dispatch({type:"SYNCHRONIZE_TEMPLATE"});const blocks=select.getBlocks(),template=select.getTemplate(),updatedBlockList=(0,blocks_build_module.fw)(blocks,template);dispatch.resetBlocks(updatedBlockList)},__unstableDeleteSelection=isForward=>_ref13=>{let{registry:registry,select:select,dispatch:dispatch}=_ref13;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetSelection=isForward?selectionEnd:selectionStart,targetBlock=select.getBlock(targetSelection.clientId),targetBlockType=(0,blocks_build_module.ck)(targetBlock.name);if(!targetBlockType.merge)return;const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockAType=(0,blocks_build_module.ck)(blockA.name),blockB=select.getBlock(selectionB.clientId),blockBType=(0,blocks_build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey],attributeDefinitionA=blockAType.attributes[selectionA.attributeKey],attributeDefinitionB=blockBType.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});valueA=(0,rich_text_build_module.Od)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.$T)(valueB,"",0,selectionB.offset);const cloneA=(0,blocks_build_module.Wm)(blockA,{[selectionA.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}),cloneB=(0,blocks_build_module.Wm)(blockB,{[selectionB.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}),followingBlock=isForward?cloneA:cloneB,blocksWithTheSameType=blockA.name===blockB.name?[followingBlock]:(0,blocks_build_module.m4)(followingBlock,targetBlockType.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;let updatedAttributes;if(isForward){const blockToMerge=blocksWithTheSameType.pop();updatedAttributes=targetBlockType.merge(blockToMerge.attributes,cloneB.attributes)}else{const blockToMerge=blocksWithTheSameType.shift();updatedAttributes=targetBlockType.merge(cloneA.attributes,blockToMerge.attributes)}const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.Ue)({html:convertedHtml,...mapRichTextSettings(targetBlockType.attributes[newAttributeKey])}),newOffset=convertedValue.text.indexOf(""),newValue=(0,rich_text_build_module.Od)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Jz)({value:newValue,...mapRichTextSettings(targetBlockType.attributes[newAttributeKey])});updatedAttributes[newAttributeKey]=newHtml;const selectedBlockClientIds=select.getSelectedBlockClientIds(),replacement=[...isForward?blocksWithTheSameType:[],{...targetBlock,attributes:{...targetBlock.attributes,...updatedAttributes}},...isForward?[]:blocksWithTheSameType];registry.batch((()=>{dispatch.selectionChange(targetBlock.clientId,newAttributeKey,newOffset,newOffset),dispatch.replaceBlocks(selectedBlockClientIds,replacement,0,select.getSelectedBlocksInitialCaretPosition())}))},__unstableSplitSelection=()=>_ref14=>{let{select:select,dispatch:dispatch}=_ref14;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockAType=(0,blocks_build_module.ck)(blockA.name),blockB=select.getBlock(selectionB.clientId),blockBType=(0,blocks_build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey],attributeDefinitionA=blockAType.attributes[selectionA.attributeKey],attributeDefinitionB=blockBType.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});valueA=(0,rich_text_build_module.Od)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.Od)(valueB,0,selectionB.offset),dispatch.replaceBlocks(select.getSelectedBlockClientIds(),[{...blockA,attributes:{...blockA.attributes,[selectionA.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}},(0,blocks_build_module.j4)((0,blocks_build_module.UT)()),{...blockB,attributes:{...blockB.attributes,[selectionB.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}}],1,select.getSelectedBlocksInitialCaretPosition())},__unstableExpandSelection=()=>_ref15=>{let{select:select,dispatch:dispatch}=_ref15;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();dispatch.selectionChange({start:{clientId:selectionAnchor.clientId},end:{clientId:selectionFocus.clientId}})},mergeBlocks=(firstBlockClientId,secondBlockClientId)=>_ref16=>{let{registry:registry,select:select,dispatch:dispatch}=_ref16;const blocks=[firstBlockClientId,secondBlockClientId];dispatch({type:"MERGE_BLOCKS",blocks:blocks});const[clientIdA,clientIdB]=blocks,blockA=select.getBlock(clientIdA),blockAType=(0,blocks_build_module.ck)(blockA.name);if(!blockAType)return;const blockB=select.getBlock(clientIdB);if(blockAType&&!blockAType.merge){const blocksWithTheSameType=(0,blocks_build_module.m4)(blockB,blockAType.name);if(1!==(null==blocksWithTheSameType?void 0:blocksWithTheSameType.length))return void dispatch.selectBlock(blockA.clientId);const[blockWithSameType]=blocksWithTheSameType;return blockWithSameType.innerBlocks.length<1?void dispatch.selectBlock(blockA.clientId):void registry.batch((()=>{dispatch.insertBlocks(blockWithSameType.innerBlocks,void 0,clientIdA),dispatch.removeBlock(clientIdB),dispatch.selectBlock(blockWithSameType.innerBlocks[0].clientId)}))}const blockBType=(0,blocks_build_module.ck)(blockB.name),{clientId:clientId,attributeKey:attributeKey,offset:offset}=select.getSelectionStart(),attributeDefinition=(clientId===clientIdA?blockAType:blockBType).attributes[attributeKey],canRestoreTextSelection=(clientId===clientIdA||clientId===clientIdB)&&void 0!==attributeKey&&void 0!==offset&&!!attributeDefinition;attributeDefinition||("number"==typeof attributeKey?window.console.error("RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was "+typeof attributeKey):window.console.error("The RichText identifier prop does not match any attributes defined by the block."));const cloneA=(0,blocks_build_module.Wm)(blockA),cloneB=(0,blocks_build_module.Wm)(blockB);if(canRestoreTextSelection){const selectedBlock=clientId===clientIdA?cloneA:cloneB,html=selectedBlock.attributes[attributeKey],value=(0,rich_text_build_module.$T)((0,rich_text_build_module.Ue)({html:html,...mapRichTextSettings(attributeDefinition)}),"",offset,offset);selectedBlock.attributes[attributeKey]=(0,rich_text_build_module.Jz)({value:value,...mapRichTextSettings(attributeDefinition)})}const blocksWithTheSameType=blockA.name===blockB.name?[cloneB]:(0,blocks_build_module.m4)(cloneB,blockA.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;const updatedAttributes=blockAType.merge(cloneA.attributes,blocksWithTheSameType[0].attributes);if(canRestoreTextSelection){const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.Ue)({html:convertedHtml,...mapRichTextSettings(blockAType.attributes[newAttributeKey])}),newOffset=convertedValue.text.indexOf(""),newValue=(0,rich_text_build_module.Od)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Jz)({value:newValue,...mapRichTextSettings(blockAType.attributes[newAttributeKey])});updatedAttributes[newAttributeKey]=newHtml,dispatch.selectionChange(blockA.clientId,newAttributeKey,newOffset,newOffset)}dispatch.replaceBlocks([blockA.clientId,blockB.clientId],[{...blockA,attributes:{...blockA.attributes,...updatedAttributes}},...blocksWithTheSameType.slice(1)],0)},removeBlocks=function(clientIds){let selectPrevious=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _ref17=>{let{select:select,dispatch:dispatch}=_ref17;if(!clientIds||!clientIds.length)return;clientIds=castArray(clientIds);const rootClientId=select.getBlockRootClientId(clientIds[0]);select.canRemoveBlocks(clientIds,rootClientId)&&(selectPrevious&&dispatch.selectPreviousBlock(clientIds[0]),dispatch({type:"REMOVE_BLOCKS",clientIds:clientIds}),dispatch((_ref=>{let{select:select,dispatch:dispatch}=_ref;if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender:__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()})))}};function removeBlock(clientId,selectPrevious){return removeBlocks([clientId],selectPrevious)}function replaceInnerBlocks(rootClientId,blocks){let updateSelection=arguments.length>2&&void 0!==arguments[2]&&arguments[2],initialPosition=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{type:"REPLACE_INNER_BLOCKS",rootClientId:rootClientId,blocks:blocks,updateSelection:updateSelection,initialPosition:updateSelection?initialPosition:null,time:Date.now()}}function toggleBlockMode(clientId){return{type:"TOGGLE_BLOCK_MODE",clientId:clientId}}function __experimentalHideBlockInterface(){return{type:"HIDE_BLOCK_INTERFACE"}}function __experimentalShowBlockInterface(){return{type:"SHOW_BLOCK_INTERFACE"}}function startTyping(){return{type:"START_TYPING"}}function stopTyping(){return{type:"STOP_TYPING"}}function startDraggingBlocks(){let clientIds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"START_DRAGGING_BLOCKS",clientIds:clientIds}}function stopDraggingBlocks(){return{type:"STOP_DRAGGING_BLOCKS"}}function enterFormattedText(){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).enterFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function exitFormattedText(){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).exitFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function selectionChange(clientId,attributeKey,startOffset,endOffset){return"string"==typeof clientId?{type:"SELECTION_CHANGE",clientId:clientId,attributeKey:attributeKey,startOffset:startOffset,endOffset:endOffset}:{type:"SELECTION_CHANGE",...clientId}}const insertDefaultBlock=(attributes,rootClientId,index)=>_ref18=>{let{dispatch:dispatch}=_ref18;const defaultBlockName=(0,blocks_build_module.UT)();if(!defaultBlockName)return;const block=(0,blocks_build_module.j4)(defaultBlockName,attributes);return dispatch.insertBlock(block,index,rootClientId)};function updateBlockListSettings(clientId,settings){return{type:"UPDATE_BLOCK_LIST_SETTINGS",clientId:clientId,settings:settings}}function updateSettings(settings){return __experimentalUpdateSettings(settings,!0)}const privateSettings=["inserterMediaCategories"];function __experimentalUpdateSettings(settings){let stripExperimentalSettings=arguments.length>1&&void 0!==arguments[1]&&arguments[1],cleanSettings=settings;if(stripExperimentalSettings&&"web"===platform.Z.OS){cleanSettings={};for(const key in settings)privateSettings.includes(key)||(cleanSettings[key]=settings[key])}return{type:"UPDATE_SETTINGS",settings:cleanSettings}}function __unstableSaveReusableBlock(id,updatedId){return{type:"SAVE_REUSABLE_BLOCK_SUCCESS",id:id,updatedId:updatedId}}function __unstableMarkLastChangeAsPersistent(){return{type:"MARK_LAST_CHANGE_AS_PERSISTENT"}}function __unstableMarkNextChangeAsNotPersistent(){return{type:"MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"}}const __unstableMarkAutomaticChange=()=>_ref19=>{let{dispatch:dispatch}=_ref19;dispatch({type:"MARK_AUTOMATIC_CHANGE"});const{requestIdleCallback:requestIdleCallback=(cb=>setTimeout(cb,100))}=window;requestIdleCallback((()=>{dispatch({type:"MARK_AUTOMATIC_CHANGE_FINAL"})}))},setNavigationMode=function(){let isNavigationMode=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return _ref20=>{let{dispatch:dispatch}=_ref20;dispatch.__unstableSetEditorMode(isNavigationMode?"navigation":"edit")}},__unstableSetEditorMode=mode=>_ref21=>{let{dispatch:dispatch,select:select}=_ref21;if("zoom-out"===mode){const firstSelectedClientId=select.getBlockSelectionStart();firstSelectedClientId&&dispatch.selectBlock(select.getBlockHierarchyRootClientId(firstSelectedClientId))}dispatch({type:"SET_EDITOR_MODE",mode:mode}),"navigation"===mode?(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in navigation mode. Navigate blocks using the Tab key and Arrow keys. Use Left and Right Arrow keys to move between nesting levels. To exit navigation mode and edit the selected block, press Enter.")):"edit"===mode?(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in edit mode. To return to the navigation mode, press Escape.")):"zoom-out"===mode&&(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in zoom-out mode."))},setBlockMovingClientId=function(){let hasBlockMovingClientId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _ref22=>{let{dispatch:dispatch}=_ref22;dispatch({type:"SET_BLOCK_MOVING_MODE",hasBlockMovingClientId:hasBlockMovingClientId}),hasBlockMovingClientId&&(0,a11y_build_module.D)((0,i18n_build_module.__)("Use the Tab key and Arrow keys to choose new block location. Use Left and Right Arrow keys to move between nesting levels. Once location is selected press Enter or Space to move the block."))}},duplicateBlocks=function(clientIds){let updateSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _ref23=>{let{select:select,dispatch:dispatch}=_ref23;if(!clientIds||!clientIds.length)return;const blocks=select.getBlocksByClientId(clientIds);if(blocks.some((block=>!block)))return;if(blocks.map((block=>block.name)).some((blockName=>!(0,blocks_build_module.zb)(blockName,"multiple",!0))))return;const rootClientId=select.getBlockRootClientId(clientIds[0]),clientIdsArray=castArray(clientIds),lastSelectedIndex=select.getBlockIndex(clientIdsArray[clientIdsArray.length-1]),clonedBlocks=blocks.map((block=>(0,blocks_build_module.mR)(block)));return dispatch.insertBlocks(clonedBlocks,lastSelectedIndex+1,rootClientId,updateSelection),clonedBlocks.length>1&&updateSelection&&dispatch.multiSelect(clonedBlocks[0].clientId,clonedBlocks[clonedBlocks.length-1].clientId),clonedBlocks.map((block=>block.clientId))}},insertBeforeBlock=clientId=>_ref24=>{let{select:select,dispatch:dispatch}=_ref24;if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const firstSelectedIndex=select.getBlockIndex(clientId);return dispatch.insertDefaultBlock({},rootClientId,firstSelectedIndex)},insertAfterBlock=clientId=>_ref25=>{let{select:select,dispatch:dispatch}=_ref25;if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const firstSelectedIndex=select.getBlockIndex(clientId);return dispatch.insertDefaultBlock({},rootClientId,firstSelectedIndex+1)};function toggleBlockHighlight(clientId,isHighlighted){return{type:"TOGGLE_BLOCK_HIGHLIGHT",clientId:clientId,isHighlighted:isHighlighted}}const flashBlock=clientId=>async _ref26=>{let{dispatch:dispatch}=_ref26;dispatch(toggleBlockHighlight(clientId,!0)),await new Promise((resolve=>setTimeout(resolve,150))),dispatch(toggleBlockHighlight(clientId,!1))};function setHasControlledInnerBlocks(clientId,hasControlledInnerBlocks){return{type:"SET_HAS_CONTROLLED_INNER_BLOCKS",hasControlledInnerBlocks:hasControlledInnerBlocks,clientId:clientId}}function setBlockVisibility(updates){return{type:"SET_BLOCK_VISIBILITY",updates:updates}}function __unstableSetTemporarilyEditingAsBlocks(temporarilyEditingAsBlocks){return{type:"SET_TEMPORARILY_EDITING_AS_BLOCKS",temporarilyEditingAsBlocks:temporarilyEditingAsBlocks}}var constants=__webpack_require__("./packages/block-editor/src/store/constants.js"),experiments=__webpack_require__("./packages/block-editor/src/experiments.js");const{__experimentalUpdateSettings:store_experimentalUpdateSettings,...actions}=actions_namespaceObject,storeConfig={reducer:reducer,selectors:selectors_namespaceObject,actions:actions},store=(0,redux_store.Z)(constants.G,{...storeConfig,persist:["preferences"]}),registeredStore=(0,build_module.R9)(constants.G,{...storeConfig,persist:["preferences"]});(0,experiments.Un)(registeredStore).registerPrivateActions({__experimentalUpdateSettings:store_experimentalUpdateSettings})},"./packages/block-editor/src/utils/math.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function getDistanceFromPointToEdge(point,rect,edge){const isHorizontal="top"===edge||"bottom"===edge,{x:x,y:y}=point,pointLateralPosition=isHorizontal?x:y,pointForwardPosition=isHorizontal?y:x,edgeStart=isHorizontal?rect.left:rect.top,edgeEnd=isHorizontal?rect.right:rect.bottom,edgeForwardPosition=rect[edge];let edgeLateralPosition;return edgeLateralPosition=pointLateralPosition>=edgeStart&&pointLateralPosition<=edgeEnd?pointLateralPosition:pointLateralPosition<edgeEnd?edgeStart:edgeEnd,Math.sqrt((pointLateralPosition-edgeLateralPosition)**2+(pointForwardPosition-edgeForwardPosition)**2)}function getDistanceToNearestEdge(point,rect){let candidateDistance,candidateEdge,allowedEdges=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["top","bottom","left","right"];return allowedEdges.forEach((edge=>{const distance=getDistanceFromPointToEdge(point,rect,edge);(void 0===candidateDistance||distance<candidateDistance)&&(candidateDistance=distance,candidateEdge=edge)})),[candidateDistance,candidateEdge]}function isPointContainedByRect(point,rect){return rect.left<=point.x&&rect.right>=point.x&&rect.top<=point.y&&rect.bottom>=point.y}__webpack_require__.d(__webpack_exports__,{kY:function(){return getDistanceToNearestEdge},_3:function(){return isPointContainedByRect}})},"./packages/block-editor/src/utils/sorting.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{X:function(){return orderBy}});const comparator=(field,items,order)=>(a,b)=>{let cmpA,cmpB;if("function"==typeof field?(cmpA=field(a),cmpB=field(b)):(cmpA=a[field],cmpB=b[field]),cmpA>cmpB)return"asc"===order?1:-1;if(cmpB>cmpA)return"asc"===order?-1:1;const orderA=items.findIndex((item=>item===a)),orderB=items.findIndex((item=>item===b));return orderA>orderB?1:orderB>orderA?-1:0};function orderBy(items,field){let order=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return items.concat().sort(comparator(field,items,order))}}}]);